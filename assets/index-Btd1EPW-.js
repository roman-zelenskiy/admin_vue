const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Main-BbSNpPt-.js","assets/logo-CtXWPkKI.js","assets/auth-CIQeNXmB.js","assets/Dashboard-BUPJbX4V.js","assets/Customers-cA1Cjf1C.js","assets/customers-DACxtp7I.js","assets/categories-D-WNszC5.js","assets/ModalConfirmation-CeO5wnj2.js","assets/ModalConfirmation-CoEzGUxl.css","assets/formatDate-BTl2i0hr.js","assets/Customers-DOfFLdxA.css","assets/CategoriesList-DVepH3Am.js","assets/CreateCustomer-DaYuUbwk.js","assets/QuillEditor.vue_vue_type_script_setup_true_lang-ixhiCXj6.js","assets/QuillEditor-hEpI-9Tf.css","assets/VueSelect.vue_vue_type_script_setup_true_lang-3GqmdX0R.js","assets/VueSelect-BGcSlmpQ.css","assets/Datepicker.vue_vue_type_script_setup_true_lang-Db4XaR5j.js","assets/Datepicker-Dx22r0kZ.css","assets/CreateCustomer-Cq-8L7Tv.css","assets/CreateCategory-BbUR5YeG.js","assets/CategoryDetails.vue_vue_type_script_setup_true_lang-VVbeHdpt.js","assets/UpdateCategory-DfYZ7YQf.js","assets/Analytics-YjdmN4ad.js","assets/Chartjs-D3LzBt_7.js","assets/masonry-DUDBVgek.js","assets/EmailCompose-C2bABuMK.js","assets/TagsInput-BM_cv5eM.js","assets/EmailDetail-CfYycKpd.js","assets/user-1-Cfn6pmrk.js","assets/gallery-10-ChTVanbr.js","assets/Widgets-oOAfbzC5.js","assets/user-sJRUQrq0.js","assets/jquery-BQZF8FN_.js","assets/user-DiuXD-Cn.css","assets/Highlightjs-DlrQgYvo.js","assets/NavScrollTo-DRJdVWAB.js","assets/axios-BimPEqV4.js","assets/user-5-BarBQsMu.js","assets/user-6-D7en3985.js","assets/user-7-CN3EvBZu.js","assets/PosCustomerOrder-C_oZFp-7.js","assets/PosKitchenOrder-CB5hFxkD.js","assets/PosCounterCheckout-D8teyALC.js","assets/PosTableBooking-BMdgh8hv.js","assets/PosMenuStock-CufkM3LC.js","assets/UiBootstrap-BPjHDEh9.js","assets/UiButtons-C4ACYUhx.js","assets/UiCard-PKvriIyQ.js","assets/UiModalNotifications--GjtxSFq.js","assets/UiTypography--w9BNHXD.js","assets/UiTabsAccordions-BZ0sGWH2.js","assets/FormElements-ouoDMyto.js","assets/FormPlugins-WPasy6Ch.js","assets/FormPlugins-K6JaETxc.css","assets/FormWizards-D4fsbYIa.js","assets/TableElements-CPFIkvse.js","assets/TablePlugins-BvD6vQ6x.js","assets/TablePlugins-huFWzjoz.css","assets/ChartJs-C0uRTgpo.js","assets/ChartApex-BkeZrCtX.js","assets/Map-CiDCxfuP.js","assets/Map-Du_JhSQ8.css","assets/LayoutFixedFooter-CalS_0wm.js","assets/LayoutFullHeight-C5nJ1p_h.js","assets/LayoutFullWidth-CChZQ7aK.js","assets/LayoutBoxedLayout-ZIOB_9tG.js","assets/LayoutMinifiedSidebar-B075cDpT.js","assets/LayoutTopNav-Djcz00iL.js","assets/LayoutMixedNav-BXq92AQM.js","assets/LayoutMixedNavBoxedLayout-CW5UsrXO.js","assets/PageScrumBoard-DZHB6BlA.js","assets/PageProductDetails-D23e-svN.js","assets/PageOrderDetails-CsUGiDGS.js","assets/PageGallery-C54YR9rI.js","assets/PageGallery-z3i1z0Ou.css","assets/PageMessenger-DjtPv1iP.js","assets/user-10-CzqiYDXV.js","assets/user-9-FbtXzXpw.js","assets/PageDataManagement-DwEaCQWs.js","assets/PageDataManagement-BrcP_ao1.css","assets/PageFileManager-CqYZ4eHx.js","assets/iconify-IdBMnRLY.js","assets/PagePricing-DyVMeWPA.js","assets/Landing-G0TgUaFu.js","assets/Profile-DXf_05Ka.js","assets/Settings-CMql8Mem.js","assets/Helper-B7bXf-18.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.1
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Vh(t,e){const n=new Set(t.split(","));return r=>n.has(r)}const Ae={},vo=[],Kn=()=>{},GP=()=>!1,Yl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),kg=t=>t.startsWith("onUpdate:"),Ye=Object.assign,Dg=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},zP=Object.prototype.hasOwnProperty,Ve=(t,e)=>zP.call(t,e),le=Array.isArray,Eo=t=>na(t)==="[object Map]",ki=t=>na(t)==="[object Set]",Yy=t=>na(t)==="[object Date]",YP=t=>na(t)==="[object RegExp]",me=t=>typeof t=="function",Qe=t=>typeof t=="string",yr=t=>typeof t=="symbol",je=t=>t!==null&&typeof t=="object",Lg=t=>(je(t)||me(t))&&me(t.then)&&me(t.catch),Yb=Object.prototype.toString,na=t=>Yb.call(t),QP=t=>na(t).slice(8,-1),Fh=t=>na(t)==="[object Object]",Mg=t=>Qe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,To=Vh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Uh=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},XP=/-(\w)/g,zt=Uh(t=>t.replace(XP,(e,n)=>n?n.toUpperCase():"")),JP=/\B([A-Z])/g,pn=Uh(t=>t.replace(JP,"-$1").toLowerCase()),Ql=Uh(t=>t.charAt(0).toUpperCase()+t.slice(1)),tl=Uh(t=>t?`on${Ql(t)}`:""),on=(t,e)=>!Object.is(t,e),bo=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Qb=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},$u=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Bu=t=>{const e=Qe(t)?Number(t):NaN;return isNaN(e)?t:e};let Qy;const Xb=()=>Qy||(Qy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ZP="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",eN=Vh(ZP);function Xl(t){if(le(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Qe(r)?sN(r):Xl(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Qe(t)||je(t))return t}const tN=/;(?![^(]*\))/g,nN=/:([^]+)/,rN=/\/\*[^]*?\*\//g;function sN(t){const e={};return t.replace(rN,"").split(tN).forEach(n=>{if(n){const r=n.split(nN);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Fr(t){let e="";if(Qe(t))e=t;else if(le(t))for(let n=0;n<t.length;n++){const r=Fr(t[n]);r&&(e+=r+" ")}else if(je(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function iN(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Qe(e)&&(t.class=Fr(e)),n&&(t.style=Xl(n)),t}const oN="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",aN=Vh(oN);function Jb(t){return!!t||t===""}function lN(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Os(t[r],e[r]);return n}function Os(t,e){if(t===e)return!0;let n=Yy(t),r=Yy(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=yr(t),r=yr(e),n||r)return t===e;if(n=le(t),r=le(e),n||r)return n&&r?lN(t,e):!1;if(n=je(t),r=je(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Os(t[o],e[o]))return!1}}return String(t)===String(e)}function $h(t,e){return t.findIndex(n=>Os(n,e))}const Zb=t=>!!(t&&t.__v_isRef===!0),ew=t=>Qe(t)?t:t==null?"":le(t)||je(t)&&(t.toString===Yb||!me(t.toString))?Zb(t)?ew(t.value):JSON.stringify(t,tw,2):String(t),tw=(t,e)=>Zb(e)?tw(t,e.value):Eo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[gf(r,i)+" =>"]=s,n),{})}:ki(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>gf(n))}:yr(e)?gf(e):je(e)&&!le(e)&&!Fh(e)?String(e):e,gf=(t,e="")=>{var n;return yr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.1
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sn;class xg{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=sn,!e&&sn&&(this.index=(sn.scopes||(sn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=sn;try{return sn=this,e()}finally{sn=n}}}on(){sn=this}off(){sn=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Bh(t){return new xg(t)}function Hh(){return sn}function Vg(t,e=!1){sn&&sn.cleanups.push(t)}let Ge;const mf=new WeakSet;class bl{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.nextEffect=void 0,this.cleanup=void 0,this.scheduler=void 0,sn&&sn.active&&sn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,mf.has(this)&&(mf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||(this.flags|=8,this.nextEffect=nl,nl=this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Xy(this),rw(this);const e=Ge,n=Gn;Ge=this,Gn=!0;try{return this.fn()}finally{sw(this),Ge=e,Gn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)$g(e);this.deps=this.depsTail=void 0,Xy(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?mf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){pp(this)&&this.run()}get dirty(){return pp(this)}}let nw=0,nl;function Fg(){nw++}function Ug(){if(--nw>0)return;let t;for(;nl;){let e=nl;for(nl=void 0;e;){const n=e.nextEffect;if(e.nextEffect=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function rw(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function sw(t){let e,n=t.depsTail;for(let r=n;r;r=r.prevDep)r.version===-1?(r===n&&(n=r.prevDep),$g(r),cN(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0;t.deps=e,t.depsTail=n}function pp(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&iw(e.dep.computed)===!1||e.dep.version!==e.version)return!0;return!!t._dirty}function iw(t){if(t.flags&2)return!1;if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===wl))return;t.globalVersion=wl;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&!pp(t)){t.flags&=-3;return}const n=Ge,r=Gn;Ge=t,Gn=!0;try{rw(t);const s=t.fn();(e.version===0||on(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Ge=n,Gn=r,sw(t),t.flags&=-3}}function $g(t){const{dep:e,prevSub:n,nextSub:r}=t;if(n&&(n.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=n,t.nextSub=void 0),e.subs===t&&(e.subs=n),!e.subs&&e.computed){e.computed.flags&=-5;for(let s=e.computed.deps;s;s=s.nextDep)$g(s)}}function cN(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}function uN(t,e){t.effect instanceof bl&&(t=t.effect.fn);const n=new bl(t);e&&Ye(n,e);try{n.run()}catch(s){throw n.stop(),s}const r=n.run.bind(n);return r.effect=n,r}function hN(t){t.effect.stop()}let Gn=!0;const ow=[];function Ws(){ow.push(Gn),Gn=!1}function js(){const t=ow.pop();Gn=t===void 0?!0:t}function Xy(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ge;Ge=void 0;try{e()}finally{Ge=n}}}let wl=0;class Wh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0}track(e){if(!Ge||!Gn)return;let n=this.activeLink;if(n===void 0||n.sub!==Ge)n=this.activeLink={dep:this,sub:Ge,version:this.version,nextDep:void 0,prevDep:void 0,nextSub:void 0,prevSub:void 0,prevActiveLink:void 0},Ge.deps?(n.prevDep=Ge.depsTail,Ge.depsTail.nextDep=n,Ge.depsTail=n):Ge.deps=Ge.depsTail=n,Ge.flags&4&&aw(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ge.depsTail,n.nextDep=void 0,Ge.depsTail.nextDep=n,Ge.depsTail=n,Ge.deps===n&&(Ge.deps=r)}return n}trigger(e){this.version++,wl++,this.notify(e)}notify(e){Fg();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()}finally{Ug()}}}function aw(t){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)aw(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}const Hu=new WeakMap,fi=Symbol(""),gp=Symbol(""),Al=Symbol("");function Xt(t,e,n){if(Gn&&Ge){let r=Hu.get(t);r||Hu.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=new Wh),s.track()}}function Ur(t,e,n,r,s,i){const o=Hu.get(t);if(!o){wl++;return}let a=[];if(e==="clear")a=[...o.values()];else{const l=le(t),u=l&&Mg(n);if(l&&n==="length"){const h=Number(r);o.forEach((d,p)=>{(p==="length"||p===Al||!yr(p)&&p>=h)&&a.push(d)})}else{const h=d=>d&&a.push(d);switch(n!==void 0&&h(o.get(n)),u&&h(o.get(Al)),e){case"add":l?u&&h(o.get("length")):(h(o.get(fi)),Eo(t)&&h(o.get(gp)));break;case"delete":l||(h(o.get(fi)),Eo(t)&&h(o.get(gp)));break;case"set":Eo(t)&&h(o.get(fi));break}}}Fg();for(const l of a)l.trigger();Ug()}function dN(t,e){var n;return(n=Hu.get(t))==null?void 0:n.get(e)}function Xi(t){const e=Oe(t);return e===t?e:(Xt(e,"iterate",Al),Dn(t)?e:e.map(Bt))}function jh(t){return Xt(t=Oe(t),"iterate",Al),t}const fN={__proto__:null,[Symbol.iterator](){return _f(this,Symbol.iterator,Bt)},concat(...t){return Xi(this).concat(...t.map(e=>le(e)?Xi(e):e))},entries(){return _f(this,"entries",t=>(t[1]=Bt(t[1]),t))},every(t,e){return Sr(this,"every",t,e,void 0,arguments)},filter(t,e){return Sr(this,"filter",t,e,n=>n.map(Bt),arguments)},find(t,e){return Sr(this,"find",t,e,Bt,arguments)},findIndex(t,e){return Sr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Sr(this,"findLast",t,e,Bt,arguments)},findLastIndex(t,e){return Sr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Sr(this,"forEach",t,e,void 0,arguments)},includes(...t){return yf(this,"includes",t)},indexOf(...t){return yf(this,"indexOf",t)},join(t){return Xi(this).join(t)},lastIndexOf(...t){return yf(this,"lastIndexOf",t)},map(t,e){return Sr(this,"map",t,e,void 0,arguments)},pop(){return Da(this,"pop")},push(...t){return Da(this,"push",t)},reduce(t,...e){return Jy(this,"reduce",t,e)},reduceRight(t,...e){return Jy(this,"reduceRight",t,e)},shift(){return Da(this,"shift")},some(t,e){return Sr(this,"some",t,e,void 0,arguments)},splice(...t){return Da(this,"splice",t)},toReversed(){return Xi(this).toReversed()},toSorted(t){return Xi(this).toSorted(t)},toSpliced(...t){return Xi(this).toSpliced(...t)},unshift(...t){return Da(this,"unshift",t)},values(){return _f(this,"values",Bt)}};function _f(t,e,n){const r=jh(t),s=r[e]();return r!==t&&!Dn(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const pN=Array.prototype;function Sr(t,e,n,r,s,i){const o=jh(t),a=o!==t&&!Dn(t),l=o[e];if(l!==pN[e]){const d=l.apply(t,i);return a?Bt(d):d}let u=n;o!==t&&(a?u=function(d,p){return n.call(this,Bt(d),p,t)}:n.length>2&&(u=function(d,p){return n.call(this,d,p,t)}));const h=l.call(o,u,r);return a&&s?s(h):h}function Jy(t,e,n,r){const s=jh(t);let i=n;return s!==t&&(Dn(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,Bt(a),l,t)}),s[e](i,...r)}function yf(t,e,n){const r=Oe(t);Xt(r,"iterate",Al);const s=r[e](...n);return(s===-1||s===!1)&&zh(n[0])?(n[0]=Oe(n[0]),r[e](...n)):s}function Da(t,e,n=[]){Ws(),Fg();const r=Oe(t)[e].apply(t,n);return Ug(),js(),r}const gN=Vh("__proto__,__v_isRef,__isVue"),lw=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(yr));function mN(t){yr(t)||(t=String(t));const e=Oe(this);return Xt(e,"has",t),e.hasOwnProperty(t)}class cw{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?gw:pw:i?fw:dw).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=le(e);if(!s){let l;if(o&&(l=fN[n]))return l;if(n==="hasOwnProperty")return mN}const a=Reflect.get(e,n,tt(e)?e:r);return(yr(n)?lw.has(n):gN(n))||(s||Xt(e,"get",n),i)?a:tt(a)?o&&Mg(n)?a:a.value:je(a)?s?Wg(a):ra(a):a}}class uw extends cw{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=ks(i);if(!Dn(r)&&!ks(r)&&(i=Oe(i),r=Oe(r)),!le(e)&&tt(i)&&!tt(r))return l?!1:(i.value=r,!0)}const o=le(e)&&Mg(n)?Number(n)<e.length:Ve(e,n),a=Reflect.set(e,n,r,tt(e)?e:s);return e===Oe(s)&&(o?on(r,i)&&Ur(e,"set",n,r):Ur(e,"add",n,r)),a}deleteProperty(e,n){const r=Ve(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Ur(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!yr(n)||!lw.has(n))&&Xt(e,"has",n),r}ownKeys(e){return Xt(e,"iterate",le(e)?"length":fi),Reflect.ownKeys(e)}}class hw extends cw{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const _N=new uw,yN=new hw,vN=new uw(!0),EN=new hw(!0),Bg=t=>t,qh=t=>Reflect.getPrototypeOf(t);function Wc(t,e,n=!1,r=!1){t=t.__v_raw;const s=Oe(t),i=Oe(e);n||(on(e,i)&&Xt(s,"get",e),Xt(s,"get",i));const{has:o}=qh(s),a=r?Bg:n?jg:Bt;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function jc(t,e=!1){const n=this.__v_raw,r=Oe(n),s=Oe(t);return e||(on(t,s)&&Xt(r,"has",t),Xt(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function qc(t,e=!1){return t=t.__v_raw,!e&&Xt(Oe(t),"iterate",fi),Reflect.get(t,"size",t)}function Zy(t,e=!1){!e&&!Dn(t)&&!ks(t)&&(t=Oe(t));const n=Oe(this);return qh(n).has.call(n,t)||(n.add(t),Ur(n,"add",t,t)),this}function ev(t,e,n=!1){!n&&!Dn(e)&&!ks(e)&&(e=Oe(e));const r=Oe(this),{has:s,get:i}=qh(r);let o=s.call(r,t);o||(t=Oe(t),o=s.call(r,t));const a=i.call(r,t);return r.set(t,e),o?on(e,a)&&Ur(r,"set",t,e):Ur(r,"add",t,e),this}function tv(t){const e=Oe(this),{has:n,get:r}=qh(e);let s=n.call(e,t);s||(t=Oe(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&Ur(e,"delete",t,void 0),i}function nv(){const t=Oe(this),e=t.size!==0,n=t.clear();return e&&Ur(t,"clear",void 0,void 0),n}function Kc(t,e){return function(r,s){const i=this,o=i.__v_raw,a=Oe(o),l=e?Bg:t?jg:Bt;return!t&&Xt(a,"iterate",fi),o.forEach((u,h)=>r.call(s,l(u),l(h),i))}}function Gc(t,e,n){return function(...r){const s=this.__v_raw,i=Oe(s),o=Eo(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),h=n?Bg:e?jg:Bt;return!e&&Xt(i,"iterate",l?gp:fi),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}},[Symbol.iterator](){return this}}}}function ss(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function TN(){const t={get(i){return Wc(this,i)},get size(){return qc(this)},has:jc,add:Zy,set:ev,delete:tv,clear:nv,forEach:Kc(!1,!1)},e={get(i){return Wc(this,i,!1,!0)},get size(){return qc(this)},has:jc,add(i){return Zy.call(this,i,!0)},set(i,o){return ev.call(this,i,o,!0)},delete:tv,clear:nv,forEach:Kc(!1,!0)},n={get(i){return Wc(this,i,!0)},get size(){return qc(this,!0)},has(i){return jc.call(this,i,!0)},add:ss("add"),set:ss("set"),delete:ss("delete"),clear:ss("clear"),forEach:Kc(!0,!1)},r={get(i){return Wc(this,i,!0,!0)},get size(){return qc(this,!0)},has(i){return jc.call(this,i,!0)},add:ss("add"),set:ss("set"),delete:ss("delete"),clear:ss("clear"),forEach:Kc(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Gc(i,!1,!1),n[i]=Gc(i,!0,!1),e[i]=Gc(i,!1,!0),r[i]=Gc(i,!0,!0)}),[t,n,e,r]}const[bN,wN,AN,IN]=TN();function Kh(t,e){const n=e?t?IN:AN:t?wN:bN;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Ve(n,s)&&s in r?n:r,s,i)}const CN={get:Kh(!1,!1)},SN={get:Kh(!1,!0)},RN={get:Kh(!0,!1)},PN={get:Kh(!0,!0)},dw=new WeakMap,fw=new WeakMap,pw=new WeakMap,gw=new WeakMap;function NN(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ON(t){return t.__v_skip||!Object.isExtensible(t)?0:NN(QP(t))}function ra(t){return ks(t)?t:Gh(t,!1,_N,CN,dw)}function Hg(t){return Gh(t,!1,vN,SN,fw)}function Wg(t){return Gh(t,!0,yN,RN,pw)}function kN(t){return Gh(t,!0,EN,PN,gw)}function Gh(t,e,n,r,s){if(!je(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=ON(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function ur(t){return ks(t)?ur(t.__v_raw):!!(t&&t.__v_isReactive)}function ks(t){return!!(t&&t.__v_isReadonly)}function Dn(t){return!!(t&&t.__v_isShallow)}function zh(t){return t?!!t.__v_raw:!1}function Oe(t){const e=t&&t.__v_raw;return e?Oe(e):t}function Yh(t){return Object.isExtensible(t)&&Qb(t,"__v_skip",!0),t}const Bt=t=>je(t)?ra(t):t,jg=t=>je(t)?Wg(t):t;function tt(t){return t?t.__v_isRef===!0:!1}function Yt(t){return mw(t,!1)}function Qh(t){return mw(t,!0)}function mw(t,e){return tt(t)?t:new DN(t,e)}class DN{constructor(e,n){this.dep=new Wh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Oe(e),this._value=n?e:Bt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Dn(e)||ks(e);e=r?e:Oe(e),on(e,n)&&(this._rawValue=e,this._value=r?e:Bt(e),this.dep.trigger())}}function LN(t){t.dep.trigger()}function Ht(t){return tt(t)?t.value:t}function nr(t){return me(t)?t():Ht(t)}const MN={get:(t,e,n)=>Ht(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return tt(s)&&!tt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function qg(t){return ur(t)?t:new Proxy(t,MN)}class xN{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Wh,{get:r,set:s}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function _w(t){return new xN(t)}function yw(t){const e=le(t)?new Array(t.length):{};for(const n in t)e[n]=vw(t,n);return e}class VN{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return dN(Oe(this._object),this._key)}}class FN{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function UN(t,e,n){return tt(t)?t:me(t)?new FN(t):je(t)&&arguments.length>1?vw(t,e,n):Yt(t)}function vw(t,e,n){const r=t[e];return tt(r)?r:new VN(t,e,n)}class $N{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Wh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=wl-1,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){Ge!==this&&(this.flags|=16,this.dep.notify())}get value(){const e=this.dep.track();return iw(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function BN(t,e,n=!1){let r,s;return me(t)?r=t:(r=t.get,s=t.set),new $N(r,s,n)}const HN={GET:"get",HAS:"has",ITERATE:"iterate"},WN={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},zc={},Wu=new WeakMap;let hs;function jN(){return hs}function Ew(t,e=!1,n=hs){if(n){let r=Wu.get(n);r||Wu.set(n,r=[]),r.push(t)}}function qN(t,e,n=Ae){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=n,u=C=>s?C:Dn(C)||s===!1||s===0?Or(C,1):Or(C);let h,d,p,m,_=!1,w=!1;if(tt(t)?(d=()=>t.value,_=Dn(t)):ur(t)?(d=()=>u(t),_=!0):le(t)?(w=!0,_=t.some(C=>ur(C)||Dn(C)),d=()=>t.map(C=>{if(tt(C))return C.value;if(ur(C))return u(C);if(me(C))return l?l(C,2):C()})):me(t)?e?d=l?()=>l(t,2):t:d=()=>{if(p){Ws();try{p()}finally{js()}}const C=hs;hs=h;try{return l?l(t,3,[m]):t(m)}finally{hs=C}}:d=Kn,e&&s){const C=d,L=s===!0?1/0:s;d=()=>Or(C(),L)}const P=Hh(),D=()=>{h.stop(),P&&Dg(P.effects,h)};if(i)if(e){const C=e;e=(...L)=>{C(...L),D()}}else{const C=d;d=()=>{C(),D()}}let k=w?new Array(t.length).fill(zc):zc;const b=C=>{if(!(!(h.flags&1)||!h.dirty&&!C))if(e){const L=h.run();if(s||_||(w?L.some((x,A)=>on(x,k[A])):on(L,k))){p&&p();const x=hs;hs=h;try{const A=[L,k===zc?void 0:w&&k[0]===zc?[]:k,m];l?l(e,3,A):e(...A),k=L}finally{hs=x}}}else h.run()};return a&&a(b),h=new bl(d),h.scheduler=o?()=>o(b,!1):b,m=C=>Ew(C,!1,h),p=h.onStop=()=>{const C=Wu.get(h);if(C){if(l)l(C,4);else for(const L of C)L();Wu.delete(h)}},e?r?b(!0):k=h.run():o?o(b.bind(null,!0),!0):h.run(),D.pause=h.pause.bind(h),D.resume=h.resume.bind(h),D.stop=D,D}function Or(t,e=1/0,n){if(e<=0||!je(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,tt(t))Or(t.value,e,n);else if(le(t))for(let r=0;r<t.length;r++)Or(t[r],e,n);else if(ki(t)||Eo(t))t.forEach(r=>{Or(r,e,n)});else if(Fh(t)){for(const r in t)Or(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Or(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.1
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function KN(t,e){}const GN={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},zN={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function sa(t,e,n,r){try{return r?t(...r):t()}catch(s){Di(s,e,n)}}function Vn(t,e,n,r){if(me(t)){const s=sa(t,e,n,r);return s&&Lg(s)&&s.catch(i=>{Di(i,e,n)}),s}if(le(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Vn(t[i],e,n,r));return s}}function Di(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ae;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,l,u)===!1)return}a=a.parent}if(i){Ws(),sa(i,null,10,[t,l,u]),js();return}}YN(t,n,s,r,o)}function YN(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}let Il=!1,mp=!1;const Tn=[];let li=0;const wo=[];let ds=null,ro=0;const Tw=Promise.resolve();let Kg=null;function ia(t){const e=Kg||Tw;return t?e.then(this?t.bind(this):t):e}function QN(t){let e=Il?li+1:0,n=Tn.length;for(;e<n;){const r=e+n>>>1,s=Tn[r],i=Cl(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Xh(t){if(!(t.flags&1)){const e=Cl(t),n=Tn[Tn.length-1];!n||!(t.flags&2)&&e>=Cl(n)?Tn.push(t):Tn.splice(QN(e),0,t),t.flags&4||(t.flags|=1),bw()}}function bw(){!Il&&!mp&&(mp=!0,Kg=Tw.then(ww))}function ju(t){le(t)?wo.push(...t):ds&&t.id===-1?ds.splice(ro+1,0,t):t.flags&1||(wo.push(t),t.flags&4||(t.flags|=1)),bw()}function rv(t,e,n=Il?li+1:0){for(;n<Tn.length;n++){const r=Tn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Tn.splice(n,1),n--,r(),r.flags&=-2}}}function qu(t){if(wo.length){const e=[...new Set(wo)].sort((n,r)=>Cl(n)-Cl(r));if(wo.length=0,ds){ds.push(...e);return}for(ds=e,ro=0;ro<ds.length;ro++){const n=ds[ro];n.flags&8||n(),n.flags&=-2}ds=null,ro=0}}const Cl=t=>t.id==null?t.flags&2?-1:1/0:t.id;function ww(t){mp=!1,Il=!0;try{for(li=0;li<Tn.length;li++){const e=Tn[li];e&&!(e.flags&8)&&(sa(e,e.i,e.i?15:14),e.flags&=-2)}}finally{li=0,Tn.length=0,qu(),Il=!1,Kg=null,(Tn.length||wo.length)&&ww()}}let so,Yc=[];function Aw(t,e){var n,r;so=t,so?(so.enabled=!0,Yc.forEach(({event:s,args:i})=>so.emit(s,...i)),Yc=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{Aw(i,e)}),setTimeout(()=>{so||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Yc=[])},3e3)):Yc=[]}let vt=null,Jh=null;function Sl(t){const e=vt;return vt=t,Jh=t&&t.type.__scopeId||null,e}function XN(t){Jh=t}function JN(){Jh=null}const ZN=t=>Zh;function Zh(t,e=vt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Ap(-1);const i=Sl(e);let o;try{o=t(...s)}finally{Sl(i),r._d&&Ap(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Iw(t,e){if(vt===null)return t;const n=nc(vt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=Ae]=e[s];i&&(me(i)&&(i={mounted:i,updated:i}),i.deep&&Or(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function rr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Ws(),Vn(l,n,8,[t.el,a,t,e]),js())}}const Cw=Symbol("_vte"),Sw=t=>t.__isTeleport,rl=t=>t&&(t.disabled||t.disabled===""),eO=t=>t&&(t.defer||t.defer===""),sv=t=>typeof SVGElement<"u"&&t instanceof SVGElement,iv=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,_p=(t,e)=>{const n=t&&t.to;return Qe(n)?e?e(n):null:n},tO={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,a,l,u){const{mc:h,pc:d,pbc:p,o:{insert:m,querySelector:_,createText:w,createComment:P}}=u,D=rl(e.props);let{shapeFlag:k,children:b,dynamicChildren:C}=e;if(t==null){const L=e.el=w(""),x=e.anchor=w("");m(L,n,r),m(x,n,r);const A=(y,T)=>{k&16&&h(b,y,T,s,i,o,a,l)},v=()=>{const y=e.target=_p(e.props,_),T=Rw(y,e,w,m);y&&(o!=="svg"&&sv(y)?o="svg":o!=="mathml"&&iv(y)&&(o="mathml"),D||(A(y,T),wu(e)))};D&&(A(n,x),wu(e)),eO(e.props)?Et(v,i):v()}else{e.el=t.el,e.targetStart=t.targetStart;const L=e.anchor=t.anchor,x=e.target=t.target,A=e.targetAnchor=t.targetAnchor,v=rl(t.props),y=v?n:x,T=v?L:A;if(o==="svg"||sv(x)?o="svg":(o==="mathml"||iv(x))&&(o="mathml"),C?(p(t.dynamicChildren,C,y,s,i,o,a),rm(t,e,!0)):l||d(t,e,y,T,s,i,o,a,!1),D)v?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Qc(e,n,L,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const N=e.target=_p(e.props,_);N&&Qc(e,N,null,u,0)}else v&&Qc(e,x,A,u,1);wu(e)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:h,target:d,props:p}=t;if(d&&(s(u),s(h)),i&&s(l),o&16){const m=i||!rl(p);for(let _=0;_<a.length;_++){const w=a[_];r(w,e,n,m,!!w.dynamicChildren)}}},move:Qc,hydrate:nO};function Qc(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:h}=t,d=i===2;if(d&&r(o,e,n),(!d||rl(h))&&l&16)for(let p=0;p<u.length;p++)s(u[p],e,n,2);d&&r(a,e,n)}function nO(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:h}},d){const p=e.target=_p(e.props,l);if(p){const m=p._lpa||p.firstChild;if(e.shapeFlag&16)if(rl(e.props))e.anchor=d(o(t),e,a(t),n,r,s,i),e.targetStart=m,e.targetAnchor=m&&o(m);else{e.anchor=o(t);let _=m;for(;_;){if(_&&_.nodeType===8){if(_.data==="teleport start anchor")e.targetStart=_;else if(_.data==="teleport anchor"){e.targetAnchor=_,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}_=o(_)}e.targetAnchor||Rw(p,e,h,u),d(m&&o(m),e,p,n,r,s,i)}wu(e)}return e.anchor&&o(e.anchor)}const rO=tO;function wu(t){const e=t.ctx;if(e&&e.ut){let n=t.targetStart;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}function Rw(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[Cw]=i,t&&(r(s,t),r(i,t)),i}const fs=Symbol("_leaveCb"),Xc=Symbol("_enterCb");function Gg(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Li(()=>{t.isMounted=!0}),Zl(()=>{t.isUnmounting=!0}),t}const On=[Function,Array],zg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:On,onEnter:On,onAfterEnter:On,onEnterCancelled:On,onBeforeLeave:On,onLeave:On,onAfterLeave:On,onLeaveCancelled:On,onBeforeAppear:On,onAppear:On,onAfterAppear:On,onAppearCancelled:On},Pw=t=>{const e=t.subTree;return e.component?Pw(e.component):e},sO={name:"BaseTransition",props:zg,setup(t,{slots:e}){const n=un(),r=Gg();return()=>{const s=e.default&&ed(e.default(),!0);if(!s||!s.length)return;const i=Nw(s),o=Oe(t),{mode:a}=o;if(r.isLeaving)return vf(i);const l=ov(i);if(!l)return vf(i);let u=ko(l,o,r,n,p=>u=p);l.type!==ft&&Ds(l,u);const h=n.subTree,d=h&&ov(h);if(d&&d.type!==ft&&!Wn(l,d)&&Pw(n).type!==ft){const p=ko(d,o,r,n);if(Ds(d,p),a==="out-in"&&l.type!==ft)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update()},vf(i);a==="in-out"&&l.type!==ft&&(p.delayLeave=(m,_,w)=>{const P=kw(r,d);P[String(d.key)]=d,m[fs]=()=>{_(),m[fs]=void 0,delete u.delayedLeave},u.delayedLeave=w})}return i}}};function Nw(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==ft){e=n;break}}return e}const Ow=sO;function kw(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function ko(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:m,onAfterLeave:_,onLeaveCancelled:w,onBeforeAppear:P,onAppear:D,onAfterAppear:k,onAppearCancelled:b}=e,C=String(t.key),L=kw(n,t),x=(y,T)=>{y&&Vn(y,r,9,T)},A=(y,T)=>{const N=T[1];x(y,T),le(y)?y.every(R=>R.length<=1)&&N():y.length<=1&&N()},v={mode:o,persisted:a,beforeEnter(y){let T=l;if(!n.isMounted)if(i)T=P||l;else return;y[fs]&&y[fs](!0);const N=L[C];N&&Wn(t,N)&&N.el[fs]&&N.el[fs](),x(T,[y])},enter(y){let T=u,N=h,R=d;if(!n.isMounted)if(i)T=D||u,N=k||h,R=b||d;else return;let I=!1;const fe=y[Xc]=Ee=>{I||(I=!0,Ee?x(R,[y]):x(N,[y]),v.delayedLeave&&v.delayedLeave(),y[Xc]=void 0)};T?A(T,[y,fe]):fe()},leave(y,T){const N=String(t.key);if(y[Xc]&&y[Xc](!0),n.isUnmounting)return T();x(p,[y]);let R=!1;const I=y[fs]=fe=>{R||(R=!0,T(),fe?x(w,[y]):x(_,[y]),y[fs]=void 0,L[N]===t&&delete L[N])};L[N]=t,m?A(m,[y,I]):I()},clone(y){const T=ko(y,e,n,r,s);return s&&s(T),T}};return v}function vf(t){if(Jl(t))return t=vr(t),t.children=null,t}function ov(t){if(!Jl(t))return Sw(t.type)&&t.children?Nw(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&me(n.default))return n.default()}}function Ds(t,e){t.shapeFlag&6&&t.component?Ds(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ed(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===_t?(o.patchFlag&128&&s++,r=r.concat(ed(o.children,e,a))):(e||o.type!==ft)&&r.push(a!=null?vr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function qs(t,e){return me(t)?Ye({name:t.name},e,{setup:t}):t}function iO(){const t=un();if(t)return(t.appContext.config.idPrefix||"v")+":"+t.ids[0]+t.ids[1]++}function Yg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Ku(t,e,n,r,s=!1){if(le(t)){t.forEach((m,_)=>Ku(m,e&&(le(e)?e[_]:e),n,r,s));return}if(As(r)&&!s)return;const i=r.shapeFlag&4?nc(r.component):r.el,o=s?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===Ae?a.refs={}:a.refs,d=a.setupState,p=d===Ae?()=>!1:m=>Ve(d,m)&&!(Object.getOwnPropertyDescriptor(h,m)||Ae).get;if(u!=null&&u!==l&&(Qe(u)?(h[u]=null,p(u)&&(d[u]=null)):tt(u)&&(u.value=null)),me(l))sa(l,a,12,[o,h]);else{const m=Qe(l),_=tt(l);if(m||_){const w=()=>{if(t.f){const P=m?p(l)?d[l]:h[l]:l.value;s?le(P)&&Dg(P,i):le(P)?P.includes(i)||P.push(i):m?(h[l]=[i],p(l)&&(d[l]=h[l])):(l.value=[i],t.k&&(h[t.k]=l.value))}else m?(h[l]=o,p(l)&&(d[l]=o)):_&&(l.value=o,t.k&&(h[t.k]=o))};o?(w.id=-1,Et(w,n)):w()}}}let av=!1;const Ji=()=>{av||(console.error("Hydration completed but contains mismatches."),av=!0)},oO=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",aO=t=>t.namespaceURI.includes("MathML"),Jc=t=>{if(t.nodeType===1){if(oO(t))return"svg";if(aO(t))return"mathml"}},fo=t=>t.nodeType===8;function lO(t){const{mt:e,p:n,o:{patchProp:r,createText:s,nextSibling:i,parentNode:o,remove:a,insert:l,createComment:u}}=t,h=(b,C)=>{if(!C.hasChildNodes()){n(null,b,C),qu(),C._vnode=b;return}d(C.firstChild,b,null,null,null),qu(),C._vnode=b},d=(b,C,L,x,A,v=!1)=>{v=v||!!C.dynamicChildren;const y=fo(b)&&b.data==="[",T=()=>w(b,C,L,x,A,y),{type:N,ref:R,shapeFlag:I,patchFlag:fe}=C;let Ee=b.nodeType;C.el=b,fe===-2&&(v=!1,C.dynamicChildren=null);let Y=null;switch(N){case Is:Ee!==3?C.children===""?(l(C.el=s(""),o(b),b),Y=b):Y=T():(b.data!==C.children&&(Ji(),b.data=C.children),Y=i(b));break;case ft:k(b)?(Y=i(b),D(C.el=b.content.firstChild,b,L)):Ee!==8||y?Y=T():Y=i(b);break;case gi:if(y&&(b=i(b),Ee=b.nodeType),Ee===1||Ee===3){Y=b;const re=!C.children.length;for(let oe=0;oe<C.staticCount;oe++)re&&(C.children+=Y.nodeType===1?Y.outerHTML:Y.data),oe===C.staticCount-1&&(C.anchor=Y),Y=i(Y);return y?i(Y):Y}else T();break;case _t:y?Y=_(b,C,L,x,A,v):Y=T();break;default:if(I&1)(Ee!==1||C.type.toLowerCase()!==b.tagName.toLowerCase())&&!k(b)?Y=T():Y=p(b,C,L,x,A,v);else if(I&6){C.slotScopeIds=A;const re=o(b);if(y?Y=P(b):fo(b)&&b.data==="teleport start"?Y=P(b,b.data,"teleport end"):Y=i(b),e(C,re,null,L,x,Jc(re),v),As(C)){let oe;y?(oe=Ke(_t),oe.anchor=Y?Y.previousSibling:re.lastChild):oe=b.nodeType===3?id(""):Ke("div"),oe.el=b,C.component.subTree=oe}}else I&64?Ee!==8?Y=T():Y=C.type.hydrate(b,C,L,x,A,v,t,m):I&128&&(Y=C.type.hydrate(b,C,L,x,Jc(o(b)),A,v,t,d))}return R!=null&&Ku(R,null,x,C),Y},p=(b,C,L,x,A,v)=>{v=v||!!C.dynamicChildren;const{type:y,props:T,patchFlag:N,shapeFlag:R,dirs:I,transition:fe}=C,Ee=y==="input"||y==="option";if(Ee||N!==-1){I&&rr(C,null,L,"created");let Y=!1;if(k(b)){Y=oA(x,fe)&&L&&L.vnode.props&&L.vnode.props.appear;const oe=b.content.firstChild;Y&&fe.beforeEnter(oe),D(oe,b,L),C.el=b=oe}if(R&16&&!(T&&(T.innerHTML||T.textContent))){let oe=m(b.firstChild,C,b,L,x,A,v);for(;oe;){Zc(b,1)||Ji();const Me=oe;oe=oe.nextSibling,a(Me)}}else R&8&&b.textContent!==C.children&&(Zc(b,0)||Ji(),b.textContent=C.children);if(T){if(Ee||!v||N&48){const oe=b.tagName.includes("-");for(const Me in T)(Ee&&(Me.endsWith("value")||Me==="indeterminate")||Yl(Me)&&!To(Me)||Me[0]==="."||oe)&&r(b,Me,null,T[Me],void 0,L)}else if(T.onClick)r(b,"onClick",null,T.onClick,void 0,L);else if(N&4&&ur(T.style))for(const oe in T.style)T.style[oe]}let re;(re=T&&T.onVnodeBeforeMount)&&hn(re,L,C),I&&rr(C,null,L,"beforeMount"),((re=T&&T.onVnodeMounted)||I||Y)&&mA(()=>{re&&hn(re,L,C),Y&&fe.enter(b),I&&rr(C,null,L,"mounted")},x)}return b.nextSibling},m=(b,C,L,x,A,v,y)=>{y=y||!!C.dynamicChildren;const T=C.children,N=T.length;for(let R=0;R<N;R++){const I=y?T[R]:T[R]=dn(T[R]),fe=I.type===Is;b?(fe&&!y&&R+1<N&&dn(T[R+1]).type===Is&&(l(s(b.data.slice(I.children.length)),L,i(b)),b.data=I.children),b=d(b,I,x,A,v,y)):fe&&!I.children?l(I.el=s(""),L):(Zc(L,1)||Ji(),n(null,I,L,null,x,A,Jc(L),v))}return b},_=(b,C,L,x,A,v)=>{const{slotScopeIds:y}=C;y&&(A=A?A.concat(y):y);const T=o(b),N=m(i(b),C,T,L,x,A,v);return N&&fo(N)&&N.data==="]"?i(C.anchor=N):(Ji(),l(C.anchor=u("]"),T,N),N)},w=(b,C,L,x,A,v)=>{if(Zc(b.parentElement,1)||Ji(),C.el=null,v){const N=P(b);for(;;){const R=i(b);if(R&&R!==N)a(R);else break}}const y=i(b),T=o(b);return a(b),n(null,C,T,y,L,x,Jc(T),A),y},P=(b,C="[",L="]")=>{let x=0;for(;b;)if(b=i(b),b&&fo(b)&&(b.data===C&&x++,b.data===L)){if(x===0)return i(b);x--}return b},D=(b,C,L)=>{const x=C.parentNode;x&&x.replaceChild(b,C);let A=L;for(;A;)A.vnode.el===C&&(A.vnode.el=A.subTree.el=b),A=A.parent},k=b=>b.nodeType===1&&b.tagName.toLowerCase()==="template";return[h,d]}const lv="data-allow-mismatch",cO={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Zc(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(lv);)t=t.parentElement;const n=t&&t.getAttribute(lv);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:n.split(",").includes(cO[e])}}const uO=(t=1e4)=>e=>{const n=requestIdleCallback(e,{timeout:t});return()=>cancelIdleCallback(n)},hO=t=>(e,n)=>{const r=new IntersectionObserver(s=>{for(const i of s)if(i.isIntersecting){r.disconnect(),e();break}},t);return n(s=>r.observe(s)),()=>r.disconnect()},dO=t=>e=>{if(t){const n=matchMedia(t);if(n.matches)e();else return n.addEventListener("change",e,{once:!0}),()=>n.removeEventListener("change",e)}},fO=(t=[])=>(e,n)=>{Qe(t)&&(t=[t]);let r=!1;const s=o=>{r||(r=!0,i(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},i=()=>{n(o=>{for(const a of t)o.removeEventListener(a,s)})};return n(o=>{for(const a of t)o.addEventListener(a,s,{once:!0})}),i};function pO(t,e){if(fo(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1)e(r);else if(fo(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const As=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function gO(t){me(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:s=200,hydrate:i,timeout:o,suspensible:a=!0,onError:l}=t;let u=null,h,d=0;const p=()=>(d++,u=null,m()),m=()=>{let _;return u||(_=u=e().catch(w=>{if(w=w instanceof Error?w:new Error(String(w)),l)return new Promise((P,D)=>{l(w,()=>P(p()),()=>D(w),d+1)});throw w}).then(w=>_!==u&&u?u:(w&&(w.__esModule||w[Symbol.toStringTag]==="Module")&&(w=w.default),h=w,w)))};return qs({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(_,w,P){const D=i?()=>{const k=i(P,b=>pO(_,b));k&&(w.bum||(w.bum=[])).push(k)}:P;h?D():m().then(()=>!w.isUnmounted&&D())},get __asyncResolved(){return h},setup(){const _=yt;if(Yg(_),h)return()=>Ef(h,_);const w=b=>{u=null,Di(b,_,13,!r)};if(a&&_.suspense||tc)return m().then(b=>()=>Ef(b,_)).catch(b=>(w(b),()=>r?Ke(r,{error:b}):null));const P=Yt(!1),D=Yt(),k=Yt(!!s);return s&&setTimeout(()=>{k.value=!1},s),o!=null&&setTimeout(()=>{if(!P.value&&!D.value){const b=new Error(`Async component timed out after ${o}ms.`);w(b),D.value=b}},o),m().then(()=>{P.value=!0,_.parent&&Jl(_.parent.vnode)&&Xh(_.parent.update)}).catch(b=>{w(b),D.value=b}),()=>{if(P.value&&h)return Ef(h,_);if(D.value&&r)return Ke(r,{error:D.value});if(n&&!k.value)return Ke(n)}}})}function Ef(t,e){const{ref:n,props:r,children:s,ce:i}=e.vnode,o=Ke(t,r,s);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const Jl=t=>t.type.__isKeepAlive,mO={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=un(),r=n.ctx;if(!r.renderer)return()=>{const k=e.default&&e.default();return k&&k.length===1?k[0]:k};const s=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:u,um:h,o:{createElement:d}}}=r,p=d("div");r.activate=(k,b,C,L,x)=>{const A=k.component;u(k,b,C,0,a),l(A.vnode,k,b,C,A,a,L,k.slotScopeIds,x),Et(()=>{A.isDeactivated=!1,A.a&&bo(A.a);const v=k.props&&k.props.onVnodeMounted;v&&hn(v,A.parent,k)},a)},r.deactivate=k=>{const b=k.component;zu(b.m),zu(b.a),u(k,p,null,1,a),Et(()=>{b.da&&bo(b.da);const C=k.props&&k.props.onVnodeUnmounted;C&&hn(C,b.parent,k),b.isDeactivated=!0},a)};function m(k){Tf(k),h(k,n,a,!0)}function _(k){s.forEach((b,C)=>{const L=Pp(b.type);L&&!k(L)&&w(C)})}function w(k){const b=s.get(k);b&&(!o||!Wn(b,o))?m(b):o&&Tf(o),s.delete(k),i.delete(k)}$r(()=>[t.include,t.exclude],([k,b])=>{k&&_(C=>qa(k,C)),b&&_(C=>!qa(b,C))},{flush:"post",deep:!0});let P=null;const D=()=>{P!=null&&(Yu(n.subTree.type)?Et(()=>{s.set(P,eu(n.subTree))},n.subTree.suspense):s.set(P,eu(n.subTree)))};return Li(D),nd(D),Zl(()=>{s.forEach(k=>{const{subTree:b,suspense:C}=n,L=eu(b);if(k.type===L.type&&k.key===L.key){Tf(L);const x=L.component.da;x&&Et(x,C);return}m(k)})}),()=>{if(P=null,!e.default)return null;const k=e.default(),b=k[0];if(k.length>1)return o=null,k;if(!Ls(b)||!(b.shapeFlag&4)&&!(b.shapeFlag&128))return o=null,b;let C=eu(b);if(C.type===ft)return o=null,C;const L=C.type,x=Pp(As(C)?C.type.__asyncResolved||{}:L),{include:A,exclude:v,max:y}=t;if(A&&(!x||!qa(A,x))||v&&x&&qa(v,x))return C.shapeFlag&=-257,o=C,b;const T=C.key==null?L:C.key,N=s.get(T);return C.el&&(C=vr(C),b.shapeFlag&128&&(b.ssContent=C)),P=T,N?(C.el=N.el,C.component=N.component,C.transition&&Ds(C,C.transition),C.shapeFlag|=512,i.delete(T),i.add(T)):(i.add(T),y&&i.size>parseInt(y,10)&&w(i.values().next().value)),C.shapeFlag|=256,o=C,Yu(b.type)?b:C}}},_O=mO;function qa(t,e){return le(t)?t.some(n=>qa(n,e)):Qe(t)?t.split(",").includes(e):YP(t)?(t.lastIndex=0,t.test(e)):!1}function Dw(t,e){Mw(t,"a",e)}function Lw(t,e){Mw(t,"da",e)}function Mw(t,e,n=yt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(td(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Jl(s.parent.vnode)&&yO(r,e,n,s),s=s.parent}}function yO(t,e,n,r){const s=td(e,t,r,!0);rd(()=>{Dg(r[e],s)},n)}function Tf(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function eu(t){return t.shapeFlag&128?t.ssContent:t}function td(t,e,n=yt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Ws();const a=Ei(n),l=Vn(e,n,t,o);return a(),js(),l});return r?s.unshift(i):s.push(i),i}}const Xr=t=>(e,n=yt)=>{(!tc||t==="sp")&&td(t,(...r)=>e(...r),n)},Qg=Xr("bm"),Li=Xr("m"),xw=Xr("bu"),nd=Xr("u"),Zl=Xr("bum"),rd=Xr("um"),Xg=Xr("sp"),Vw=Xr("rtg"),Fw=Xr("rtc");function Uw(t,e=yt){td("ec",t,e)}const Jg="components",vO="directives";function $w(t,e){return Zg(Jg,t,!0,e)||t}const Bw=Symbol.for("v-ndc");function Hw(t){return Qe(t)?Zg(Jg,t,!1)||t:t||Bw}function EO(t){return Zg(vO,t)}function Zg(t,e,n=!0,r=!1){const s=vt||yt;if(s){const i=s.type;if(t===Jg){const a=Pp(i,!1);if(a&&(a===e||a===zt(e)||a===Ql(zt(e))))return i}const o=cv(s[t]||i[t],e)||cv(s.appContext[t],e);return!o&&r?i:o}}function cv(t,e){return t&&(t[e]||t[zt(e)]||t[Ql(zt(e))])}function Ww(t,e,n,r){let s;const i=n&&n[r],o=le(t);if(o||Qe(t)){const a=o&&ur(t);a&&(t=jh(t)),s=new Array(t.length);for(let l=0,u=t.length;l<u;l++)s[l]=e(a?Bt(t[l]):t[l],l,void 0,i&&i[l])}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i&&i[a])}else if(je(t))if(t[Symbol.iterator])s=Array.from(t,(a,l)=>e(a,l,void 0,i&&i[l]));else{const a=Object.keys(t);s=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];s[l]=e(t[h],h,l,i&&i[l])}}else s=[];return n&&(n[r]=s),s}function TO(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(le(r))for(let s=0;s<r.length;s++)t[r[s].name]=r[s].fn;else r&&(t[r.name]=r.key?(...s)=>{const i=r.fn(...s);return i&&(i.key=r.key),i}:r.fn)}return t}function Ks(t,e,n={},r,s){if(vt.ce||vt.parent&&As(vt.parent)&&vt.parent.ce)return e!=="default"&&(n.name=e),Nt(),Nl(_t,null,[Ke("slot",n,r&&r())],64);let i=t[e];i&&i._c&&(i._d=!1),Nt();const o=i&&em(i(n)),a=Nl(_t,{key:(n.key||o&&o.key||`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function em(t){return t.some(e=>Ls(e)?!(e.type===ft||e.type===_t&&!em(e.children)):!0)?t:null}function bO(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:tl(r)]=t[r];return n}const yp=t=>t?wA(t)?nc(t):yp(t.parent):null,sl=Ye(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>yp(t.parent),$root:t=>yp(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>tm(t),$forceUpdate:t=>t.f||(t.f=()=>{Xh(t.update)}),$nextTick:t=>t.n||(t.n=ia.bind(t.proxy)),$watch:t=>JO.bind(t)}),bf=(t,e)=>t!==Ae&&!t.__isScriptSetup&&Ve(t,e),vp={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(bf(r,e))return o[e]=1,r[e];if(s!==Ae&&Ve(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&Ve(u,e))return o[e]=3,i[e];if(n!==Ae&&Ve(n,e))return o[e]=4,n[e];Ep&&(o[e]=0)}}const h=sl[e];let d,p;if(h)return e==="$attrs"&&Xt(t.attrs,"get",""),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==Ae&&Ve(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,Ve(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return bf(s,e)?(s[e]=n,!0):r!==Ae&&Ve(r,e)?(r[e]=n,!0):Ve(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==Ae&&Ve(t,o)||bf(e,o)||(a=i[0])&&Ve(a,o)||Ve(r,o)||Ve(sl,o)||Ve(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ve(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},wO=Ye({},vp,{get(t,e){if(e!==Symbol.unscopables)return vp.get(t,e,t)},has(t,e){return e[0]!=="_"&&!eN(e)}});function AO(){return null}function IO(){return null}function CO(t){}function SO(t){}function RO(){return null}function PO(){}function NO(t,e){return null}function OO(){return jw().slots}function kO(){return jw().attrs}function jw(){const t=un();return t.setupContext||(t.setupContext=CA(t))}function Rl(t){return le(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function DO(t,e){const n=Rl(t);for(const r in e){if(r.startsWith("__skip"))continue;let s=n[r];s?le(s)||me(s)?s=n[r]={type:s,default:e[r]}:s.default=e[r]:s===null&&(s=n[r]={default:e[r]}),s&&e[`__skip_${r}`]&&(s.skipFactory=!0)}return n}function LO(t,e){return!t||!e?t||e:le(t)&&le(e)?t.concat(e):Ye({},Rl(t),Rl(e))}function MO(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function xO(t){const e=un();let n=t();return Cp(),Lg(n)&&(n=n.catch(r=>{throw Ei(e),r})),[n,()=>Ei(e)]}let Ep=!0;function VO(t){const e=tm(t),n=t.proxy,r=t.ctx;Ep=!1,e.beforeCreate&&uv(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:p,beforeUpdate:m,updated:_,activated:w,deactivated:P,beforeDestroy:D,beforeUnmount:k,destroyed:b,unmounted:C,render:L,renderTracked:x,renderTriggered:A,errorCaptured:v,serverPrefetch:y,expose:T,inheritAttrs:N,components:R,directives:I,filters:fe}=e;if(u&&FO(u,r,null),o)for(const re in o){const oe=o[re];me(oe)&&(r[re]=oe.bind(n))}if(s){const re=s.call(n,n);je(re)&&(t.data=ra(re))}if(Ep=!0,i)for(const re in i){const oe=i[re],Me=me(oe)?oe.bind(n,n):me(oe.get)?oe.get.bind(n,n):Kn,Dt=!me(oe)&&me(oe.set)?oe.set.bind(n):Kn,Lt=En({get:Me,set:Dt});Object.defineProperty(r,re,{enumerable:!0,configurable:!0,get:()=>Lt.value,set:Ue=>Lt.value=Ue})}if(a)for(const re in a)qw(a[re],r,n,re);if(l){const re=me(l)?l.call(n):l;Reflect.ownKeys(re).forEach(oe=>{il(oe,re[oe])})}h&&uv(h,t,"c");function Y(re,oe){le(oe)?oe.forEach(Me=>re(Me.bind(n))):oe&&re(oe.bind(n))}if(Y(Qg,d),Y(Li,p),Y(xw,m),Y(nd,_),Y(Dw,w),Y(Lw,P),Y(Uw,v),Y(Fw,x),Y(Vw,A),Y(Zl,k),Y(rd,C),Y(Xg,y),le(T))if(T.length){const re=t.exposed||(t.exposed={});T.forEach(oe=>{Object.defineProperty(re,oe,{get:()=>n[oe],set:Me=>n[oe]=Me})})}else t.exposed||(t.exposed={});L&&t.render===Kn&&(t.render=L),N!=null&&(t.inheritAttrs=N),R&&(t.components=R),I&&(t.directives=I),y&&Yg(t)}function FO(t,e,n=Kn){le(t)&&(t=Tp(t));for(const r in t){const s=t[r];let i;je(s)?"default"in s?i=Qt(s.from||r,s.default,!0):i=Qt(s.from||r):i=Qt(s),tt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function uv(t,e,n){Vn(le(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function qw(t,e,n,r){let s=r.includes(".")?dA(n,r):()=>n[r];if(Qe(t)){const i=e[t];me(i)&&$r(s,i)}else if(me(t))$r(s,t.bind(n));else if(je(t))if(le(t))t.forEach(i=>qw(i,e,n,r));else{const i=me(t.handler)?t.handler.bind(n):e[t.handler];me(i)&&$r(s,i,t)}}function tm(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>Gu(l,u,o,!0)),Gu(l,e,o)),je(e)&&i.set(e,l),l}function Gu(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Gu(t,i,n,!0),s&&s.forEach(o=>Gu(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=UO[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const UO={data:hv,props:dv,emits:dv,methods:Ka,computed:Ka,beforeCreate:rn,created:rn,beforeMount:rn,mounted:rn,beforeUpdate:rn,updated:rn,beforeDestroy:rn,beforeUnmount:rn,destroyed:rn,unmounted:rn,activated:rn,deactivated:rn,errorCaptured:rn,serverPrefetch:rn,components:Ka,directives:Ka,watch:BO,provide:hv,inject:$O};function hv(t,e){return e?t?function(){return Ye(me(t)?t.call(this,this):t,me(e)?e.call(this,this):e)}:e:t}function $O(t,e){return Ka(Tp(t),Tp(e))}function Tp(t){if(le(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function rn(t,e){return t?[...new Set([].concat(t,e))]:e}function Ka(t,e){return t?Ye(Object.create(null),t,e):e}function dv(t,e){return t?le(t)&&le(e)?[...new Set([...t,...e])]:Ye(Object.create(null),Rl(t),Rl(e??{})):e}function BO(t,e){if(!t)return e;if(!e)return t;const n=Ye(Object.create(null),t);for(const r in e)n[r]=rn(t[r],e[r]);return n}function Kw(){return{app:null,config:{isNativeTag:GP,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let HO=0;function WO(t,e){return function(r,s=null){me(r)||(r=Ye({},r)),s!=null&&!je(s)&&(s=null);const i=Kw(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:HO++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:RA,get config(){return i.config},set config(h){},use(h,...d){return o.has(h)||(h&&me(h.install)?(o.add(h),h.install(u,...d)):me(h)&&(o.add(h),h(u,...d))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,d){return d?(i.components[h]=d,u):i.components[h]},directive(h,d){return d?(i.directives[h]=d,u):i.directives[h]},mount(h,d,p){if(!l){const m=u._ceVNode||Ke(r,s);return m.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),d&&e?e(m,h):t(m,h,p),l=!0,u._container=h,h.__vue_app__=u,nc(m.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Vn(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,d){return i.provides[h]=d,u},runWithContext(h){const d=pi;pi=u;try{return h()}finally{pi=d}}};return u}}let pi=null;function il(t,e){if(yt){let n=yt.provides;const r=yt.parent&&yt.parent.provides;r===n&&(n=yt.provides=Object.create(r)),n[t]=e}}function Qt(t,e,n=!1){const r=yt||vt;if(r||pi){const s=pi?pi._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&me(e)?e.call(r&&r.proxy):e}}function Gw(){return!!(yt||vt||pi)}const zw={},Yw=()=>Object.create(zw),Qw=t=>Object.getPrototypeOf(t)===zw;function jO(t,e,n,r=!1){const s={},i=Yw();t.propsDefaults=Object.create(null),Xw(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Hg(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function qO(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Oe(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if(sd(t.emitsOptions,p))continue;const m=e[p];if(l)if(Ve(i,p))m!==i[p]&&(i[p]=m,u=!0);else{const _=zt(p);s[_]=bp(l,a,_,m,t,!1)}else m!==i[p]&&(i[p]=m,u=!0)}}}else{Xw(t,e,s,i)&&(u=!0);let h;for(const d in a)(!e||!Ve(e,d)&&((h=pn(d))===d||!Ve(e,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(s[d]=bp(l,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!Ve(e,d))&&(delete i[d],u=!0)}u&&Ur(t.attrs,"set","")}function Xw(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(To(l))continue;const u=e[l];let h;s&&Ve(s,h=zt(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:sd(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=Oe(n),u=a||Ae;for(let h=0;h<i.length;h++){const d=i[h];n[d]=bp(s,l,d,u[d],t,!Ve(u,d))}}return o}function bp(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Ve(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&me(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const h=Ei(s);r=u[n]=l.call(null,e),h()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===pn(n))&&(r=!0))}return r}const KO=new WeakMap;function Jw(t,e,n=!1){const r=n?KO:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!me(t)){const h=d=>{l=!0;const[p,m]=Jw(d,e,!0);Ye(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return je(t)&&r.set(t,vo),vo;if(le(i))for(let h=0;h<i.length;h++){const d=zt(i[h]);fv(d)&&(o[d]=Ae)}else if(i)for(const h in i){const d=zt(h);if(fv(d)){const p=i[h],m=o[d]=le(p)||me(p)?{type:p}:Ye({},p),_=m.type;let w=!1,P=!0;if(le(_))for(let D=0;D<_.length;++D){const k=_[D],b=me(k)&&k.name;if(b==="Boolean"){w=!0;break}else b==="String"&&(P=!1)}else w=me(_)&&_.name==="Boolean";m[0]=w,m[1]=P,(w||Ve(m,"default"))&&a.push(d)}}const u=[o,a];return je(t)&&r.set(t,u),u}function fv(t){return t[0]!=="$"&&!To(t)}const Zw=t=>t[0]==="_"||t==="$stable",nm=t=>le(t)?t.map(dn):[dn(t)],GO=(t,e,n)=>{if(e._n)return e;const r=Zh((...s)=>nm(e(...s)),n);return r._c=!1,r},eA=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Zw(s))continue;const i=t[s];if(me(i))e[s]=GO(s,i,r);else if(i!=null){const o=nm(i);e[s]=()=>o}}},tA=(t,e)=>{const n=nm(e);t.slots.default=()=>n},nA=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},zO=(t,e,n)=>{const r=t.slots=Yw();if(t.vnode.shapeFlag&32){const s=e._;s?(nA(r,e,n),n&&Qb(r,"_",s,!0)):eA(e,r)}else e&&tA(t,e)},YO=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Ae;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:nA(s,e,n):(i=!e.$stable,eA(e,s)),o=e}else e&&(tA(t,e),o={default:1});if(i)for(const a in s)!Zw(a)&&o[a]==null&&delete s[a]},Et=mA;function rA(t){return iA(t)}function sA(t){return iA(t,lO)}function iA(t,e){const n=Xb();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:p,setScopeId:m=Kn,insertStaticContent:_}=t,w=(S,O,V,H=null,$=null,q=null,J=void 0,G=null,z=!!O.dynamicChildren)=>{if(S===O)return;S&&!Wn(S,O)&&(H=U(S),Ue(S,$,q,!0),S=null),O.patchFlag===-2&&(z=!1,O.dynamicChildren=null);const{type:K,ref:he,shapeFlag:Z}=O;switch(K){case Is:P(S,O,V,H);break;case ft:D(S,O,V,H);break;case gi:S==null&&k(O,V,H,J);break;case _t:R(S,O,V,H,$,q,J,G,z);break;default:Z&1?L(S,O,V,H,$,q,J,G,z):Z&6?I(S,O,V,H,$,q,J,G,z):(Z&64||Z&128)&&K.process(S,O,V,H,$,q,J,G,z,se)}he!=null&&$&&Ku(he,S&&S.ref,q,O||S,!O)},P=(S,O,V,H)=>{if(S==null)r(O.el=a(O.children),V,H);else{const $=O.el=S.el;O.children!==S.children&&u($,O.children)}},D=(S,O,V,H)=>{S==null?r(O.el=l(O.children||""),V,H):O.el=S.el},k=(S,O,V,H)=>{[S.el,S.anchor]=_(S.children,O,V,H,S.el,S.anchor)},b=({el:S,anchor:O},V,H)=>{let $;for(;S&&S!==O;)$=p(S),r(S,V,H),S=$;r(O,V,H)},C=({el:S,anchor:O})=>{let V;for(;S&&S!==O;)V=p(S),s(S),S=V;s(O)},L=(S,O,V,H,$,q,J,G,z)=>{O.type==="svg"?J="svg":O.type==="math"&&(J="mathml"),S==null?x(O,V,H,$,q,J,G,z):y(S,O,$,q,J,G,z)},x=(S,O,V,H,$,q,J,G)=>{let z,K;const{props:he,shapeFlag:Z,transition:ue,dirs:ie}=S;if(z=S.el=o(S.type,q,he&&he.is,he),Z&8?h(z,S.children):Z&16&&v(S.children,z,null,H,$,wf(S,q),J,G),ie&&rr(S,null,H,"created"),A(z,S,S.scopeId,J,H),he){for(const Se in he)Se!=="value"&&!To(Se)&&i(z,Se,null,he[Se],q,H);"value"in he&&i(z,"value",null,he.value,q),(K=he.onVnodeBeforeMount)&&hn(K,H,S)}ie&&rr(S,null,H,"beforeMount");const pe=oA($,ue);pe&&ue.beforeEnter(z),r(z,O,V),((K=he&&he.onVnodeMounted)||pe||ie)&&Et(()=>{K&&hn(K,H,S),pe&&ue.enter(z),ie&&rr(S,null,H,"mounted")},$)},A=(S,O,V,H,$)=>{if(V&&m(S,V),H)for(let q=0;q<H.length;q++)m(S,H[q]);if($){let q=$.subTree;if(O===q||Yu(q.type)&&(q.ssContent===O||q.ssFallback===O)){const J=$.vnode;A(S,J,J.scopeId,J.slotScopeIds,$.parent)}}},v=(S,O,V,H,$,q,J,G,z=0)=>{for(let K=z;K<S.length;K++){const he=S[K]=G?ps(S[K]):dn(S[K]);w(null,he,O,V,H,$,q,J,G)}},y=(S,O,V,H,$,q,J)=>{const G=O.el=S.el;let{patchFlag:z,dynamicChildren:K,dirs:he}=O;z|=S.patchFlag&16;const Z=S.props||Ae,ue=O.props||Ae;let ie;if(V&&si(V,!1),(ie=ue.onVnodeBeforeUpdate)&&hn(ie,V,O,S),he&&rr(O,S,V,"beforeUpdate"),V&&si(V,!0),(Z.innerHTML&&ue.innerHTML==null||Z.textContent&&ue.textContent==null)&&h(G,""),K?T(S.dynamicChildren,K,G,V,H,wf(O,$),q):J||oe(S,O,G,null,V,H,wf(O,$),q,!1),z>0){if(z&16)N(G,Z,ue,V,$);else if(z&2&&Z.class!==ue.class&&i(G,"class",null,ue.class,$),z&4&&i(G,"style",Z.style,ue.style,$),z&8){const pe=O.dynamicProps;for(let Se=0;Se<pe.length;Se++){const ke=pe[Se],Mt=Z[ke],At=ue[ke];(At!==Mt||ke==="value")&&i(G,ke,Mt,At,$,V)}}z&1&&S.children!==O.children&&h(G,O.children)}else!J&&K==null&&N(G,Z,ue,V,$);((ie=ue.onVnodeUpdated)||he)&&Et(()=>{ie&&hn(ie,V,O,S),he&&rr(O,S,V,"updated")},H)},T=(S,O,V,H,$,q,J)=>{for(let G=0;G<O.length;G++){const z=S[G],K=O[G],he=z.el&&(z.type===_t||!Wn(z,K)||z.shapeFlag&70)?d(z.el):V;w(z,K,he,null,H,$,q,J,!0)}},N=(S,O,V,H,$)=>{if(O!==V){if(O!==Ae)for(const q in O)!To(q)&&!(q in V)&&i(S,q,O[q],null,$,H);for(const q in V){if(To(q))continue;const J=V[q],G=O[q];J!==G&&q!=="value"&&i(S,q,G,J,$,H)}"value"in V&&i(S,"value",O.value,V.value,$)}},R=(S,O,V,H,$,q,J,G,z)=>{const K=O.el=S?S.el:a(""),he=O.anchor=S?S.anchor:a("");let{patchFlag:Z,dynamicChildren:ue,slotScopeIds:ie}=O;ie&&(G=G?G.concat(ie):ie),S==null?(r(K,V,H),r(he,V,H),v(O.children||[],V,he,$,q,J,G,z)):Z>0&&Z&64&&ue&&S.dynamicChildren?(T(S.dynamicChildren,ue,V,$,q,J,G),(O.key!=null||$&&O===$.subTree)&&rm(S,O,!0)):oe(S,O,V,he,$,q,J,G,z)},I=(S,O,V,H,$,q,J,G,z)=>{O.slotScopeIds=G,S==null?O.shapeFlag&512?$.ctx.activate(O,V,H,J,z):fe(O,V,H,$,q,J,z):Ee(S,O,z)},fe=(S,O,V,H,$,q,J)=>{const G=S.component=bA(S,H,$);if(Jl(S)&&(G.ctx.renderer=se),AA(G,!1,J),G.asyncDep){if($&&$.registerDep(G,Y,J),!S.el){const z=G.subTree=Ke(ft);D(null,z,O,V)}}else Y(G,S,O,V,$,q,J)},Ee=(S,O,V)=>{const H=O.component=S.component;if(sk(S,O,V))if(H.asyncDep&&!H.asyncResolved){re(H,O,V);return}else H.next=O,H.update();else O.el=S.el,H.vnode=O},Y=(S,O,V,H,$,q,J)=>{const G=()=>{if(S.isMounted){let{next:Z,bu:ue,u:ie,parent:pe,vnode:Se}=S;{const xt=aA(S);if(xt){Z&&(Z.el=Se.el,re(S,Z,J)),xt.asyncDep.then(()=>{S.isUnmounted||G()});return}}let ke=Z,Mt;si(S,!1),Z?(Z.el=Se.el,re(S,Z,J)):Z=Se,ue&&bo(ue),(Mt=Z.props&&Z.props.onVnodeBeforeUpdate)&&hn(Mt,pe,Z,Se),si(S,!0);const At=Au(S),It=S.subTree;S.subTree=At,w(It,At,d(It.el),U(It),S,$,q),Z.el=At.el,ke===null&&sm(S,At.el),ie&&Et(ie,$),(Mt=Z.props&&Z.props.onVnodeUpdated)&&Et(()=>hn(Mt,pe,Z,Se),$)}else{let Z;const{el:ue,props:ie}=O,{bm:pe,m:Se,parent:ke,root:Mt,type:At}=S,It=As(O);if(si(S,!1),pe&&bo(pe),!It&&(Z=ie&&ie.onVnodeBeforeMount)&&hn(Z,ke,O),si(S,!0),ue&&xe){const xt=()=>{S.subTree=Au(S),xe(ue,S.subTree,S,$,null)};It?At.__asyncHydrate(ue,S,xt):xt()}else{Mt.ce&&Mt.ce._injectChildStyle(At);const xt=S.subTree=Au(S);w(null,xt,V,H,S,$,q),O.el=xt.el}if(Se&&Et(Se,$),!It&&(Z=ie&&ie.onVnodeMounted)){const xt=O;Et(()=>hn(Z,ke,xt),$)}(O.shapeFlag&256||ke&&As(ke.vnode)&&ke.vnode.shapeFlag&256)&&S.a&&Et(S.a,$),S.isMounted=!0,O=V=H=null}};S.scope.on();const z=S.effect=new bl(G);S.scope.off();const K=S.update=z.run.bind(z),he=S.job=z.runIfDirty.bind(z);he.i=S,he.id=S.uid,z.scheduler=()=>Xh(he),si(S,!0),K()},re=(S,O,V)=>{O.component=S;const H=S.vnode.props;S.vnode=O,S.next=null,qO(S,O.props,H,V),YO(S,O.children,V),Ws(),rv(S),js()},oe=(S,O,V,H,$,q,J,G,z=!1)=>{const K=S&&S.children,he=S?S.shapeFlag:0,Z=O.children,{patchFlag:ue,shapeFlag:ie}=O;if(ue>0){if(ue&128){Dt(K,Z,V,H,$,q,J,G,z);return}else if(ue&256){Me(K,Z,V,H,$,q,J,G,z);return}}ie&8?(he&16&&ut(K,$,q),Z!==K&&h(V,Z)):he&16?ie&16?Dt(K,Z,V,H,$,q,J,G,z):ut(K,$,q,!0):(he&8&&h(V,""),ie&16&&v(Z,V,H,$,q,J,G,z))},Me=(S,O,V,H,$,q,J,G,z)=>{S=S||vo,O=O||vo;const K=S.length,he=O.length,Z=Math.min(K,he);let ue;for(ue=0;ue<Z;ue++){const ie=O[ue]=z?ps(O[ue]):dn(O[ue]);w(S[ue],ie,V,null,$,q,J,G,z)}K>he?ut(S,$,q,!0,!1,Z):v(O,V,H,$,q,J,G,z,Z)},Dt=(S,O,V,H,$,q,J,G,z)=>{let K=0;const he=O.length;let Z=S.length-1,ue=he-1;for(;K<=Z&&K<=ue;){const ie=S[K],pe=O[K]=z?ps(O[K]):dn(O[K]);if(Wn(ie,pe))w(ie,pe,V,null,$,q,J,G,z);else break;K++}for(;K<=Z&&K<=ue;){const ie=S[Z],pe=O[ue]=z?ps(O[ue]):dn(O[ue]);if(Wn(ie,pe))w(ie,pe,V,null,$,q,J,G,z);else break;Z--,ue--}if(K>Z){if(K<=ue){const ie=ue+1,pe=ie<he?O[ie].el:H;for(;K<=ue;)w(null,O[K]=z?ps(O[K]):dn(O[K]),V,pe,$,q,J,G,z),K++}}else if(K>ue)for(;K<=Z;)Ue(S[K],$,q,!0),K++;else{const ie=K,pe=K,Se=new Map;for(K=pe;K<=ue;K++){const en=O[K]=z?ps(O[K]):dn(O[K]);en.key!=null&&Se.set(en.key,K)}let ke,Mt=0;const At=ue-pe+1;let It=!1,xt=0;const es=new Array(At);for(K=0;K<At;K++)es[K]=0;for(K=ie;K<=Z;K++){const en=S[K];if(Mt>=At){Ue(en,$,q,!0);continue}let Nn;if(en.key!=null)Nn=Se.get(en.key);else for(ke=pe;ke<=ue;ke++)if(es[ke-pe]===0&&Wn(en,O[ke])){Nn=ke;break}Nn===void 0?Ue(en,$,q,!0):(es[Nn-pe]=K+1,Nn>=xt?xt=Nn:It=!0,w(en,O[Nn],V,null,$,q,J,G,z),Mt++)}const qi=It?QO(es):vo;for(ke=qi.length-1,K=At-1;K>=0;K--){const en=pe+K,Nn=O[en],Ki=en+1<he?O[en+1].el:H;es[K]===0?w(null,Nn,V,Ki,$,q,J,G,z):It&&(ke<0||K!==qi[ke]?Lt(Nn,V,Ki,2):ke--)}}},Lt=(S,O,V,H,$=null)=>{const{el:q,type:J,transition:G,children:z,shapeFlag:K}=S;if(K&6){Lt(S.component.subTree,O,V,H);return}if(K&128){S.suspense.move(O,V,H);return}if(K&64){J.move(S,O,V,se);return}if(J===_t){r(q,O,V);for(let Z=0;Z<z.length;Z++)Lt(z[Z],O,V,H);r(S.anchor,O,V);return}if(J===gi){b(S,O,V);return}if(H!==2&&K&1&&G)if(H===0)G.beforeEnter(q),r(q,O,V),Et(()=>G.enter(q),$);else{const{leave:Z,delayLeave:ue,afterLeave:ie}=G,pe=()=>r(q,O,V),Se=()=>{Z(q,()=>{pe(),ie&&ie()})};ue?ue(q,pe,Se):Se()}else r(q,O,V)},Ue=(S,O,V,H=!1,$=!1)=>{const{type:q,props:J,ref:G,children:z,dynamicChildren:K,shapeFlag:he,patchFlag:Z,dirs:ue,cacheIndex:ie}=S;if(Z===-2&&($=!1),G!=null&&Ku(G,null,V,S,!0),ie!=null&&(O.renderCache[ie]=void 0),he&256){O.ctx.deactivate(S);return}const pe=he&1&&ue,Se=!As(S);let ke;if(Se&&(ke=J&&J.onVnodeBeforeUnmount)&&hn(ke,O,S),he&6)mt(S.component,V,H);else{if(he&128){S.suspense.unmount(V,H);return}pe&&rr(S,null,O,"beforeUnmount"),he&64?S.type.remove(S,O,V,se,H):K&&!K.hasOnce&&(q!==_t||Z>0&&Z&64)?ut(K,O,V,!1,!0):(q===_t&&Z&384||!$&&he&16)&&ut(z,O,V),H&&Be(S)}(Se&&(ke=J&&J.onVnodeUnmounted)||pe)&&Et(()=>{ke&&hn(ke,O,S),pe&&rr(S,null,O,"unmounted")},V)},Be=S=>{const{type:O,el:V,anchor:H,transition:$}=S;if(O===_t){Zt(V,H);return}if(O===gi){C(S);return}const q=()=>{s(V),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(S.shapeFlag&1&&$&&!$.persisted){const{leave:J,delayLeave:G}=$,z=()=>J(V,q);G?G(S.el,q,z):z()}else q()},Zt=(S,O)=>{let V;for(;S!==O;)V=p(S),s(S),S=V;s(O)},mt=(S,O,V)=>{const{bum:H,scope:$,job:q,subTree:J,um:G,m:z,a:K}=S;zu(z),zu(K),H&&bo(H),$.stop(),q&&(q.flags|=8,Ue(J,S,O,V)),G&&Et(G,O),Et(()=>{S.isUnmounted=!0},O),O&&O.pendingBranch&&!O.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===O.pendingId&&(O.deps--,O.deps===0&&O.resolve())},ut=(S,O,V,H=!1,$=!1,q=0)=>{for(let J=q;J<S.length;J++)Ue(S[J],O,V,H,$)},U=S=>{if(S.shapeFlag&6)return U(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const O=p(S.anchor||S.el),V=O&&O[Cw];return V?p(V):O};let ee=!1;const X=(S,O,V)=>{S==null?O._vnode&&Ue(O._vnode,null,null,!0):w(O._vnode||null,S,O,null,null,null,V),O._vnode=S,ee||(ee=!0,rv(),qu(),ee=!1)},se={p:w,um:Ue,m:Lt,r:Be,mt:fe,mc:v,pc:oe,pbc:T,n:U,o:t};let be,xe;return e&&([be,xe]=e(se)),{render:X,hydrate:be,createApp:WO(X,be)}}function wf({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function si({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function oA(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function rm(t,e,n=!1){const r=t.children,s=e.children;if(le(r)&&le(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=ps(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&rm(o,a)),a.type===Is&&(a.el=o.el)}}function QO(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function aA(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:aA(e)}function zu(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const lA=Symbol.for("v-scx"),cA=()=>Qt(lA);function XO(t,e){return ec(t,null,e)}function uA(t,e){return ec(t,null,{flush:"post"})}function hA(t,e){return ec(t,null,{flush:"sync"})}function $r(t,e,n){return ec(t,e,n)}function ec(t,e,n=Ae){const{immediate:r,deep:s,flush:i,once:o}=n,a=Ye({},n);let l;if(tc)if(i==="sync"){const p=cA();l=p.__watcherHandles||(p.__watcherHandles=[])}else if(!e||r)a.once=!0;else return{stop:Kn,resume:Kn,pause:Kn};const u=yt;a.call=(p,m,_)=>Vn(p,u,m,_);let h=!1;i==="post"?a.scheduler=p=>{Et(p,u&&u.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(p,m)=>{m?p():Xh(p)}),a.augmentJob=p=>{e&&(p.flags|=4),h&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const d=qN(t,e,a);return l&&l.push(d),d}function JO(t,e,n){const r=this.proxy,s=Qe(t)?t.includes(".")?dA(r,t):()=>r[t]:t.bind(r,r);let i;me(e)?i=e:(i=e.handler,n=e);const o=Ei(this),a=ec(s,i.bind(r),n);return o(),a}function dA(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function ZO(t,e,n=Ae){const r=un(),s=zt(e),i=pn(e),o=fA(t,e),a=_w((l,u)=>{let h,d=Ae,p;return hA(()=>{const m=t[e];on(h,m)&&(h=m,u())}),{get(){return l(),n.get?n.get(h):h},set(m){const _=n.set?n.set(m):m;if(!on(_,h)&&!(d!==Ae&&on(m,d)))return;const w=r.vnode.props;w&&(e in w||s in w||i in w)&&(`onUpdate:${e}`in w||`onUpdate:${s}`in w||`onUpdate:${i}`in w)||(h=m,u()),r.emit(`update:${e}`,_),on(m,_)&&on(m,d)&&!on(_,p)&&u(),d=m,p=_}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||Ae:a,done:!1}:{done:!0}}}},a}const fA=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${zt(e)}Modifiers`]||t[`${pn(e)}Modifiers`];function ek(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Ae;let s=n;const i=e.startsWith("update:"),o=i&&fA(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>Qe(h)?h.trim():h)),o.number&&(s=n.map($u)));let a,l=r[a=tl(e)]||r[a=tl(zt(e))];!l&&i&&(l=r[a=tl(pn(e))]),l&&Vn(l,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Vn(u,t,6,s)}}function pA(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!me(t)){const l=u=>{const h=pA(u,e,!0);h&&(a=!0,Ye(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(je(t)&&r.set(t,null),null):(le(i)?i.forEach(l=>o[l]=null):Ye(o,i),je(t)&&r.set(t,o),o)}function sd(t,e){return!t||!Yl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ve(t,e[0].toLowerCase()+e.slice(1))||Ve(t,pn(e))||Ve(t,e))}function Au(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:p,setupState:m,ctx:_,inheritAttrs:w}=t,P=Sl(t);let D,k;try{if(n.shapeFlag&4){const C=s||r,L=C;D=dn(u.call(L,C,h,d,m,p,_)),k=a}else{const C=e;D=dn(C.length>1?C(d,{attrs:a,slots:o,emit:l}):C(d,null)),k=e.props?a:nk(a)}}catch(C){ol.length=0,Di(C,t,1),D=Ke(ft)}let b=D;if(k&&w!==!1){const C=Object.keys(k),{shapeFlag:L}=b;C.length&&L&7&&(i&&C.some(kg)&&(k=rk(k,i)),b=vr(b,k,!1,!0))}return n.dirs&&(b=vr(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),D=b,Sl(P),D}function tk(t,e=!0){let n;for(let r=0;r<t.length;r++){const s=t[r];if(Ls(s)){if(s.type!==ft||s.children==="v-if"){if(n)return;n=s}}else return}return n}const nk=t=>{let e;for(const n in t)(n==="class"||n==="style"||Yl(n))&&((e||(e={}))[n]=t[n]);return e},rk=(t,e)=>{const n={};for(const r in t)(!kg(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function sk(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?pv(r,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==r[p]&&!sd(u,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?pv(r,o,u):!0:!!o;return!1}function pv(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!sd(n,i))return!0}return!1}function sm({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Yu=t=>t.__isSuspense;let wp=0;const ik={name:"Suspense",__isSuspense:!0,process(t,e,n,r,s,i,o,a,l,u){if(t==null)ak(e,n,r,s,i,o,a,l,u);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}lk(t,e,n,r,s,o,a,l,u)}},hydrate:ck,normalize:uk},ok=ik;function Pl(t,e){const n=t.props&&t.props[e];me(n)&&n()}function ak(t,e,n,r,s,i,o,a,l){const{p:u,o:{createElement:h}}=l,d=h("div"),p=t.suspense=gA(t,s,r,e,d,n,i,o,a,l);u(null,p.pendingBranch=t.ssContent,d,null,r,p,i,o),p.deps>0?(Pl(t,"onPending"),Pl(t,"onFallback"),u(null,t.ssFallback,e,n,r,null,i,o),Ao(p,t.ssFallback)):p.resolve(!1,!0)}function lk(t,e,n,r,s,i,o,a,{p:l,um:u,o:{createElement:h}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const p=e.ssContent,m=e.ssFallback,{activeBranch:_,pendingBranch:w,isInFallback:P,isHydrating:D}=d;if(w)d.pendingBranch=p,Wn(p,w)?(l(w,p,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0?d.resolve():P&&(D||(l(_,m,n,r,s,null,i,o,a),Ao(d,m)))):(d.pendingId=wp++,D?(d.isHydrating=!1,d.activeBranch=w):u(w,s,d),d.deps=0,d.effects.length=0,d.hiddenContainer=h("div"),P?(l(null,p,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0?d.resolve():(l(_,m,n,r,s,null,i,o,a),Ao(d,m))):_&&Wn(p,_)?(l(_,p,n,r,s,d,i,o,a),d.resolve(!0)):(l(null,p,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0&&d.resolve()));else if(_&&Wn(p,_))l(_,p,n,r,s,d,i,o,a),Ao(d,p);else if(Pl(e,"onPending"),d.pendingBranch=p,p.shapeFlag&512?d.pendingId=p.component.suspenseId:d.pendingId=wp++,l(null,p,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0)d.resolve();else{const{timeout:k,pendingId:b}=d;k>0?setTimeout(()=>{d.pendingId===b&&d.fallback(m)},k):k===0&&d.fallback(m)}}function gA(t,e,n,r,s,i,o,a,l,u,h=!1){const{p:d,m:p,um:m,n:_,o:{parentNode:w,remove:P}}=u;let D;const k=hk(t);k&&e&&e.pendingBranch&&(D=e.pendingId,e.deps++);const b=t.props?Bu(t.props.timeout):void 0,C=i,L={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:s,deps:0,pendingId:wp++,timeout:typeof b=="number"?b:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(x=!1,A=!1){const{vnode:v,activeBranch:y,pendingBranch:T,pendingId:N,effects:R,parentComponent:I,container:fe}=L;let Ee=!1;L.isHydrating?L.isHydrating=!1:x||(Ee=y&&T.transition&&T.transition.mode==="out-in",Ee&&(y.transition.afterLeave=()=>{N===L.pendingId&&(p(T,fe,i===C?_(y):i,0),ju(R))}),y&&(w(y.el)!==L.hiddenContainer&&(i=_(y)),m(y,I,L,!0)),Ee||p(T,fe,i,0)),Ao(L,T),L.pendingBranch=null,L.isInFallback=!1;let Y=L.parent,re=!1;for(;Y;){if(Y.pendingBranch){Y.effects.push(...R),re=!0;break}Y=Y.parent}!re&&!Ee&&ju(R),L.effects=[],k&&e&&e.pendingBranch&&D===e.pendingId&&(e.deps--,e.deps===0&&!A&&e.resolve()),Pl(v,"onResolve")},fallback(x){if(!L.pendingBranch)return;const{vnode:A,activeBranch:v,parentComponent:y,container:T,namespace:N}=L;Pl(A,"onFallback");const R=_(v),I=()=>{L.isInFallback&&(d(null,x,T,R,y,null,N,a,l),Ao(L,x))},fe=x.transition&&x.transition.mode==="out-in";fe&&(v.transition.afterLeave=I),L.isInFallback=!0,m(v,y,null,!0),fe||I()},move(x,A,v){L.activeBranch&&p(L.activeBranch,x,A,v),L.container=x},next(){return L.activeBranch&&_(L.activeBranch)},registerDep(x,A,v){const y=!!L.pendingBranch;y&&L.deps++;const T=x.vnode.el;x.asyncDep.catch(N=>{Di(N,x,0)}).then(N=>{if(x.isUnmounted||L.isUnmounted||L.pendingId!==x.suspenseId)return;x.asyncResolved=!0;const{vnode:R}=x;Sp(x,N,!1),T&&(R.el=T);const I=!T&&x.subTree.el;A(x,R,w(T||x.subTree.el),T?null:_(x.subTree),L,o,v),I&&P(I),sm(x,R.el),y&&--L.deps===0&&L.resolve()})},unmount(x,A){L.isUnmounted=!0,L.activeBranch&&m(L.activeBranch,n,x,A),L.pendingBranch&&m(L.pendingBranch,n,x,A)}};return L}function ck(t,e,n,r,s,i,o,a,l){const u=e.suspense=gA(e,r,n,t.parentNode,document.createElement("div"),null,s,i,o,a,!0),h=l(t,u.pendingBranch=e.ssContent,n,u,i,o);return u.deps===0&&u.resolve(!1,!0),h}function uk(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=gv(r?n.default:n),t.ssFallback=r?gv(n.fallback):Ke(ft)}function gv(t){let e;if(me(t)){const n=vi&&t._c;n&&(t._d=!1,Nt()),t=t(),n&&(t._d=!0,e=Kt,_A())}return le(t)&&(t=tk(t)),t=dn(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function mA(t,e){e&&e.pendingBranch?le(t)?e.effects.push(...t):e.effects.push(t):ju(t)}function Ao(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,r&&r.subTree===n&&(r.vnode.el=s,sm(r,s))}function hk(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const _t=Symbol.for("v-fgt"),Is=Symbol.for("v-txt"),ft=Symbol.for("v-cmt"),gi=Symbol.for("v-stc"),ol=[];let Kt=null;function Nt(t=!1){ol.push(Kt=t?null:[])}function _A(){ol.pop(),Kt=ol[ol.length-1]||null}let vi=1;function Ap(t){vi+=t,t<0&&Kt&&(Kt.hasOnce=!0)}function yA(t){return t.dynamicChildren=vi>0?Kt||vo:null,_A(),vi>0&&Kt&&Kt.push(t),t}function Ln(t,e,n,r,s,i){return yA(lt(t,e,n,r,s,i,!0))}function Nl(t,e,n,r,s){return yA(Ke(t,e,n,r,s,!0))}function Ls(t){return t?t.__v_isVNode===!0:!1}function Wn(t,e){return t.type===e.type&&t.key===e.key}function dk(t){}const vA=({key:t})=>t??null,Iu=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Qe(t)||tt(t)||me(t)?{i:vt,r:t,k:e,f:!!n}:t:null);function lt(t,e=null,n=null,r=0,s=null,i=t===_t?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&vA(e),ref:e&&Iu(e),scopeId:Jh,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:vt};return a?(im(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Qe(n)?8:16),vi>0&&!o&&Kt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Kt.push(l),l}const Ke=fk;function fk(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Bw)&&(t=ft),Ls(t)){const a=vr(t,e,!0);return n&&im(a,n),vi>0&&!i&&Kt&&(a.shapeFlag&6?Kt[Kt.indexOf(t)]=a:Kt.push(a)),a.patchFlag=-2,a}if(bk(t)&&(t=t.__vccOpts),e){e=EA(e);let{class:a,style:l}=e;a&&!Qe(a)&&(e.class=Fr(a)),je(l)&&(zh(l)&&!le(l)&&(l=Ye({},l)),e.style=Xl(l))}const o=Qe(t)?1:Yu(t)?128:Sw(t)?64:je(t)?4:me(t)?2:0;return lt(t,e,n,r,s,o,i,!0)}function EA(t){return t?zh(t)||Qw(t)?Ye({},t):t:null}function vr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?TA(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&vA(u),ref:e&&e.ref?n&&i?le(i)?i.concat(Iu(e)):[i,Iu(e)]:Iu(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==_t?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&vr(t.ssContent),ssFallback:t.ssFallback&&vr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Ds(h,l.clone(h)),h}function id(t=" ",e=0){return Ke(Is,null,t,e)}function pk(t,e){const n=Ke(gi,null,t);return n.staticCount=e,n}function gk(t="",e=!1){return e?(Nt(),Nl(ft,null,t)):Ke(ft,null,t)}function dn(t){return t==null||typeof t=="boolean"?Ke(ft):le(t)?Ke(_t,null,t.slice()):typeof t=="object"?ps(t):Ke(Is,null,String(t))}function ps(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:vr(t)}function im(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(le(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),im(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Qw(e)?e._ctx=vt:s===3&&vt&&(vt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else me(e)?(e={default:e,_ctx:vt},n=32):(e=String(e),r&64?(n=16,e=[id(e)]):n=8);t.children=e,t.shapeFlag|=n}function TA(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Fr([e.class,r.class]));else if(s==="style")e.style=Xl([e.style,r.style]);else if(Yl(s)){const i=e[s],o=r[s];o&&i!==o&&!(le(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function hn(t,e,n,r=null){Vn(t,e,7,[n,r])}const mk=Kw();let _k=0;function bA(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||mk,i={uid:_k++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new xg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Jw(r,s),emitsOptions:pA(r,s),emit:null,emitted:null,propsDefaults:Ae,inheritAttrs:r.inheritAttrs,ctx:Ae,data:Ae,props:Ae,attrs:Ae,slots:Ae,refs:Ae,setupState:Ae,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=ek.bind(null,i),t.ce&&t.ce(i),i}let yt=null;const un=()=>yt||vt;let Qu,Ip;{const t=Xb(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Qu=e("__VUE_INSTANCE_SETTERS__",n=>yt=n),Ip=e("__VUE_SSR_SETTERS__",n=>tc=n)}const Ei=t=>{const e=yt;return Qu(t),t.scope.on(),()=>{t.scope.off(),Qu(e)}},Cp=()=>{yt&&yt.scope.off(),Qu(null)};function wA(t){return t.vnode.shapeFlag&4}let tc=!1;function AA(t,e=!1,n=!1){e&&Ip(e);const{props:r,children:s}=t.vnode,i=wA(t);jO(t,r,i,e),zO(t,s,n);const o=i?yk(t,e):void 0;return e&&Ip(!1),o}function yk(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,vp);const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?CA(t):null,i=Ei(t);Ws();const o=sa(r,t,0,[t.props,s]);if(js(),i(),Lg(o)){if(As(t)||Yg(t),o.then(Cp,Cp),e)return o.then(a=>{Sp(t,a,e)}).catch(a=>{Di(a,t,0)});t.asyncDep=o}else Sp(t,o,e)}else IA(t,e)}function Sp(t,e,n){me(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:je(e)&&(t.setupState=qg(e)),IA(t,n)}let Xu,Rp;function vk(t){Xu=t,Rp=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,wO))}}const Ek=()=>!Xu;function IA(t,e,n){const r=t.type;if(!t.render){if(!e&&Xu&&!r.render){const s=r.template||tm(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,u=Ye(Ye({isCustomElement:i,delimiters:a},o),l);r.render=Xu(s,u)}}t.render=r.render||Kn,Rp&&Rp(t)}{const s=Ei(t);Ws();try{VO(t)}finally{js(),s()}}}const Tk={get(t,e){return Xt(t,"get",""),t[e]}};function CA(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Tk),slots:t.slots,emit:t.emit,expose:e}}function nc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(qg(Yh(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in sl)return sl[n](t)},has(e,n){return n in e||n in sl}})):t.proxy}function Pp(t,e=!0){return me(t)?t.displayName||t.name:t.name||e&&t.__name}function bk(t){return me(t)&&"__vccOpts"in t}const En=(t,e)=>BN(t,e,tc);function wk(t){const e=un(),n=Qh(null);if(e){const r=e.refs===Ae?e.refs={}:e.refs;Object.defineProperty(r,t,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function od(t,e,n){const r=arguments.length;return r===2?je(e)&&!le(e)?Ls(e)?Ke(t,null,[e]):Ke(t,e):Ke(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ls(n)&&(n=[n]),Ke(t,e,n))}function Ak(){}function Ik(t,e,n,r){const s=n[r];if(s&&SA(s,t))return s;const i=e();return i.memo=t.slice(),i.cacheIndex=r,n[r]=i}function SA(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(on(n[r],e[r]))return!1;return vi>0&&Kt&&Kt.push(t),!0}const RA="3.5.1",Ck=Kn,Sk=zN,Rk=so,Pk=Aw,Nk={createComponentInstance:bA,setupComponent:AA,renderComponentRoot:Au,setCurrentRenderingInstance:Sl,isVNode:Ls,normalizeVNode:dn,getComponentPublicInstance:nc,ensureValidVNode:em},Ok=Nk,kk=null,Dk=null,Lk=null;/**
* @vue/runtime-dom v3.5.1
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Np;const mv=typeof window<"u"&&window.trustedTypes;if(mv)try{Np=mv.createPolicy("vue",{createHTML:t=>t})}catch{}const PA=Np?t=>Np.createHTML(t):t=>t,Mk="http://www.w3.org/2000/svg",xk="http://www.w3.org/1998/Math/MathML",Nr=typeof document<"u"?document:null,_v=Nr&&Nr.createElement("template"),Vk={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Nr.createElementNS(Mk,t):e==="mathml"?Nr.createElementNS(xk,t):n?Nr.createElement(t,{is:n}):Nr.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Nr.createTextNode(t),createComment:t=>Nr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Nr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{_v.innerHTML=PA(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=_v.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},is="transition",La="animation",Do=Symbol("_vtc"),NA={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},OA=Ye({},zg,NA),Fk=t=>(t.displayName="Transition",t.props=OA,t),Uk=Fk((t,{slots:e})=>od(Ow,kA(t),e)),ii=(t,e=[])=>{le(t)?t.forEach(n=>n(...e)):t&&t(...e)},yv=t=>t?le(t)?t.some(e=>e.length>1):t.length>1:!1;function kA(t){const e={};for(const R in t)R in NA||(e[R]=t[R]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,_=$k(s),w=_&&_[0],P=_&&_[1],{onBeforeEnter:D,onEnter:k,onEnterCancelled:b,onLeave:C,onLeaveCancelled:L,onBeforeAppear:x=D,onAppear:A=k,onAppearCancelled:v=b}=e,y=(R,I,fe)=>{cs(R,I?h:a),cs(R,I?u:o),fe&&fe()},T=(R,I)=>{R._isLeaving=!1,cs(R,d),cs(R,m),cs(R,p),I&&I()},N=R=>(I,fe)=>{const Ee=R?A:k,Y=()=>y(I,R,fe);ii(Ee,[I,Y]),vv(()=>{cs(I,R?l:i),Pr(I,R?h:a),yv(Ee)||Ev(I,r,w,Y)})};return Ye(e,{onBeforeEnter(R){ii(D,[R]),Pr(R,i),Pr(R,o)},onBeforeAppear(R){ii(x,[R]),Pr(R,l),Pr(R,u)},onEnter:N(!1),onAppear:N(!0),onLeave(R,I){R._isLeaving=!0;const fe=()=>T(R,I);Pr(R,d),Pr(R,p),LA(),vv(()=>{R._isLeaving&&(cs(R,d),Pr(R,m),yv(C)||Ev(R,r,P,fe))}),ii(C,[R,fe])},onEnterCancelled(R){y(R,!1),ii(b,[R])},onAppearCancelled(R){y(R,!0),ii(v,[R])},onLeaveCancelled(R){T(R),ii(L,[R])}})}function $k(t){if(t==null)return null;if(je(t))return[Af(t.enter),Af(t.leave)];{const e=Af(t);return[e,e]}}function Af(t){return Bu(t)}function Pr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Do]||(t[Do]=new Set)).add(e)}function cs(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Do];n&&(n.delete(e),n.size||(t[Do]=void 0))}function vv(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Bk=0;function Ev(t,e,n,r){const s=t._endId=++Bk,i=()=>{s===t._endId&&r()};if(n)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=DA(t,e);if(!o)return r();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,p),i()},p=m=>{m.target===t&&++h>=l&&d()};setTimeout(()=>{h<l&&d()},a+1),t.addEventListener(u,p)}function DA(t,e){const n=window.getComputedStyle(t),r=_=>(n[_]||"").split(", "),s=r(`${is}Delay`),i=r(`${is}Duration`),o=Tv(s,i),a=r(`${La}Delay`),l=r(`${La}Duration`),u=Tv(a,l);let h=null,d=0,p=0;e===is?o>0&&(h=is,d=o,p=i.length):e===La?u>0&&(h=La,d=u,p=l.length):(d=Math.max(o,u),h=d>0?o>u?is:La:null,p=h?h===is?i.length:l.length:0);const m=h===is&&/\b(transform|all)(,|$)/.test(r(`${is}Property`).toString());return{type:h,timeout:d,propCount:p,hasTransform:m}}function Tv(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>bv(n)+bv(t[r])))}function bv(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function LA(){return document.body.offsetHeight}function Hk(t,e,n){const r=t[Do];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ju=Symbol("_vod"),MA=Symbol("_vsh"),xA={beforeMount(t,{value:e},{transition:n}){t[Ju]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Ma(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Ma(t,!0),r.enter(t)):r.leave(t,()=>{Ma(t,!1)}):Ma(t,e))},beforeUnmount(t,{value:e}){Ma(t,e)}};function Ma(t,e){t.style.display=e?t[Ju]:"none",t[MA]=!e}function Wk(){xA.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const VA=Symbol("");function jk(t){const e=un();if(!e)return;const n=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(i=>Zu(i,s))},r=()=>{const s=t(e.proxy);e.ce?Zu(e.ce,s):Op(e.subTree,s),n(s)};Qg(()=>{uA(r)}),Li(()=>{const s=new MutationObserver(r);s.observe(e.subTree.el.parentNode,{childList:!0}),rd(()=>s.disconnect())})}function Op(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Op(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Zu(t.el,e);else if(t.type===_t)t.children.forEach(n=>Op(n,e));else if(t.type===gi){let{el:n,anchor:r}=t;for(;n&&(Zu(n,e),n!==r);)n=n.nextSibling}}function Zu(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const s in e)n.setProperty(`--${s}`,e[s]),r+=`--${s}: ${e[s]};`;n[VA]=r}}const qk=/(^|;)\s*display\s*:/;function Kk(t,e,n){const r=t.style,s=Qe(n);let i=!1;if(n&&!s){if(e)if(Qe(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Cu(r,a,"")}else for(const o in e)n[o]==null&&Cu(r,o,"");for(const o in n)o==="display"&&(i=!0),Cu(r,o,n[o])}else if(s){if(e!==n){const o=r[VA];o&&(n+=";"+o),r.cssText=n,i=qk.test(n)}}else e&&t.removeAttribute("style");Ju in t&&(t[Ju]=i?r.display:"",t[MA]&&(r.display="none"))}const wv=/\s*!important$/;function Cu(t,e,n){if(le(n))n.forEach(r=>Cu(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Gk(t,e);wv.test(n)?t.setProperty(pn(r),n.replace(wv,""),"important"):t[r]=n}}const Av=["Webkit","Moz","ms"],If={};function Gk(t,e){const n=If[e];if(n)return n;let r=zt(e);if(r!=="filter"&&r in t)return If[e]=r;r=Ql(r);for(let s=0;s<Av.length;s++){const i=Av[s]+r;if(i in t)return If[e]=i}return e}const Iv="http://www.w3.org/1999/xlink";function Cv(t,e,n,r,s,i=aN(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Iv,e.slice(6,e.length)):t.setAttributeNS(Iv,e,n):n==null||i&&!Jb(n)?t.removeAttribute(e):t.setAttribute(e,i?"":yr(n)?String(n):n)}function zk(t,e,n,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?PA(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?t.type==="checkbox"?"on":"":String(n);(o!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let i=!1;if(n===""||n==null){const o=typeof t[e];o==="boolean"?n=Jb(n):n==null&&o==="string"?(n="",i=!0):o==="number"&&(n=0,i=!0)}try{t[e]=n}catch{}i&&t.removeAttribute(e)}function kr(t,e,n,r){t.addEventListener(e,n,r)}function Yk(t,e,n,r){t.removeEventListener(e,n,r)}const Sv=Symbol("_vei");function Qk(t,e,n,r,s=null){const i=t[Sv]||(t[Sv]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=Xk(e);if(r){const u=i[e]=eD(r,s);kr(t,a,u,l)}else o&&(Yk(t,a,o,l),i[e]=void 0)}}const Rv=/(?:Once|Passive|Capture)$/;function Xk(t){let e;if(Rv.test(t)){e={};let r;for(;r=t.match(Rv);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):pn(t.slice(2)),e]}let Cf=0;const Jk=Promise.resolve(),Zk=()=>Cf||(Jk.then(()=>Cf=0),Cf=Date.now());function eD(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Vn(tD(r,n.value),e,5,[r])};return n.value=t,n.attached=Zk(),n}function tD(t,e){if(le(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Pv=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,nD=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?Hk(t,r,o):e==="style"?Kk(t,n,r):Yl(e)?kg(e)||Qk(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):rD(t,e,r,o))?(zk(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Cv(t,e,r,o,i,e!=="value")):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Cv(t,e,r,o))};function rD(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Pv(e)&&me(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Pv(e)&&Qe(n)?!1:!!(e in t||t._isVueCE&&(/[A-Z]/.test(e)||!Qe(n)))}const Nv={};/*! #__NO_SIDE_EFFECTS__ */function FA(t,e,n){const r=qs(t,e);Fh(r)&&Ye(r,e);class s extends ad{constructor(o){super(r,o,n)}}return s.def=r,s}/*! #__NO_SIDE_EFFECTS__ */const sD=(t,e)=>FA(t,e,QA),iD=typeof HTMLElement<"u"?HTMLElement:class{};class ad extends iD{constructor(e,n={},r=nh){super(),this._def=e,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==nh?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof ad){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,ia(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance.ce=void 0,this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const s of r)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:i,styles:o}=r;let a;if(i&&!le(i))for(const l in i){const u=i[l];(u===Number||u&&u.type===Number)&&(l in this._props&&(this._props[l]=Bu(this._props[l])),(a||(a=Object.create(null)))[zt(l)]=!0)}this._numberProps=a,s&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)Ve(this,r)||Object.defineProperty(this,r,{get:()=>Ht(n[r])})}_resolveProps(e){const{props:n}=e,r=le(n)?n:Object.keys(n||{});for(const s of Object.keys(this))s[0]!=="_"&&r.includes(s)&&this._setProp(s,this[s]);for(const s of r.map(zt))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(i){this._setProp(s,i,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const n=this.hasAttribute(e);let r=n?this.getAttribute(e):Nv;const s=zt(e);n&&this._numberProps&&this._numberProps[s]&&(r=Bu(r)),this._setProp(s,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,s=!1){n!==this._props[e]&&(n===Nv?delete this._props[e]:(this._props[e]=n,e==="key"&&this._app&&(this._app._ceVNode.key=n)),s&&this._instance&&this._update(),r&&(n===!0?this.setAttribute(pn(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(pn(e),n+""):n||this.removeAttribute(pn(e))))}_update(){YA(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const n=Ke(this._def,Ye(e,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const s=(i,o)=>{this.dispatchEvent(new CustomEvent(i,Fh(o[0])?Ye({detail:o},o[0]):{detail:o}))};r.emit=(i,...o)=>{s(i,o),pn(i)!==i&&s(pn(i),o)},this._setParent()}),n}_applyStyles(e,n){if(!e)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let s=e.length-1;s>=0;s--){const i=document.createElement("style");r&&i.setAttribute("nonce",r),i.textContent=e[s],this.shadowRoot.prepend(i)}}_parseSlots(){const e=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const e=this.querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const s=e[r],i=s.getAttribute("name")||"default",o=this._slots[i],a=s.parentNode;if(o)for(const l of o){if(n&&l.nodeType===1){const u=n+"-s",h=document.createTreeWalker(l,1);l.setAttribute(u,"");let d;for(;d=h.nextNode();)d.setAttribute(u,"")}a.insertBefore(l,s)}else for(;s.firstChild;)a.insertBefore(s.firstChild,s);a.removeChild(s)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function UA(t){const e=un(),n=e&&e.ce;return n||null}function oD(){const t=UA();return t&&t.shadowRoot}function aD(t="$style"){{const e=un();if(!e)return Ae;const n=e.type.__cssModules;if(!n)return Ae;const r=n[t];return r||Ae}}const $A=new WeakMap,BA=new WeakMap,eh=Symbol("_moveCb"),Ov=Symbol("_enterCb"),lD=t=>(delete t.props.mode,t),cD=lD({name:"TransitionGroup",props:Ye({},OA,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=un(),r=Gg();let s,i;return nd(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!pD(s[0].el,n.vnode.el,o))return;s.forEach(hD),s.forEach(dD);const a=s.filter(fD);LA(),a.forEach(l=>{const u=l.el,h=u.style;Pr(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const d=u[eh]=p=>{p&&p.target!==u||(!p||/transform$/.test(p.propertyName))&&(u.removeEventListener("transitionend",d),u[eh]=null,cs(u,o))};u.addEventListener("transitionend",d)})}),()=>{const o=Oe(t),a=kA(o);let l=o.tag||_t;if(s=[],i)for(let u=0;u<i.length;u++){const h=i[u];h.el&&h.el instanceof Element&&(s.push(h),Ds(h,ko(h,a,r,n)),$A.set(h,h.el.getBoundingClientRect()))}i=e.default?ed(e.default()):[];for(let u=0;u<i.length;u++){const h=i[u];h.key!=null&&Ds(h,ko(h,a,r,n))}return Ke(l,null,i)}}}),uD=cD;function hD(t){const e=t.el;e[eh]&&e[eh](),e[Ov]&&e[Ov]()}function dD(t){BA.set(t,t.el.getBoundingClientRect())}function fD(t){const e=$A.get(t),n=BA.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function pD(t,e,n){const r=t.cloneNode(),s=t[Do];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=DA(r);return i.removeChild(r),o}const Ms=t=>{const e=t.props["onUpdate:modelValue"]||!1;return le(e)?n=>bo(e,n):e};function gD(t){t.target.composing=!0}function kv(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Mn=Symbol("_assign"),th={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Mn]=Ms(s);const i=r||s.props&&s.props.type==="number";kr(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=$u(a)),t[Mn](a)}),n&&kr(t,"change",()=>{t.value=t.value.trim()}),e||(kr(t,"compositionstart",gD),kr(t,"compositionend",kv),kr(t,"change",kv))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[Mn]=Ms(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?$u(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},ld={deep:!0,created(t,e,n){t[Mn]=Ms(n),kr(t,"change",()=>{const r=t._modelValue,s=Lo(t),i=t.checked,o=t[Mn];if(le(r)){const a=$h(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const u=[...r];u.splice(a,1),o(u)}}else if(ki(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(WA(t,i))})},mounted:Dv,beforeUpdate(t,e,n){t[Mn]=Ms(n),Dv(t,e,n)}};function Dv(t,{value:e,oldValue:n},r){t._modelValue=e;let s;le(e)?s=$h(e,r.props.value)>-1:ki(e)?s=e.has(r.props.value):s=Os(e,WA(t,!0)),t.checked!==s&&(t.checked=s)}const om={created(t,{value:e},n){t.checked=Os(e,n.props.value),t[Mn]=Ms(n),kr(t,"change",()=>{t[Mn](Lo(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Mn]=Ms(r),e!==n&&(t.checked=Os(e,r.props.value))}},HA={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=ki(e);kr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?$u(Lo(o)):Lo(o));t[Mn](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,ia(()=>{t._assigning=!1})}),t[Mn]=Ms(r)},mounted(t,{value:e,modifiers:{number:n}}){Lv(t,e)},beforeUpdate(t,e,n){t[Mn]=Ms(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||Lv(t,e)}};function Lv(t,e,n){const r=t.multiple,s=le(e);if(!(r&&!s&&!ki(e))){for(let i=0,o=t.options.length;i<o;i++){const a=t.options[i],l=Lo(a);if(r)if(s){const u=typeof l;u==="string"||u==="number"?a.selected=e.some(h=>String(h)===String(l)):a.selected=$h(e,l)>-1}else a.selected=e.has(l);else if(Os(Lo(a),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Lo(t){return"_value"in t?t._value:t.value}function WA(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const jA={created(t,e,n){tu(t,e,n,null,"created")},mounted(t,e,n){tu(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){tu(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){tu(t,e,n,r,"updated")}};function qA(t,e){switch(t){case"SELECT":return HA;case"TEXTAREA":return th;default:switch(e){case"checkbox":return ld;case"radio":return om;default:return th}}}function tu(t,e,n,r,s){const o=qA(t.tagName,n.props&&n.props.type)[s];o&&o(t,e,n,r)}function mD(){th.getSSRProps=({value:t})=>({value:t}),om.getSSRProps=({value:t},e)=>{if(e.props&&Os(e.props.value,t))return{checked:!0}},ld.getSSRProps=({value:t},e)=>{if(le(t)){if(e.props&&$h(t,e.props.value)>-1)return{checked:!0}}else if(ki(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},jA.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=qA(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const _D=["ctrl","shift","alt","meta"],yD={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>_D.some(n=>t[`${n}Key`]&&!e.includes(n))},vD=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=yD[e[o]];if(a&&a(s,e))return}return t(s,...i)})},ED={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},TD=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const i=pn(s.key);if(e.some(o=>o===i||ED[o]===i))return t(s)})},KA=Ye({patchProp:nD},Vk);let al,Mv=!1;function GA(){return al||(al=rA(KA))}function zA(){return al=Mv?al:sA(KA),Mv=!0,al}const YA=(...t)=>{GA().render(...t)},bD=(...t)=>{zA().hydrate(...t)},nh=(...t)=>{const e=GA().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=JA(r);if(!s)return;const i=e._component;!me(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,XA(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e},QA=(...t)=>{const e=zA().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=JA(r);if(s)return n(s,!0,XA(s))},e};function XA(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function JA(t){return Qe(t)?document.querySelector(t):t}let xv=!1;const wD=()=>{xv||(xv=!0,mD(),Wk())};/**
* vue v3.5.1
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const AD=()=>{},ID=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:Ow,BaseTransitionPropsValidators:zg,Comment:ft,DeprecationTypes:Lk,EffectScope:xg,ErrorCodes:GN,ErrorTypeStrings:Sk,Fragment:_t,KeepAlive:_O,ReactiveEffect:bl,Static:gi,Suspense:ok,Teleport:rO,Text:Is,TrackOpTypes:HN,Transition:Uk,TransitionGroup:uD,TriggerOpTypes:WN,VueElement:ad,assertNumber:KN,callWithAsyncErrorHandling:Vn,callWithErrorHandling:sa,camelize:zt,capitalize:Ql,cloneVNode:vr,compatUtils:Dk,compile:AD,computed:En,createApp:nh,createBlock:Nl,createCommentVNode:gk,createElementBlock:Ln,createElementVNode:lt,createHydrationRenderer:sA,createPropsRestProxy:MO,createRenderer:rA,createSSRApp:QA,createSlots:TO,createStaticVNode:pk,createTextVNode:id,createVNode:Ke,customRef:_w,defineAsyncComponent:gO,defineComponent:qs,defineCustomElement:FA,defineEmits:IO,defineExpose:CO,defineModel:PO,defineOptions:SO,defineProps:AO,defineSSRCustomElement:sD,defineSlots:RO,devtools:Rk,effect:uN,effectScope:Bh,getCurrentInstance:un,getCurrentScope:Hh,getCurrentWatcher:jN,getTransitionRawChildren:ed,guardReactiveProps:EA,h:od,handleError:Di,hasInjectionContext:Gw,hydrate:bD,hydrateOnIdle:uO,hydrateOnInteraction:fO,hydrateOnMediaQuery:dO,hydrateOnVisible:hO,initCustomFormatter:Ak,initDirectivesForSSR:wD,inject:Qt,isMemoSame:SA,isProxy:zh,isReactive:ur,isReadonly:ks,isRef:tt,isRuntimeOnly:Ek,isShallow:Dn,isVNode:Ls,markRaw:Yh,mergeDefaults:DO,mergeModels:LO,mergeProps:TA,nextTick:ia,normalizeClass:Fr,normalizeProps:iN,normalizeStyle:Xl,onActivated:Dw,onBeforeMount:Qg,onBeforeUnmount:Zl,onBeforeUpdate:xw,onDeactivated:Lw,onErrorCaptured:Uw,onMounted:Li,onRenderTracked:Fw,onRenderTriggered:Vw,onScopeDispose:Vg,onServerPrefetch:Xg,onUnmounted:rd,onUpdated:nd,onWatcherCleanup:Ew,openBlock:Nt,popScopeId:JN,provide:il,proxyRefs:qg,pushScopeId:XN,queuePostFlushCb:ju,reactive:ra,readonly:Wg,ref:Yt,registerRuntimeCompiler:vk,render:YA,renderList:Ww,renderSlot:Ks,resolveComponent:$w,resolveDirective:EO,resolveDynamicComponent:Hw,resolveFilter:kk,resolveTransitionHooks:ko,setBlockTracking:Ap,setDevtoolsHook:Pk,setTransitionHooks:Ds,shallowReactive:Hg,shallowReadonly:kN,shallowRef:Qh,ssrContextKey:lA,ssrUtils:Ok,stop:hN,toDisplayString:ew,toHandlerKey:tl,toHandlers:bO,toRaw:Oe,toRef:UN,toRefs:yw,toValue:nr,transformVNodeArgs:dk,triggerRef:LN,unref:Ht,useAttrs:kO,useCssModule:aD,useCssVars:jk,useHost:UA,useId:iO,useModel:ZO,useSSRContext:cA,useShadowRoot:oD,useSlots:OO,useTemplateRef:wk,useTransitionState:Gg,vModelCheckbox:ld,vModelDynamic:jA,vModelRadio:om,vModelSelect:HA,vModelText:th,vShow:xA,version:RA,warn:Ck,watch:$r,watchEffect:XO,watchPostEffect:uA,watchSyncEffect:hA,withAsyncContext:xO,withCtx:Zh,withDefaults:NO,withDirectives:Iw,withKeys:TD,withMemo:Ik,withModifiers:vD,withScopeId:ZN},Symbol.toStringTag,{value:"Module"}));var CD=!1;/*!
 * pinia v2.2.2
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let ZA;const cd=t=>ZA=t,eI=Symbol();function kp(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var ll;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(ll||(ll={}));function SD(){const t=Bh(!0),e=t.run(()=>Yt({}));let n=[],r=[];const s=Yh({install(i){cd(s),s._a=i,i.provide(eI,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!CD?r.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const tI=()=>{};function Vv(t,e,n,r=tI){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&Hh()&&Vg(s),s}function Zi(t,...e){t.slice().forEach(n=>{n(...e)})}const RD=t=>t(),Fv=Symbol(),Sf=Symbol();function Dp(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];kp(s)&&kp(r)&&t.hasOwnProperty(n)&&!tt(r)&&!ur(r)?t[n]=Dp(s,r):t[n]=r}return t}const PD=Symbol();function ND(t){return!kp(t)||!t.hasOwnProperty(PD)}const{assign:us}=Object;function OD(t){return!!(tt(t)&&t.effect)}function kD(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function u(){a||(n.state.value[t]=s?s():{});const h=yw(n.state.value[t]);return us(h,i,Object.keys(o||{}).reduce((d,p)=>(d[p]=Yh(En(()=>{cd(n);const m=n._s.get(t);return o[p].call(m,m)})),d),{}))}return l=nI(t,u,e,n,r,!0),l}function nI(t,e,n={},r,s,i){let o;const a=us({actions:{}},n),l={deep:!0};let u,h,d=[],p=[],m;const _=r.state.value[t];!i&&!_&&(r.state.value[t]={}),Yt({});let w;function P(v){let y;u=h=!1,typeof v=="function"?(v(r.state.value[t]),y={type:ll.patchFunction,storeId:t,events:m}):(Dp(r.state.value[t],v),y={type:ll.patchObject,payload:v,storeId:t,events:m});const T=w=Symbol();ia().then(()=>{w===T&&(u=!0)}),h=!0,Zi(d,y,r.state.value[t])}const D=i?function(){const{state:y}=n,T=y?y():{};this.$patch(N=>{us(N,T)})}:tI;function k(){o.stop(),d=[],p=[],r._s.delete(t)}const b=(v,y="")=>{if(Fv in v)return v[Sf]=y,v;const T=function(){cd(r);const N=Array.from(arguments),R=[],I=[];function fe(re){R.push(re)}function Ee(re){I.push(re)}Zi(p,{args:N,name:T[Sf],store:L,after:fe,onError:Ee});let Y;try{Y=v.apply(this&&this.$id===t?this:L,N)}catch(re){throw Zi(I,re),re}return Y instanceof Promise?Y.then(re=>(Zi(R,re),re)).catch(re=>(Zi(I,re),Promise.reject(re))):(Zi(R,Y),Y)};return T[Fv]=!0,T[Sf]=y,T},C={_p:r,$id:t,$onAction:Vv.bind(null,p),$patch:P,$reset:D,$subscribe(v,y={}){const T=Vv(d,v,y.detached,()=>N()),N=o.run(()=>$r(()=>r.state.value[t],R=>{(y.flush==="sync"?h:u)&&v({storeId:t,type:ll.direct,events:m},R)},us({},l,y)));return T},$dispose:k},L=ra(C);r._s.set(t,L);const A=(r._a&&r._a.runWithContext||RD)(()=>r._e.run(()=>(o=Bh()).run(()=>e({action:b}))));for(const v in A){const y=A[v];if(tt(y)&&!OD(y)||ur(y))i||(_&&ND(y)&&(tt(y)?y.value=_[v]:Dp(y,_[v])),r.state.value[t][v]=y);else if(typeof y=="function"){const T=b(y,v);A[v]=T,a.actions[v]=y}}return us(L,A),us(Oe(L),A),Object.defineProperty(L,"$state",{get:()=>r.state.value[t],set:v=>{P(y=>{us(y,v)})}}),r._p.forEach(v=>{us(L,o.run(()=>v({store:L,app:r._a,pinia:r,options:a})))}),_&&i&&n.hydrate&&n.hydrate(L.$state,_),u=!0,h=!0,L}function rI(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,l){const u=Gw();return a=a||(u?Qt(eI,null):null),a&&cd(a),a=ZA,a._s.has(r)||(i?nI(r,e,s,a):kD(r,s,a)),a._s.get(r)}return o.$id=r,o}var XG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function JG(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function DD(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var rc={};const LD=DD(ID);Object.defineProperty(rc,"__esModule",{value:!0});var sr=LD;const sI={instance:null},iI=Symbol("Vue3Progress"),oI=()=>sI.instance||sr.inject(iI);function aI(t){const e={interval:null},n=sr.ref(0),r=()=>{e.interval&&(clearInterval(e.interval),e.interval=null)},s=()=>{n.value=Math.min(n.value+MD(n.value),100)},i=()=>{r(),t.active?(n.value=0,e.interval=setInterval(()=>s(),300)):(n.value=100,e.interval=setInterval(()=>n.value=0,500))};return sr.watch(()=>t.active,()=>{i()}),sr.onBeforeUnmount(()=>r()),t.active&&i(),{value:n}}function MD(t){return t<20?10:t<50?4:t<80?2:t<99?.5:0}var ud=sr.defineComponent({name:"Vue3ProgressBar",setup:()=>{const t=oI().state(),{value:e}=aI(t);return{state:t,value:e}},computed:{style(){return{transform:`translate3d(${this.value-100}%,0,0)`}}}});const xD=["active"];function VD(t,e,n,r,s,i){return sr.openBlock(),sr.createElementBlock("div",{class:"vue3-progress-bar-container",active:t.state.active},[sr.createElementVNode("div",{class:"vue3-progress-bar",style:sr.normalizeStyle(t.style)},null,4)],8,xD)}ud.render=VD;ud.__file="src/ProgressBar.vue";const Uv=sr.reactive({active:!1}),FD=()=>{const t={inflight:0},e=()=>{Uv.active=t.inflight>0},n=r=>({finish:()=>{r.used||(r.used=!0,t.inflight--,e())}});return{start(){return t.inflight++,e(),n({used:!1})},attach(r){const s=this.start();return r.then(()=>s.finish(),()=>s.finish()),r},state(){return Uv}}},UD={install:(t,e)=>{const n=FD();t.provide(iI,n),t.config.globalProperties.$progress=n,(!e||!e.disableGlobalInstance)&&(sI.instance=n),t.component("Vue3ProgressBar",ud)}};rc.ProgressBar=ud;var $D=rc.Vue3ProgressPlugin=UD;rc.trickleComposable=aI;var BD=rc.useProgress=oI;/*!
 * perfect-scrollbar v1.5.3
 * Copyright 2021 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function ir(t){return getComputedStyle(t)}function fn(t,e){for(var n in e){var r=e[n];typeof r=="number"&&(r=r+"px"),t.style[n]=r}return t}function nu(t){var e=document.createElement("div");return e.className=t,e}var $v=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function bs(t,e){if(!$v)throw new Error("No element matching method supported");return $v.call(t,e)}function po(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function Bv(t,e){return Array.prototype.filter.call(t.children,function(n){return bs(n,e)})}var dt={main:"ps",rtl:"ps__rtl",element:{thumb:function(t){return"ps__thumb-"+t},rail:function(t){return"ps__rail-"+t},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(t){return"ps--active-"+t},scrolling:function(t){return"ps--scrolling-"+t}}},lI={x:null,y:null};function cI(t,e){var n=t.element.classList,r=dt.state.scrolling(e);n.contains(r)?clearTimeout(lI[e]):n.add(r)}function uI(t,e){lI[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(dt.state.scrolling(e))},t.settings.scrollingThreshold)}function HD(t,e){cI(t,e),uI(t,e)}var sc=function(e){this.element=e,this.handlers={}},hI={isEmpty:{configurable:!0}};sc.prototype.bind=function(e,n){typeof this.handlers[e]>"u"&&(this.handlers[e]=[]),this.handlers[e].push(n),this.element.addEventListener(e,n,!1)};sc.prototype.unbind=function(e,n){var r=this;this.handlers[e]=this.handlers[e].filter(function(s){return n&&s!==n?!0:(r.element.removeEventListener(e,s,!1),!1)})};sc.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)};hI.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every(function(e){return t.handlers[e].length===0})};Object.defineProperties(sc.prototype,hI);var oa=function(){this.eventElements=[]};oa.prototype.eventElement=function(e){var n=this.eventElements.filter(function(r){return r.element===e})[0];return n||(n=new sc(e),this.eventElements.push(n)),n};oa.prototype.bind=function(e,n,r){this.eventElement(e).bind(n,r)};oa.prototype.unbind=function(e,n,r){var s=this.eventElement(e);s.unbind(n,r),s.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(s),1)};oa.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]};oa.prototype.once=function(e,n,r){var s=this.eventElement(e),i=function(o){s.unbind(n,i),r(o)};s.bind(n,i)};function ru(t){if(typeof window.CustomEvent=="function")return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function rh(t,e,n,r,s){r===void 0&&(r=!0),s===void 0&&(s=!1);var i;if(e==="top")i=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(e==="left")i=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");WD(t,n,i,r,s)}function WD(t,e,n,r,s){var i=n[0],o=n[1],a=n[2],l=n[3],u=n[4],h=n[5];r===void 0&&(r=!0),s===void 0&&(s=!1);var d=t.element;t.reach[l]=null,d[a]<1&&(t.reach[l]="start"),d[a]>t[i]-t[o]-1&&(t.reach[l]="end"),e&&(d.dispatchEvent(ru("ps-scroll-"+l)),e<0?d.dispatchEvent(ru("ps-scroll-"+u)):e>0&&d.dispatchEvent(ru("ps-scroll-"+h)),r&&HD(t,l)),t.reach[l]&&(e||s)&&d.dispatchEvent(ru("ps-"+l+"-reach-"+t.reach[l]))}function nt(t){return parseInt(t,10)||0}function jD(t){return bs(t,"input,[contenteditable]")||bs(t,"select,[contenteditable]")||bs(t,"textarea,[contenteditable]")||bs(t,"button,[contenteditable]")}function qD(t){var e=ir(t);return nt(e.width)+nt(e.paddingLeft)+nt(e.paddingRight)+nt(e.borderLeftWidth)+nt(e.borderRightWidth)}var io={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function jr(t){var e=t.element,n=Math.floor(e.scrollTop),r=e.getBoundingClientRect();t.containerWidth=Math.round(r.width),t.containerHeight=Math.round(r.height),t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(Bv(e,dt.element.rail("x")).forEach(function(s){return po(s)}),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(Bv(e,dt.element.rail("y")).forEach(function(s){return po(s)}),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=Hv(t,nt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=nt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=Hv(t,nt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=nt(n*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),KD(e,t),t.scrollbarXActive?e.classList.add(dt.state.active("x")):(e.classList.remove(dt.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=t.isRtl===!0?t.contentWidth:0),t.scrollbarYActive?e.classList.add(dt.state.active("y")):(e.classList.remove(dt.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)}function Hv(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function KD(t,e){var n={width:e.railXWidth},r=Math.floor(t.scrollTop);e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:n.left=t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-r:n.top=e.scrollbarXTop+r,fn(e.scrollbarXRail,n);var s={top:r,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?s.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:s.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?s.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth*2-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:s.left=e.scrollbarYLeft+t.scrollLeft,fn(e.scrollbarYRail,s),fn(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),fn(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}function GD(t){t.element,t.event.bind(t.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarYRail,"mousedown",function(e){var n=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top,r=n>t.scrollbarYTop?1:-1;t.element.scrollTop+=r*t.containerHeight,jr(t),e.stopPropagation()}),t.event.bind(t.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarXRail,"mousedown",function(e){var n=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left,r=n>t.scrollbarXLeft?1:-1;t.element.scrollLeft+=r*t.containerWidth,jr(t),e.stopPropagation()})}function zD(t){Wv(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),Wv(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function Wv(t,e){var n=e[0],r=e[1],s=e[2],i=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=t.element,p=null,m=null,_=null;function w(k){k.touches&&k.touches[0]&&(k[s]=k.touches[0].pageY),d[l]=p+_*(k[s]-m),cI(t,u),jr(t),k.stopPropagation(),k.type.startsWith("touch")&&k.changedTouches.length>1&&k.preventDefault()}function P(){uI(t,u),t[h].classList.remove(dt.state.clicking),t.event.unbind(t.ownerDocument,"mousemove",w)}function D(k,b){p=d[l],b&&k.touches&&(k[s]=k.touches[0].pageY),m=k[s],_=(t[r]-t[n])/(t[i]-t[a]),b?t.event.bind(t.ownerDocument,"touchmove",w):(t.event.bind(t.ownerDocument,"mousemove",w),t.event.once(t.ownerDocument,"mouseup",P),k.preventDefault()),t[h].classList.add(dt.state.clicking),k.stopPropagation()}t.event.bind(t[o],"mousedown",function(k){D(k)}),t.event.bind(t[o],"touchstart",function(k){D(k,!0)})}function YD(t){var e=t.element,n=function(){return bs(e,":hover")},r=function(){return bs(t.scrollbarX,":focus")||bs(t.scrollbarY,":focus")};function s(i,o){var a=Math.floor(e.scrollTop);if(i===0){if(!t.scrollbarYActive)return!1;if(a===0&&o>0||a>=t.contentHeight-t.containerHeight&&o<0)return!t.settings.wheelPropagation}var l=e.scrollLeft;if(o===0){if(!t.scrollbarXActive)return!1;if(l===0&&i<0||l>=t.contentWidth-t.containerWidth&&i>0)return!t.settings.wheelPropagation}return!0}t.event.bind(t.ownerDocument,"keydown",function(i){if(!(i.isDefaultPrevented&&i.isDefaultPrevented()||i.defaultPrevented)&&!(!n()&&!r())){var o=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(o){if(o.tagName==="IFRAME")o=o.contentDocument.activeElement;else for(;o.shadowRoot;)o=o.shadowRoot.activeElement;if(jD(o))return}var a=0,l=0;switch(i.which){case 37:i.metaKey?a=-t.contentWidth:i.altKey?a=-t.containerWidth:a=-30;break;case 38:i.metaKey?l=t.contentHeight:i.altKey?l=t.containerHeight:l=30;break;case 39:i.metaKey?a=t.contentWidth:i.altKey?a=t.containerWidth:a=30;break;case 40:i.metaKey?l=-t.contentHeight:i.altKey?l=-t.containerHeight:l=-30;break;case 32:i.shiftKey?l=t.containerHeight:l=-t.containerHeight;break;case 33:l=t.containerHeight;break;case 34:l=-t.containerHeight;break;case 36:l=t.contentHeight;break;case 35:l=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&a!==0||t.settings.suppressScrollY&&l!==0||(e.scrollTop-=l,e.scrollLeft+=a,jr(t),s(a,l)&&i.preventDefault())}})}function QD(t){var e=t.element;function n(o,a){var l=Math.floor(e.scrollTop),u=e.scrollTop===0,h=l+e.offsetHeight===e.scrollHeight,d=e.scrollLeft===0,p=e.scrollLeft+e.offsetWidth===e.scrollWidth,m;return Math.abs(a)>Math.abs(o)?m=u||h:m=d||p,m?!t.settings.wheelPropagation:!0}function r(o){var a=o.deltaX,l=-1*o.deltaY;return(typeof a>"u"||typeof l>"u")&&(a=-1*o.wheelDeltaX/6,l=o.wheelDeltaY/6),o.deltaMode&&o.deltaMode===1&&(a*=10,l*=10),a!==a&&l!==l&&(a=0,l=o.wheelDelta),o.shiftKey?[-l,-a]:[a,l]}function s(o,a,l){if(!io.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(o))return!1;for(var u=o;u&&u!==e;){if(u.classList.contains(dt.element.consuming))return!0;var h=ir(u);if(l&&h.overflowY.match(/(scroll|auto)/)){var d=u.scrollHeight-u.clientHeight;if(d>0&&(u.scrollTop>0&&l<0||u.scrollTop<d&&l>0))return!0}if(a&&h.overflowX.match(/(scroll|auto)/)){var p=u.scrollWidth-u.clientWidth;if(p>0&&(u.scrollLeft>0&&a<0||u.scrollLeft<p&&a>0))return!0}u=u.parentNode}return!1}function i(o){var a=r(o),l=a[0],u=a[1];if(!s(o.target,l,u)){var h=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(u?e.scrollTop-=u*t.settings.wheelSpeed:e.scrollTop+=l*t.settings.wheelSpeed,h=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(l?e.scrollLeft+=l*t.settings.wheelSpeed:e.scrollLeft-=u*t.settings.wheelSpeed,h=!0):(e.scrollTop-=u*t.settings.wheelSpeed,e.scrollLeft+=l*t.settings.wheelSpeed),jr(t),h=h||n(l,u),h&&!o.ctrlKey&&(o.stopPropagation(),o.preventDefault())}}typeof window.onwheel<"u"?t.event.bind(e,"wheel",i):typeof window.onmousewheel<"u"&&t.event.bind(e,"mousewheel",i)}function XD(t){if(!io.supportsTouch&&!io.supportsIePointer)return;var e=t.element;function n(_,w){var P=Math.floor(e.scrollTop),D=e.scrollLeft,k=Math.abs(_),b=Math.abs(w);if(b>k){if(w<0&&P===t.contentHeight-t.containerHeight||w>0&&P===0)return window.scrollY===0&&w>0&&io.isChrome}else if(k>b&&(_<0&&D===t.contentWidth-t.containerWidth||_>0&&D===0))return!0;return!0}function r(_,w){e.scrollTop-=w,e.scrollLeft-=_,jr(t)}var s={},i=0,o={},a=null;function l(_){return _.targetTouches?_.targetTouches[0]:_}function u(_){return _.pointerType&&_.pointerType==="pen"&&_.buttons===0?!1:!!(_.targetTouches&&_.targetTouches.length===1||_.pointerType&&_.pointerType!=="mouse"&&_.pointerType!==_.MSPOINTER_TYPE_MOUSE)}function h(_){if(u(_)){var w=l(_);s.pageX=w.pageX,s.pageY=w.pageY,i=new Date().getTime(),a!==null&&clearInterval(a)}}function d(_,w,P){if(!e.contains(_))return!1;for(var D=_;D&&D!==e;){if(D.classList.contains(dt.element.consuming))return!0;var k=ir(D);if(P&&k.overflowY.match(/(scroll|auto)/)){var b=D.scrollHeight-D.clientHeight;if(b>0&&(D.scrollTop>0&&P<0||D.scrollTop<b&&P>0))return!0}if(w&&k.overflowX.match(/(scroll|auto)/)){var C=D.scrollWidth-D.clientWidth;if(C>0&&(D.scrollLeft>0&&w<0||D.scrollLeft<C&&w>0))return!0}D=D.parentNode}return!1}function p(_){if(u(_)){var w=l(_),P={pageX:w.pageX,pageY:w.pageY},D=P.pageX-s.pageX,k=P.pageY-s.pageY;if(d(_.target,D,k))return;r(D,k),s=P;var b=new Date().getTime(),C=b-i;C>0&&(o.x=D/C,o.y=k/C,i=b),n(D,k)&&_.preventDefault()}}function m(){t.settings.swipeEasing&&(clearInterval(a),a=setInterval(function(){if(t.isInitialized){clearInterval(a);return}if(!o.x&&!o.y){clearInterval(a);return}if(Math.abs(o.x)<.01&&Math.abs(o.y)<.01){clearInterval(a);return}if(!t.element){clearInterval(a);return}r(o.x*30,o.y*30),o.x*=.8,o.y*=.8},10))}io.supportsTouch?(t.event.bind(e,"touchstart",h),t.event.bind(e,"touchmove",p),t.event.bind(e,"touchend",m)):io.supportsIePointer&&(window.PointerEvent?(t.event.bind(e,"pointerdown",h),t.event.bind(e,"pointermove",p),t.event.bind(e,"pointerup",m)):window.MSPointerEvent&&(t.event.bind(e,"MSPointerDown",h),t.event.bind(e,"MSPointerMove",p),t.event.bind(e,"MSPointerUp",m)))}var JD=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},ZD={"click-rail":GD,"drag-thumb":zD,keyboard:YD,wheel:QD,touch:XD},ic=function(e,n){var r=this;if(n===void 0&&(n={}),typeof e=="string"&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=e,e.classList.add(dt.main),this.settings=JD();for(var s in n)this.settings[s]=n[s];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var i=function(){return e.classList.add(dt.state.focus)},o=function(){return e.classList.remove(dt.state.focus)};this.isRtl=ir(e).direction==="rtl",this.isRtl===!0&&e.classList.add(dt.rtl),this.isNegativeScroll=function(){var u=e.scrollLeft,h=null;return e.scrollLeft=-1,h=e.scrollLeft<0,e.scrollLeft=u,h}(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new oa,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=nu(dt.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=nu(dt.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",i),this.event.bind(this.scrollbarX,"blur",o),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var a=ir(this.scrollbarXRail);this.scrollbarXBottom=parseInt(a.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=nt(a.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=nt(a.borderLeftWidth)+nt(a.borderRightWidth),fn(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=nt(a.marginLeft)+nt(a.marginRight),fn(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=nu(dt.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=nu(dt.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",i),this.event.bind(this.scrollbarY,"blur",o),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var l=ir(this.scrollbarYRail);this.scrollbarYRight=parseInt(l.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=nt(l.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?qD(this.scrollbarY):null,this.railBorderYWidth=nt(l.borderTopWidth)+nt(l.borderBottomWidth),fn(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=nt(l.marginTop)+nt(l.marginBottom),fn(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(u){return ZD[u](r)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(u){return r.onScroll(u)}),jr(this)};ic.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,fn(this.scrollbarXRail,{display:"block"}),fn(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=nt(ir(this.scrollbarXRail).marginLeft)+nt(ir(this.scrollbarXRail).marginRight),this.railYMarginHeight=nt(ir(this.scrollbarYRail).marginTop)+nt(ir(this.scrollbarYRail).marginBottom),fn(this.scrollbarXRail,{display:"none"}),fn(this.scrollbarYRail,{display:"none"}),jr(this),rh(this,"top",0,!1,!0),rh(this,"left",0,!1,!0),fn(this.scrollbarXRail,{display:""}),fn(this.scrollbarYRail,{display:""}))};ic.prototype.onScroll=function(e){this.isAlive&&(jr(this),rh(this,"top",this.element.scrollTop-this.lastScrollTop),rh(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};ic.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),po(this.scrollbarX),po(this.scrollbarY),po(this.scrollbarXRail),po(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};ic.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")};const eL=qs({__name:"PerfectScrollbar",props:{tag:{default:"div"},options:{default:()=>({})}},emits:["scroll","ps-scroll-y","ps-scroll-x","ps-scroll-up","ps-scroll-down","ps-scroll-left","ps-scroll-right","ps-y-reach-start","ps-y-reach-end","ps-x-reach-start","ps-x-reach-end"],setup(t,{expose:e,emit:n}){const r=t,s=n,i=Yt(null),o=Yt(null);$r(()=>r.options,()=>{l(),a()},{deep:!0}),Li(()=>{i.value&&a()}),Zl(()=>{l()});function a(){i.value&&(o.value=new ic(i.value,r.options),d())}function l(){o.value&&(d(!1),o.value.destroy(),o.value=null)}const u={scroll:h("scroll"),"ps-scroll-y":h("ps-scroll-y"),"ps-scroll-x":h("ps-scroll-x"),"ps-scroll-up":h("ps-scroll-up"),"ps-scroll-down":h("ps-scroll-down"),"ps-scroll-left":h("ps-scroll-left"),"ps-scroll-right":h("ps-scroll-right"),"ps-y-reach-start":h("ps-y-reach-start"),"ps-y-reach-end":h("ps-y-reach-end"),"ps-x-reach-start":h("ps-x-reach-start"),"ps-x-reach-end":h("ps-x-reach-end")};function h(p){return function(m){s(p,m)}}function d(p=!0){var m;(m=o.value)!=null&&m.element&&Object.entries(u).forEach(([_,w])=>{var P,D;p?(P=o.value)==null||P.element.addEventListener(_,w):(D=o.value)==null||D.element.removeEventListener(_,w)})}return e({ps:o}),(p,m)=>(Nt(),Nl(Hw(p.tag),{ref_key:"scrollbar",ref:i,class:"ps"},{default:Zh(()=>[Ks(p.$slots,"default")]),_:3},512))}}),tL={componentName:"PerfectScrollbar"},nL={install(t,e){const n=Object.assign(tL,e);t.component(n.componentName,eL)}};var jv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne=function(t,e){if(!t)throw aa(e)},aa=function(t){return new Error("Firebase Database ("+dI.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},rL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},hd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),r.push(n[h],n[d],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||d==null)throw new sL;const p=i<<2|a>>4;if(r.push(p),u!==64){const m=a<<4&240|u>>2;if(r.push(m),d!==64){const _=u<<6&192|d;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pI=function(t){const e=fI(t);return hd.encodeByteArray(e,!0)},sh=function(t){return pI(t).replace(/\./g,"")},ih=function(t){try{return hd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(t){return gI(void 0,t)}function gI(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!oL(n)||(t[n]=gI(t[n],e[n]));return t}function oL(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=()=>aL().__FIREBASE_DEFAULTS__,cL=()=>{if(typeof process>"u"||typeof jv>"u")return;const t=jv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ih(t[1]);return e&&JSON.parse(e)},dd=()=>{try{return lL()||cL()||uL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hL=t=>{var e,n;return(n=(e=dd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},mI=t=>{const e=hL(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_I=()=>{var t;return(t=dd())===null||t===void 0?void 0:t.config},dL=t=>{var e;return(e=dd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[sh(JSON.stringify(n)),sh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function am(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function fL(){var t;const e=(t=dd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gL(){const t=Jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function EI(){return dI.NODE_ADMIN===!0}function mL(){return!fL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TI(){try{return typeof indexedDB=="object"}catch{return!1}}function _L(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL="FirebaseError";class wr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=yL,Object.setPrototypeOf(this,wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,la.prototype.create)}}class la{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?vL(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new wr(s,a,r)}}function vL(t,e){return t.replace(EL,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const EL=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t){return JSON.parse(t)}function Rt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=kl(ih(i[0])||""),n=kl(ih(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},TL=function(t){const e=bI(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},bL=function(t){const e=bI(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Mo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Lp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function oh(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function ah(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(qv(i)&&qv(o)){if(!ah(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function qv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ga(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function za(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const p=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(p<<1|p>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=a^i&(o^a),h=1518500249):(u=i^o^a,h=1859775393):d<60?(u=i&o|a&(i|o),h=2400959708):(u=i^o^a,h=3395469782);const p=(s<<5|s>>>27)+u+l+h+r[d]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=p}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function AL(t,e){const n=new IL(t,e);return n.subscribe.bind(n)}class IL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CL(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Rf),s.error===void 0&&(s.error=Rf),s.complete===void 0&&(s.complete=Rf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rf(){}function SL(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,ne(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},fd=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t){return t&&t._delegate?t._delegate:t}class Qn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ol;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OL(e))try{this.getOrInitializeService({instanceIdentifier:oi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oi){return this.instances.has(e)}getOptions(e=oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oi){return this.component?this.component.multipleInstances?e:oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NL(t){return t===oi?void 0:t}function OL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new PL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const DL={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},LL=we.INFO,ML={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},xL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=ML[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class oc{constructor(e){this.name=e,this._logLevel=LL,this._logHandler=xL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}const VL=(t,e)=>e.some(n=>t instanceof n);let Kv,Gv;function FL(){return Kv||(Kv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UL(){return Gv||(Gv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wI=new WeakMap,Mp=new WeakMap,AI=new WeakMap,Pf=new WeakMap,lm=new WeakMap;function $L(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Cs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&wI.set(n,t)}).catch(()=>{}),lm.set(e,t),e}function BL(t){if(Mp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Mp.set(t,e)}let xp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Mp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function HL(t){xp=t(xp)}function WL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Nf(this),e,...n);return AI.set(r,e.sort?e.sort():[e]),Cs(r)}:UL().includes(t)?function(...e){return t.apply(Nf(this),e),Cs(wI.get(this))}:function(...e){return Cs(t.apply(Nf(this),e))}}function jL(t){return typeof t=="function"?WL(t):(t instanceof IDBTransaction&&BL(t),VL(t,FL())?new Proxy(t,xp):t)}function Cs(t){if(t instanceof IDBRequest)return $L(t);if(Pf.has(t))return Pf.get(t);const e=jL(t);return e!==t&&(Pf.set(t,e),lm.set(e,t)),e}const Nf=t=>lm.get(t);function qL(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Cs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Cs(o.result),l.oldVersion,l.newVersion,Cs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const KL=["get","getKey","getAll","getAllKeys","count"],GL=["put","add","delete","clear"],Of=new Map;function zv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Of.get(e))return Of.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=GL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||KL.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return Of.set(e,i),i}HL(t=>({...t,get:(e,n,r)=>zv(e,n)||t.get(e,n,r),has:(e,n)=>!!zv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function YL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vp="@firebase/app",Yv="0.10.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new oc("@firebase/app"),QL="@firebase/app-compat",XL="@firebase/analytics-compat",JL="@firebase/analytics",ZL="@firebase/app-check-compat",eM="@firebase/app-check",tM="@firebase/auth",nM="@firebase/auth-compat",rM="@firebase/database",sM="@firebase/database-compat",iM="@firebase/functions",oM="@firebase/functions-compat",aM="@firebase/installations",lM="@firebase/installations-compat",cM="@firebase/messaging",uM="@firebase/messaging-compat",hM="@firebase/performance",dM="@firebase/performance-compat",fM="@firebase/remote-config",pM="@firebase/remote-config-compat",gM="@firebase/storage",mM="@firebase/storage-compat",_M="@firebase/firestore",yM="@firebase/vertexai-preview",vM="@firebase/firestore-compat",EM="firebase",TM="10.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="[DEFAULT]",bM={[Vp]:"fire-core",[QL]:"fire-core-compat",[JL]:"fire-analytics",[XL]:"fire-analytics-compat",[eM]:"fire-app-check",[ZL]:"fire-app-check-compat",[tM]:"fire-auth",[nM]:"fire-auth-compat",[rM]:"fire-rtdb",[sM]:"fire-rtdb-compat",[iM]:"fire-fn",[oM]:"fire-fn-compat",[aM]:"fire-iid",[lM]:"fire-iid-compat",[cM]:"fire-fcm",[uM]:"fire-fcm-compat",[hM]:"fire-perf",[dM]:"fire-perf-compat",[fM]:"fire-rc",[pM]:"fire-rc-compat",[gM]:"fire-gcs",[mM]:"fire-gcs-compat",[_M]:"fire-fst",[vM]:"fire-fst-compat",[yM]:"fire-vertex","fire-js":"fire-js",[EM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=new Map,wM=new Map,Up=new Map;function Qv(t,e){try{t.container.addComponent(e)}catch(n){qr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Er(t){const e=t.name;if(Up.has(e))return qr.debug(`There were multiple attempts to register component ${e}.`),!1;Up.set(e,t);for(const n of lh.values())Qv(n,t);for(const n of wM.values())Qv(n,t);return!0}function cm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Dr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ss=new la("app","Firebase",AM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=TM;function II(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Fp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ss.create("bad-app-name",{appName:String(s)});if(n||(n=_I()),!n)throw Ss.create("no-options");const i=lh.get(s);if(i){if(ah(n,i.options)&&ah(r,i.config))return i;throw Ss.create("duplicate-app",{appName:s})}const o=new kL(s);for(const l of Up.values())o.addComponent(l);const a=new IM(n,r,o);return lh.set(s,a),a}function um(t=Fp){const e=lh.get(t);if(!e&&t===Fp&&_I())return II();if(!e)throw Ss.create("no-app",{appName:t});return e}function An(t,e,n){var r;let s=(r=bM[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qr.warn(a.join(" "));return}Er(new Qn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM="firebase-heartbeat-database",SM=1,Dl="firebase-heartbeat-store";let kf=null;function CI(){return kf||(kf=qL(CM,SM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Dl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ss.create("idb-open",{originalErrorMessage:t.message})})),kf}async function RM(t){try{const n=(await CI()).transaction(Dl),r=await n.objectStore(Dl).get(SI(t));return await n.done,r}catch(e){if(e instanceof wr)qr.warn(e.message);else{const n=Ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qr.warn(n.message)}}}async function Xv(t,e){try{const r=(await CI()).transaction(Dl,"readwrite");await r.objectStore(Dl).put(e,SI(t)),await r.done}catch(n){if(n instanceof wr)qr.warn(n.message);else{const r=Ss.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qr.warn(r.message)}}}function SI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=1024,NM=30*24*60*60*1e3;class OM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Jv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=NM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){qr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Jv(),{heartbeatsToSend:r,unsentEntries:s}=kM(this._heartbeatsCache.heartbeats),i=sh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return qr.warn(n),""}}}function Jv(){return new Date().toISOString().substring(0,10)}function kM(t,e=PM){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Zv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Zv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TI()?_L().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await RM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Zv(t){return sh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(t){Er(new Qn("platform-logger",e=>new zL(e),"PRIVATE")),Er(new Qn("heartbeat",e=>new OM(e),"PRIVATE")),An(Vp,Yv,t),An(Vp,Yv,"esm2017"),An("fire-js","")}LM("");function hm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function RI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MM=RI,PI=new la("auth","Firebase",RI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new oc("@firebase/auth");function xM(t,...e){ch.logLevel<=we.WARN&&ch.warn(`Auth (${Gs}): ${t}`,...e)}function Su(t,...e){ch.logLevel<=we.ERROR&&ch.error(`Auth (${Gs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t,...e){throw dm(t,...e)}function hr(t,...e){return dm(t,...e)}function NI(t,e,n){const r=Object.assign(Object.assign({},MM()),{[e]:n});return new la("auth","Firebase",r).create(e,{appName:t.name})}function Rs(t){return NI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return PI.create(t,...e)}function _e(t,e,...n){if(!t)throw dm(e,...n)}function Lr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Su(e),new Error(e)}function Kr(t,e){t||Lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function VM(){return eE()==="http:"||eE()==="https:"}function eE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VM()||pL()||"connection"in navigator)?navigator.onLine:!0}function UM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kr(n>e,"Short delay should be less than long delay!"),this.isMobile=am()||vI()}get(){return FM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t,e){Kr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=new ac(3e4,6e4);function Mi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function zs(t,e,n,r,s={}){return kI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=ca(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),OI.fetch()(DI(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function kI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},$M),e);try{const s=new WM(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw su(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw su(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw su(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw su(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw NI(t,h,u);Xn(t,h)}}catch(s){if(s instanceof wr)throw s;Xn(t,"network-request-failed",{message:String(s)})}}async function pd(t,e,n,r,s={}){const i=await zs(t,e,n,r,s);return"mfaPendingCredential"in i&&Xn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function DI(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?fm(t.config,s):`${t.config.apiScheme}://${s}`}function HM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class WM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hr(this.auth,"network-request-failed")),BM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function su(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=hr(t,e,r);return s.customData._tokenResponse=n,s}function tE(t){return t!==void 0&&t.enterprise!==void 0}class jM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return HM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function qM(t,e){return zs(t,"GET","/v2/recaptchaConfig",Mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e){return zs(t,"POST","/v1/accounts:delete",e)}async function LI(t,e){return zs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GM(t,e=!1){const n=rt(t),r=await n.getIdToken(e),s=pm(r);_e(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:cl(Df(s.auth_time)),issuedAtTime:cl(Df(s.iat)),expirationTime:cl(Df(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Df(t){return Number(t)*1e3}function pm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Su("JWT malformed, contained fewer than 3 sections"),null;try{const s=ih(n);return s?JSON.parse(s):(Su("Failed to decode base64 JWT payload"),null)}catch(s){return Su("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function nE(t){const e=pm(t);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof wr&&zM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function zM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cl(this.lastLoginAt),this.creationTime=cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uh(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ll(t,LI(n,{idToken:r}));_e(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?MI(i.providerUserInfo):[],a=XM(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Bp(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function QM(t){const e=rt(t);await uh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XM(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function MI(t){return t.map(e=>{var{providerId:n}=e,r=hm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JM(t,e){const n=await kI(t,{},async()=>{const r=ca({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=DI(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",OI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZM(t,e){return zs(t,"POST","/v2/accounts:revokeToken",Mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const n=nE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await JM(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Io;return r&&(_e(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(_e(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(_e(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return Lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(t,e){_e(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Mr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=hm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Bp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ll(this,this.stsTokenManager.getToken(this.auth,e));return _e(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return GM(this,e)}reload(){return QM(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Mr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await uh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dr(this.auth.app))return Promise.reject(Rs(this.auth));const e=await this.getIdToken();return await Ll(this,KM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,D=(u=n.createdAt)!==null&&u!==void 0?u:void 0,k=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:C,isAnonymous:L,providerData:x,stsTokenManager:A}=n;_e(b&&A,e,"internal-error");const v=Io.fromJSON(this.name,A);_e(typeof b=="string",e,"internal-error"),os(d,e.name),os(p,e.name),_e(typeof C=="boolean",e,"internal-error"),_e(typeof L=="boolean",e,"internal-error"),os(m,e.name),os(_,e.name),os(w,e.name),os(P,e.name),os(D,e.name),os(k,e.name);const y=new Mr({uid:b,auth:e,email:p,emailVerified:C,displayName:d,isAnonymous:L,photoURL:_,phoneNumber:m,tenantId:w,stsTokenManager:v,createdAt:D,lastLoginAt:k});return x&&Array.isArray(x)&&(y.providerData=x.map(T=>Object.assign({},T))),P&&(y._redirectEventId=P),y}static async _fromIdTokenResponse(e,n,r=!1){const s=new Io;s.updateFromServerResponse(n);const i=new Mr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await uh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];_e(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?MI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Io;a.updateFromIdToken(r);const l=new Mr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Bp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=new Map;function xr(t){Kr(t instanceof Function,"Expected a class definition");let e=rE.get(t);return e?(Kr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xI.type="NONE";const sE=xI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t,e,n){return`firebase:${t}:${e}:${n}`}class Co{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ru(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ru("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Mr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Co(xr(sE),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||xr(sE);const o=Ru(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const d=Mr._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Co(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Co(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($I(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HI(e))return"Blackberry";if(WI(e))return"Webos";if(FI(e))return"Safari";if((e.includes("chrome/")||UI(e))&&!e.includes("edge/"))return"Chrome";if(BI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function VI(t=Jt()){return/firefox\//i.test(t)}function FI(t=Jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UI(t=Jt()){return/crios\//i.test(t)}function $I(t=Jt()){return/iemobile/i.test(t)}function BI(t=Jt()){return/android/i.test(t)}function HI(t=Jt()){return/blackberry/i.test(t)}function WI(t=Jt()){return/webos/i.test(t)}function gm(t=Jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ex(t=Jt()){var e;return gm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tx(){return gL()&&document.documentMode===10}function jI(t=Jt()){return gm(t)||BI(t)||WI(t)||HI(t)||/windows phone/i.test(t)||$I(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t,e=[]){let n;switch(t){case"Browser":n=iE(Jt());break;case"Worker":n=`${iE(Jt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rx(t,e={}){return zs(t,"GET","/v2/passwordPolicy",Mi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=6;class ix{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:sx,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oE(this),this.idTokenSubscription=new oE(this),this.beforeStateQueue=new nx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Co.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await LI(this,{idToken:e}),r=await Mr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Dr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await uh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dr(this.app))return Promise.reject(Rs(this));const n=e?rt(e):null;return n&&_e(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dr(this.app)?Promise.reject(Rs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dr(this.app)?Promise.reject(Rs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rx(this),n=new ix(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new la("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ZM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xr(e)||this._popupRedirectResolver;_e(n,this,"argument-error"),this.redirectPersistenceManager=await Co.create(this,[xr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&xM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function lc(t){return rt(t)}class oE{constructor(e){this.auth=e,this.observer=null,this.addObserver=AL(n=>this.observer=n)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ax(t){gd=t}function KI(t){return gd.loadJS(t)}function lx(){return gd.recaptchaEnterpriseScript}function cx(){return gd.gapiScript}function ux(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const hx="recaptcha-enterprise",dx="NO_RECAPTCHA";class fx{constructor(e){this.type=hx,this.auth=lc(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{qM(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new jM(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;tE(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(dx)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&tE(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=lx();l.length!==0&&(l+=a),KI(l).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function aE(t,e,n,r=!1){const s=new fx(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function lE(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await aE(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await aE(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t,e){const n=cm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ah(i,e??{}))return s;Xn(s,"already-initialized")}return n.initialize({options:e})}function gx(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(xr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Lr("not implemented")}_getIdTokenResponse(e){return Lr("not implemented")}_linkToIdToken(e,n){return Lr("not implemented")}_getReauthenticationResolver(e){return Lr("not implemented")}}async function mx(t,e){return zs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _x(t,e){return pd(t,"POST","/v1/accounts:signInWithPassword",Mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(t,e){return pd(t,"POST","/v1/accounts:signInWithEmailLink",Mi(t,e))}async function vx(t,e){return pd(t,"POST","/v1/accounts:signInWithEmailLink",Mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml extends mm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ml(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ml(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lE(e,n,"signInWithPassword",_x);case"emailLink":return yx(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lE(e,r,"signUpPassword",mx);case"emailLink":return vx(e,{idToken:n,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t,e){return pd(t,"POST","/v1/accounts:signInWithIdp",Mi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="http://localhost";class Ti extends mm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ti(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=hm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ti(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return So(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,So(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,So(e,n)}buildRequest(){const e={requestUri:Ex,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ca(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bx(t){const e=Ga(za(t)).link,n=e?Ga(za(e)).deep_link_id:null,r=Ga(za(t)).deep_link_id;return(r?Ga(za(r)).link:null)||r||n||e||t}class _m{constructor(e){var n,r,s,i,o,a;const l=Ga(za(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,d=Tx((s=l.mode)!==null&&s!==void 0?s:null);_e(u&&h&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=h,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=bx(e);try{return new _m(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.providerId=ua.PROVIDER_ID}static credential(e,n){return Ml._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=_m.parseLink(n);return _e(r,"argument-error"),Ml._fromEmailAndCode(e,r.code,r.tenantId)}}ua.PROVIDER_ID="password";ua.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ua.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends GI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends cc{constructor(){super("facebook.com")}static credential(e){return Ti._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ms.credential(e.oauthAccessToken)}catch{return null}}}ms.FACEBOOK_SIGN_IN_METHOD="facebook.com";ms.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends cc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ti._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return _s.credential(n,r)}catch{return null}}}_s.GOOGLE_SIGN_IN_METHOD="google.com";_s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends cc{constructor(){super("github.com")}static credential(e){return Ti._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.GITHUB_SIGN_IN_METHOD="github.com";ys.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends cc{constructor(){super("twitter.com")}static credential(e,n){return Ti._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return vs.credential(n,r)}catch{return null}}}vs.TWITTER_SIGN_IN_METHOD="twitter.com";vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Mr._fromIdTokenResponse(e,r,s),o=cE(r);return new xo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=cE(r);return new xo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function cE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends wr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,hh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new hh(e,n,r,s)}}function zI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?hh._fromErrorAndOperation(t,i,e,r):i})}async function wx(t,e,n=!1){const r=await Ll(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return xo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ax(t,e,n=!1){const{auth:r}=t;if(Dr(r.app))return Promise.reject(Rs(r));const s="reauthenticate";try{const i=await Ll(t,zI(r,s,e,t),n);_e(i.idToken,r,"internal-error");const o=pm(i.idToken);_e(o,r,"internal-error");const{sub:a}=o;return _e(t.uid===a,r,"user-mismatch"),xo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Xn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YI(t,e,n=!1){if(Dr(t.app))return Promise.reject(Rs(t));const r="signIn",s=await zI(t,r,e),i=await xo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Ix(t,e){return YI(lc(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cx(t){const e=lc(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function ZG(t,e,n){return Dr(t.app)?Promise.reject(Rs(t)):Ix(rt(t),ua.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Cx(t),r})}function Sx(t,e,n,r){return rt(t).onIdTokenChanged(e,n,r)}function e3(t){return rt(t).signOut()}const dh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dh,"1"),this.storage.removeItem(dh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=1e3,Px=10;class XI extends QI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);tx()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Px):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Rx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}XI.type="LOCAL";const Nx=XI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI extends QI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}JI.type="SESSION";const ZI=JI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new md(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await Ox(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}md.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=ym("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const p=d;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(){return window}function Dx(t){dr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(){return typeof dr().WorkerGlobalScope<"u"&&typeof dr().importScripts=="function"}async function Lx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Mx(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function xx(){return eC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="firebaseLocalStorageDb",Vx=1,fh="firebaseLocalStorage",nC="fbase_key";class uc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _d(t,e){return t.transaction([fh],e?"readwrite":"readonly").objectStore(fh)}function Fx(){const t=indexedDB.deleteDatabase(tC);return new uc(t).toPromise()}function Hp(){const t=indexedDB.open(tC,Vx);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(fh,{keyPath:nC})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(fh)?e(r):(r.close(),await Fx(),e(await Hp()))})})}async function uE(t,e,n){const r=_d(t,!0).put({[nC]:e,value:n});return new uc(r).toPromise()}async function Ux(t,e){const n=_d(t,!1).get(e),r=await new uc(n).toPromise();return r===void 0?null:r.value}function hE(t,e){const n=_d(t,!0).delete(e);return new uc(n).toPromise()}const $x=800,Bx=3;class rC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Bx)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=md._getInstance(xx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Lx(),!this.activeServiceWorker)return;this.sender=new kx(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Mx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hp();return await uE(e,dh,"1"),await hE(e,dh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>uE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Ux(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=_d(s,!1).getAll();return new uc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$x)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rC.type="LOCAL";const Hx=rC;new ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t,e){return e?xr(e):(_e(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm extends mm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,n){return So(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function jx(t){return YI(t.auth,new vm(t),t.bypassAuthState)}function qx(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),Ax(n,new vm(t),t.bypassAuthState)}async function Kx(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),wx(n,new vm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jx;case"linkViaPopup":case"linkViaRedirect":return Kx;case"reauthViaPopup":case"reauthViaRedirect":return qx;default:Xn(this.auth,"internal-error")}}resolve(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=new ac(2e3,1e4);class go extends sC{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,go.currentPopupAction&&go.currentPopupAction.cancel(),go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){Kr(this.filter.length===1,"Popup operations only handle one event");const e=ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,go.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Gx.get())};e()}}go.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx="pendingRedirect",Pu=new Map;class Yx extends sC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Pu.get(this.auth._key());if(!e){try{const r=await Qx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Pu.set(this.auth._key(),e)}return this.bypassAuthState||Pu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Qx(t,e){const n=Zx(e),r=Jx(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Xx(t,e){Pu.set(t._key(),e)}function Jx(t){return xr(t._redirectPersistence)}function Zx(t){return Ru(zx,t.config.apiKey,t.name)}async function e1(t,e,n=!1){if(Dr(t.app))return Promise.reject(Rs(t));const r=lc(t),s=Wx(r,e),o=await new Yx(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=10*60*1e3;class n1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!r1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!iC(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(hr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=t1&&this.cachedEventUids.clear(),this.cachedEventUids.has(dE(e))}saveEventToCache(e){this.cachedEventUids.add(dE(e)),this.lastProcessedEventTime=Date.now()}}function dE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function r1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s1(t,e={}){return zs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o1=/^https?/;async function a1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await s1(t);for(const n of e)try{if(l1(n))return}catch{}Xn(t,"unauthorized-domain")}function l1(t){const e=$p(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!o1.test(n))return!1;if(i1.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new ac(3e4,6e4);function fE(){const t=dr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function u1(t){return new Promise((e,n)=>{var r,s,i;function o(){fE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fE(),n(hr(t,"network-request-failed"))},timeout:c1.get()})}if(!((s=(r=dr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=dr().gapi)===null||i===void 0)&&i.load)o();else{const a=ux("iframefcb");return dr()[a]=()=>{gapi.load?o():n(hr(t,"network-request-failed"))},KI(`${cx()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Nu=null,e})}let Nu=null;function h1(t){return Nu=Nu||u1(t),Nu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=new ac(5e3,15e3),f1="__/auth/iframe",p1="emulator/auth/iframe",g1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},m1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _1(t){const e=t.config;_e(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fm(e,p1):`https://${t.config.authDomain}/${f1}`,r={apiKey:e.apiKey,appName:t.name,v:Gs},s=m1.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ca(r).slice(1)}`}async function y1(t){const e=await h1(t),n=dr().gapi;return _e(n,t,"internal-error"),e.open({where:document.body,url:_1(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:g1,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=hr(t,"network-request-failed"),a=dr().setTimeout(()=>{i(o)},d1.get());function l(){dr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},E1=500,T1=600,b1="_blank",w1="http://localhost";class pE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function A1(t,e,n,r=E1,s=T1){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},v1),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Jt().toLowerCase();n&&(a=UI(u)?b1:n),VI(u)&&(e=e||w1,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,_])=>`${p}${m}=${_},`,"");if(ex(u)&&a!=="_self")return I1(e||"",a),new pE(null);const d=window.open(e||"",a,h);_e(d,t,"popup-blocked");try{d.focus()}catch{}return new pE(d)}function I1(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="__/auth/handler",S1="emulator/auth/handler",R1=encodeURIComponent("fac");async function gE(t,e,n,r,s,i){_e(t.config.authDomain,t,"auth-domain-config-required"),_e(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Gs,eventId:s};if(e instanceof GI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Lp(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof cc){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${R1}=${encodeURIComponent(l)}`:"";return`${P1(t)}?${ca(a).slice(1)}${u}`}function P1({config:t}){return t.emulator?fm(t,S1):`https://${t.authDomain}/${C1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="webStorageSupport";class N1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZI,this._completeRedirectFn=e1,this._overrideRedirectResult=Xx}async _openPopup(e,n,r,s){var i;Kr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await gE(e,n,r,$p(),s);return A1(e,o,ym())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await gE(e,n,r,$p(),s);return Dx(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Kr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await y1(e),r=new n1(e);return n.register("authEvent",s=>(_e(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lf,{type:Lf},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Lf];o!==void 0&&n(!!o),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=a1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jI()||FI()||gm()}}const O1=N1;var mE="@firebase/auth",_E="1.7.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L1(t){Er(new Qn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;_e(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qI(t)},u=new ox(r,s,i,l);return gx(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Er(new Qn("auth-internal",e=>{const n=lc(e.getProvider("auth").getImmediate());return(r=>new k1(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),An(mE,_E,D1(t)),An(mE,_E,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=5*60;dL("authIdTokenMaxAge");function x1(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ax({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=hr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",x1().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L1("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=new Map,F1={activated:!1,tokenObservers:[]};function Jn(t){return V1.get(t)||Object.assign({},F1)}const yE={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Ol,this.pending.promise.catch(n=>{}),await $1(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Ol,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function $1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ph=new la("appCheck","AppCheck",B1);function oC(t){if(!Jn(t).activated)throw ph.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="firebase-app-check-database",W1=1,Wp="firebase-app-check-store";let iu=null;function j1(){return iu||(iu=new Promise((t,e)=>{try{const n=indexedDB.open(H1,W1);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(ph.create("storage-open",{originalErrorMessage:(s=r.target.error)===null||s===void 0?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(Wp,{keyPath:"compositeKey"})}}}catch(n){e(ph.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),iu)}function q1(t,e){return K1(G1(t),e)}async function K1(t,e){const r=(await j1()).transaction(Wp,"readwrite"),i=r.objectStore(Wp).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=l=>{o()},r.onerror=l=>{var u;a(ph.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})}function G1(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp=new oc("@firebase/app-check");function vE(t,e){return TI()?q1(t,e).catch(n=>{jp.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1={error:"UNKNOWN_ERROR"};function Y1(t){return hd.encodeString(JSON.stringify(t),!1)}async function qp(t,e=!1){const n=t.app;oC(n);const r=Jn(n);let s=r.token,i;if(s&&!Ya(s)&&(r.token=void 0,s=void 0),!s){const l=await r.cachedTokenPromise;l&&(Ya(l)?s=l:await vE(n,void 0))}if(!e&&s&&Ya(s))return{token:s.token};let o=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),s=await Jn(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?jp.warn(l.message):jp.error(l),i=l}let a;return s?i?Ya(s)?a={token:s.token,internalError:i}:a=TE(i):(a={token:s.token},r.token=s,await vE(n,s)):a=TE(i),o&&Z1(n,a),a}async function Q1(t){const e=t.app;oC(e);const{provider:n}=Jn(e);{const{token:r}=await n.getToken();return{token:r}}}function X1(t,e,n,r){const{app:s}=t,i=Jn(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&Ya(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),EE(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>EE(t))}function aC(t,e){const n=Jn(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function EE(t){const{app:e}=t,n=Jn(e);let r=n.tokenRefresher;r||(r=J1(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function J1(t){const{app:e}=t;return new U1(async()=>{const n=Jn(e);let r;if(n.token?r=await qp(t,!0):r=await qp(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Jn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},yE.RETRIAL_MIN_WAIT,yE.RETRIAL_MAX_WAIT)}function Z1(t,e){const n=Jn(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ya(t){return t.expireTimeMillis-Date.now()>0}function TE(t){return{token:Y1(z1),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Jn(this.app);for(const n of e)aC(this.app,n.next);return Promise.resolve()}}function tV(t,e){return new eV(t,e)}function nV(t){return{getToken:e=>qp(t,e),getLimitedUseToken:()=>Q1(t),addTokenListener:e=>X1(t,"INTERNAL",e),removeTokenListener:e=>aC(t.app,e)}}const rV="@firebase/app-check",sV="0.8.7",iV="app-check",bE="app-check-internal";function oV(){Er(new Qn(iV,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return tV(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(bE).initialize()})),Er(new Qn(bE,t=>{const e=t.getProvider("app-check").getImmediate();return nV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),An(rV,sV)}oV();var aV="firebase",lV="10.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An(aV,lV,"app");const lC=Symbol("firebaseApp");function Em(t){return un()&&Qt(lC,null)||um(t)}const or=()=>{},cV=typeof window<"u";function Tm(t,e){return e.split(".").reduce((n,r)=>n&&n[r],t)}function uV(t,e,n){const r=(""+e).split("."),s=r.pop(),i=r.reduce((o,a)=>o&&o[a],t);if(i!=null)return Array.isArray(i)?i.splice(Number(s),1,n):i[s]=n}function xi(t){return!!t&&typeof t=="object"}const hV=Object.prototype;function dV(t){return xi(t)&&Object.getPrototypeOf(t)===hV}function bm(t){return xi(t)&&t.type==="document"}function fV(t){return xi(t)&&t.type==="collection"}function pV(t){return bm(t)||fV(t)}function gV(t){return xi(t)&&t.type==="query"}function mV(t){return xi(t)&&"ref"in t}function _V(t){return xi(t)&&typeof t.bucket=="string"}function yV(t,e){let n;return()=>{if(!n)return n=!0,t(e())}}const vV=Symbol.for("v-scx");function EV(){return!!Qt(vV,0)}const ou=new WeakMap;function TV(t,e){if(!ou.has(t)){const n=Bh(!0);ou.set(t,n);const{unmount:r}=e;e.unmount=()=>{r.call(e),n.stop(),ou.delete(t)}}return ou.get(t)}const bV=new WeakMap,au=new WeakMap;function cC(t){const e=Em(t);if(!au.has(e)){let n;const s=[new Promise(i=>{n=i}),i=>{au.set(e,i),n(i.value)}];au.set(e,s)}return au.get(e)}function uC(t){const e=cC(t);return Array.isArray(e)?e[0]:Promise.resolve(e.value)}function wV(t,e){Sx(e,n=>{const r=cC();t.value=n,Array.isArray(r)&&r[1](t)})}var wE={};const AE="@firebase/database",IE="1.0.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hC="";function AV(t){hC=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Rt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:kl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Jr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new IV(e)}}catch{}return new CV},ci=dC("localStorage"),SV=dC("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new oc("@firebase/database"),RV=function(){let t=1;return function(){return t++}}(),fC=function(t){const e=RL(t),n=new wL;n.update(e);const r=n.digest();return hd.encodeByteArray(r)},hc=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=hc.apply(null,r):typeof r=="object"?e+=Rt(r):e+=r,e+=" "}return e};let ul=null,CE=!0;const PV=function(t,e){ne(!e,"Can't turn on custom loggers persistently."),Ro.logLevel=we.VERBOSE,ul=Ro.log.bind(Ro)},Wt=function(...t){if(CE===!0&&(CE=!1,ul===null&&SV.get("logging_enabled")===!0&&PV()),ul){const e=hc.apply(null,t);ul(e)}},dc=function(t){return function(...e){Wt(t,...e)}},Kp=function(...t){const e="FIREBASE INTERNAL ERROR: "+hc(...t);Ro.error(e)},bi=function(...t){const e=`FIREBASE FATAL ERROR: ${hc(...t)}`;throw Ro.error(e),new Error(e)},In=function(...t){const e="FIREBASE WARNING: "+hc(...t);Ro.warn(e)},NV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&In("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},pC=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},OV=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Vo="[MIN_NAME]",wi="[MAX_NAME]",ha=function(t,e){if(t===e)return 0;if(t===Vo||e===wi)return-1;if(e===Vo||t===wi)return 1;{const n=SE(t),r=SE(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},kV=function(t,e){return t===e?0:t<e?-1:1},xa=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Rt(e))},wm=function(t){if(typeof t!="object"||t===null)return Rt(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Rt(e[r]),n+=":",n+=wm(t[e[r]]);return n+="}",n},gC=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Fn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const mC=function(t){ne(!pC(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,l;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const h=u.join("");let d="";for(l=0;l<64;l+=8){let p=parseInt(h.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),d=d+p}return d.toLowerCase()},DV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},LV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},MV=new RegExp("^-?(0*)\\d{1,10}$"),xV=-2147483648,VV=2147483647,SE=function(t){if(MV.test(t)){const e=Number(t);if(e>=xV&&e<=VV)return e}return null},fc=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw In("Exception was thrown by user callback.",n),e},Math.floor(0))}},FV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},hl=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){In(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Wt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',In(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="5",_C="v",yC="s",vC="r",EC="f",TC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bC="ls",wC="p",Gp="ac",AC="websocket",IC="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,n,r,s,i=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ci.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ci.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function HV(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function CC(t,e,n){ne(typeof e=="string","typeof type must == string"),ne(typeof n=="object","typeof params must == object");let r;if(e===AC)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===IC)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);HV(t)&&(n.ns=t.namespace);const s=[];return Fn(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(){this.counters_={}}incrementCounter(e,n=1){Jr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return iL(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf={},xf={};function Im(t){const e=t.toString();return Mf[e]||(Mf[e]=new WV),Mf[e]}function jV(t,e){const n=t.toString();return xf[n]||(xf[n]=e()),xf[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&fc(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="start",KV="close",GV="pLPCommand",zV="pRTLPCB",SC="id",RC="pw",PC="ser",YV="cb",QV="seg",XV="ts",JV="d",ZV="dframe",NC=1870,OC=30,eF=NC-OC,tF=25e3,nF=3e4;class mo{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=dc(e),this.stats_=Im(n),this.urlFn=l=>(this.appCheckToken&&(l[Gp]=this.appCheckToken),CC(n,IC,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new qV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(nF)),OV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Cm((...i)=>{const[o,a,l,u,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===RE)this.id=a,this.password=l;else if(o===KV)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[RE]="t",r[PC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[YV]=this.scriptTagHolder.uniqueCallbackIdentifier),r[_C]=Am,this.transportSessionId&&(r[yC]=this.transportSessionId),this.lastSessionId&&(r[bC]=this.lastSessionId),this.applicationId&&(r[wC]=this.applicationId),this.appCheckToken&&(r[Gp]=this.appCheckToken),typeof location<"u"&&location.hostname&&TC.test(location.hostname)&&(r[vC]=EC);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){mo.forceAllow_=!0}static forceDisallow(){mo.forceDisallow_=!0}static isAvailable(){return mo.forceAllow_?!0:!mo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!DV()&&!LV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Rt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=pI(n),s=gC(r,eF);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[ZV]="t",r[SC]=e,r[RC]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Rt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Cm{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=RV(),window[GV+this.uniqueCallbackIdentifier]=e,window[zV+this.uniqueCallbackIdentifier]=n,this.myIFrame=Cm.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Wt("frame writing exception"),a.stack&&Wt(a.stack),Wt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Wt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[SC]=this.myID,e[RC]=this.myPW,e[PC]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+OC+r.length<=NC;){const o=this.pendingSegs.shift();r=r+"&"+QV+s+"="+o.seg+"&"+XV+s+"="+o.ts+"&"+JV+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(tF)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Wt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=16384,sF=45e3;let gh=null;typeof MozWebSocket<"u"?gh=MozWebSocket:typeof WebSocket<"u"&&(gh=WebSocket);class jn{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=dc(this.connId),this.stats_=Im(n),this.connURL=jn.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[_C]=Am,typeof location<"u"&&location.hostname&&TC.test(location.hostname)&&(o[vC]=EC),n&&(o[yC]=n),r&&(o[bC]=r),s&&(o[Gp]=s),i&&(o[wC]=i),CC(e,AC,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ci.set("previous_websocket_failure",!0);try{let r;EI(),this.mySock=new gh(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){jn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&gh!==null&&!jn.forceDisallow_}static previouslyFailed(){return ci.isInMemoryStorage||ci.get("previous_websocket_failure")===!0}markConnectionHealthy(){ci.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=kl(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ne(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Rt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=gC(n,rF);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(sF))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}jn.responsesRequiredToBeHealthy=2;jn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[mo,jn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=jn&&jn.isAvailable();let r=n&&!jn.previouslyFailed();if(e.webSocketOnly&&(n||In("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[jn];else{const s=this.transports_=[];for(const i of xl.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);xl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}xl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF=6e4,oF=5e3,aF=10*1024,lF=100*1024,Vf="t",PE="d",cF="s",NE="r",uF="e",OE="o",kE="a",DE="n",LE="p",hF="h";class dF{constructor(e,n,r,s,i,o,a,l,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=dc("c:"+this.id+":"),this.transportManager_=new xl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=hl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>lF?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>aF?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Vf in e){const n=e[Vf];n===kE?this.upgradeIfSecondaryHealthy_():n===NE?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===OE&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=xa("t",e),r=xa("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:LE,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:kE,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:DE,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=xa("t",e),r=xa("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=xa(Vf,e);if(PE in e){const r=e[PE];if(n===hF){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===DE){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===cF?this.onConnectionShutdown_(r):n===NE?this.onReset_(r):n===uF?Kp("Server Error: "+r):n===OE?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Kp("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Am!==r&&In("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),hl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(iF))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(oF))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:LE,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ci.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.allowedEvents_=e,this.listeners_={},ne(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){ne(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends DC{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!am()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new mh}getInitialEvent(e){return ne(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=32,xE=768;class et{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function He(){return new et("")}function Pe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function xs(t){return t.pieces_.length-t.pieceNum_}function Ze(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new et(t.pieces_,e)}function LC(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function fF(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function MC(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function xC(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new et(e,0)}function wt(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof et)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new et(n,0)}function Ce(t){return t.pieceNum_>=t.pieces_.length}function kn(t,e){const n=Pe(t),r=Pe(e);if(n===null)return e;if(n===r)return kn(Ze(t),Ze(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function VC(t,e){if(xs(t)!==xs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function qn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(xs(t)>xs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class pF{constructor(e,n){this.errorPrefix_=n,this.parts_=MC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=fd(this.parts_[r]);FC(this)}}function gF(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=fd(e),FC(t)}function mF(t){const e=t.parts_.pop();t.byteLength_-=fd(e),t.parts_.length>0&&(t.byteLength_-=1)}function FC(t){if(t.byteLength_>xE)throw new Error(t.errorPrefix_+"has a key path longer than "+xE+" bytes ("+t.byteLength_+").");if(t.parts_.length>ME)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ME+") or object contains a cycle "+ai(t))}function ai(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm extends DC{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Sm}getInitialEvent(e){return ne(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=1e3,_F=60*5*1e3,VE=30*1e3,yF=1.3,vF=3e4,EF="server_kill",FE=3;class Br extends kC{constructor(e,n,r,s,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Br.nextPersistentConnectionId_++,this.log_=dc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Va,this.maxReconnectDelay_=_F,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!EI())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Sm.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&mh.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Rt(i)),ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Ol,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ne(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,u=a.s;Br.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Jr(e,"w")){const r=Mo(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();In(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||bL(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=VE)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=TL(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Rt(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Kp("Unrecognized action received from server: "+Rt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Va,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Va,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>vF&&(this.reconnectDelay_=Va),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*yF)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Br.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(d){ne(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?Wt("getToken() completed but was canceled"):(Wt("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,a=new dF(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,m=>{In(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(EF)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&In(d),l())}}}interrupt(e){Wt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Wt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Lp(this.interruptReasons_)&&(this.reconnectDelay_=Va,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>wm(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new et(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Wt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=FE&&(this.reconnectDelay_=VE,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Wt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=FE&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+hC.replace(/\./g,"-")]=1,am()?e["framework.cordova"]=1:vI()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=mh.getInstance().currentlyOnline();return Lp(this.interruptReasons_)&&e}}Br.nextPersistentConnectionId_=0;Br.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ne(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ne(Vo,e),s=new Ne(Vo,n);return this.compare(r,s)!==0}minPost(){return Ne.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lu;class UC extends yd{static get __EMPTY_NODE(){return lu}static set __EMPTY_NODE(e){lu=e}compare(e,n){return ha(e.name,n.name)}isDefinedOn(e){throw aa("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ne.MIN}maxPost(){return new Ne(wi,lu)}makePost(e,n){return ne(typeof e=="string","KeyIndex indexValue must always be a string."),new Ne(e,lu)}toString(){return".key"}}const Po=new UC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu=class{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},vn=class Qa{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Qa.RED,this.left=s??ar.EMPTY_NODE,this.right=i??ar.EMPTY_NODE}copy(e,n,r,s,i){return new Qa(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ar.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ar.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Qa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Qa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};vn.RED=!0;vn.BLACK=!1;class TF{copy(e,n,r,s,i){return this}insert(e,n,r){return new vn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let ar=class Ou{constructor(e,n=Ou.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ou(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,vn.BLACK,null,null))}remove(e){return new Ou(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,vn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new cu(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new cu(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new cu(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new cu(this.root_,null,this.comparator_,!0,e)}};ar.EMPTY_NODE=new TF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(t,e){return ha(t.name,e.name)}function Rm(t,e){return ha(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zp;function wF(t){zp=t}const $C=function(t){return typeof t=="number"?"number:"+mC(t):"string:"+t},BC=function(t){if(t.isLeafNode()){const e=t.val();ne(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Jr(e,".sv"),"Priority must be a string or number.")}else ne(t===zp||t.isEmpty(),"priority of unexpected type.");ne(t===zp||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UE;class Tt{constructor(e,n=Tt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),BC(this.priorityNode_)}static set __childrenNodeConstructor(e){UE=e}static get __childrenNodeConstructor(){return UE}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Tt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Tt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ce(e)?this:Pe(e)===".priority"?this.priorityNode_:Tt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Tt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Pe(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ne(r!==".priority"||xs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Tt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ze(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+$C(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=mC(this.value_):e+=this.value_,this.lazyHash_=fC(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Tt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Tt.__childrenNodeConstructor?-1:(ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Tt.VALUE_TYPE_ORDER.indexOf(n),i=Tt.VALUE_TYPE_ORDER.indexOf(r);return ne(s>=0,"Unknown leaf type: "+n),ne(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Tt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HC,WC;function AF(t){HC=t}function IF(t){WC=t}class CF extends yd{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?ha(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ne.MIN}maxPost(){return new Ne(wi,new Tt("[PRIORITY-POST]",WC))}makePost(e,n){const r=HC(e);return new Ne(n,new Tt("[PRIORITY-POST]",r))}toString(){return".priority"}}const Gt=new CF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF=Math.log(2);class RF{constructor(e){const n=i=>parseInt(Math.log(i)/SF,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const _h=function(t,e,n,r){t.sort(e);const s=function(l,u){const h=u-l;let d,p;if(h===0)return null;if(h===1)return d=t[l],p=n?n(d):d,new vn(p,d.node,vn.BLACK,null,null);{const m=parseInt(h/2,10)+l,_=s(l,m),w=s(m+1,u);return d=t[m],p=n?n(d):d,new vn(p,d.node,vn.BLACK,_,w)}},i=function(l){let u=null,h=null,d=t.length;const p=function(_,w){const P=d-_,D=d;d-=_;const k=s(P+1,D),b=t[P],C=n?n(b):b;m(new vn(C,b.node,w,null,k))},m=function(_){u?(u.left=_,u=_):(h=_,u=_)};for(let _=0;_<l.count;++_){const w=l.nextBitIsOne(),P=Math.pow(2,l.count-(_+1));w?p(P,vn.BLACK):(p(P,vn.BLACK),p(P,vn.RED))}return h},o=new RF(t.length),a=i(o);return new ar(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff;const eo={};class Vr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ne(eo&&Gt,"ChildrenNode.ts has not been loaded"),Ff=Ff||new Vr({".priority":eo},{".priority":Gt}),Ff}get(e){const n=Mo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ar?n:null}hasIndex(e){return Jr(this.indexSet_,e.toString())}addIndex(e,n){ne(e!==Po,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Ne.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=_h(r,e.getCompare()):a=eo;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new Vr(h,u)}addToIndexes(e,n){const r=oh(this.indexes_,(s,i)=>{const o=Mo(this.indexSet_,i);if(ne(o,"Missing index implementation for "+i),s===eo)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Ne.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),_h(a,o.getCompare())}else return eo;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new Ne(e.name,a))),l.insert(e,e.node)}});return new Vr(r,this.indexSet_)}removeFromIndexes(e,n){const r=oh(this.indexes_,s=>{if(s===eo)return s;{const i=n.get(e.name);return i?s.remove(new Ne(e.name,i)):s}});return new Vr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fa;class Fe{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&BC(this.priorityNode_),this.children_.isEmpty()&&ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Fa||(Fa=new Fe(new ar(Rm),null,Vr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Fa}updatePriority(e){return this.children_.isEmpty()?this:new Fe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Fa:n}}getChild(e){const n=Pe(e);return n===null?this:this.getImmediateChild(n).getChild(Ze(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ne(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ne(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Fa:this.priorityNode_;return new Fe(s,o,i)}}updateChild(e,n){const r=Pe(e);if(r===null)return n;{ne(Pe(e)!==".priority"||xs(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Ze(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Gt,(o,a)=>{n[o]=a.val(e),r++,i&&Fe.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+$C(this.getPriority().val())+":"),this.forEachChild(Gt,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":fC(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Ne(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ne(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ne(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Ne.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Ne.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===pc?-1:0}withIndex(e){if(e===Po||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Fe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Po||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Gt),s=n.getIterator(Gt);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Po?null:this.indexMap_.get(e.toString())}}Fe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class PF extends Fe{constructor(){super(new ar(Rm),Fe.EMPTY_NODE,Vr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Fe.EMPTY_NODE}isEmpty(){return!1}}const pc=new PF;Object.defineProperties(Ne,{MIN:{value:new Ne(Vo,Fe.EMPTY_NODE)},MAX:{value:new Ne(wi,pc)}});UC.__EMPTY_NODE=Fe.EMPTY_NODE;Tt.__childrenNodeConstructor=Fe;wF(pc);IF(pc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF=!0;function jt(t,e=null){if(t===null)return Fe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ne(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Tt(n,jt(e))}if(!(t instanceof Array)&&NF){const n=[];let r=!1;if(Fn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=jt(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Ne(o,l)))}}),n.length===0)return Fe.EMPTY_NODE;const i=_h(n,bF,o=>o.name,Rm);if(r){const o=_h(n,Gt.getCompare());return new Fe(i,jt(e),new Vr({".priority":o},{".priority":Gt}))}else return new Fe(i,jt(e),Vr.Default)}else{let n=Fe.EMPTY_NODE;return Fn(t,(r,s)=>{if(Jr(t,r)&&r.substring(0,1)!=="."){const i=jt(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(jt(e))}}AF(jt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF extends yd{constructor(e){super(),this.indexPath_=e,ne(!Ce(e)&&Pe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?ha(e.name,n.name):i}makePost(e,n){const r=jt(e),s=Fe.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ne(n,s)}maxPost(){const e=Fe.EMPTY_NODE.updateChild(this.indexPath_,pc);return new Ne(wi,e)}toString(){return MC(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF extends yd{compare(e,n){const r=e.node.compareTo(n.node);return r===0?ha(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ne.MIN}maxPost(){return Ne.MAX}makePost(e,n){const r=jt(e);return new Ne(n,r)}toString(){return".value"}}const DF=new kF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(t){return{type:"value",snapshotNode:t}}function MF(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function xF(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function $E(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function VF(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Gt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vo}hasEnd(){return this.endSet_}getIndexEndValue(){return ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Gt}copy(){const e=new Pm;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function BE(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Gt?n="$priority":t.index_===DF?n="$value":t.index_===Po?n="$key":(ne(t.index_ instanceof OF,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Rt(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Rt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Rt(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Rt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Rt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function HE(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Gt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh extends kC{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=dc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ne(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=yh.getListenId_(e,r),a={};this.listens_[o]=a;const l=BE(e._queryParams);this.restRequest_(i+".json",l,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(i,d,!1,r),Mo(this.listens_,o)===a){let p;u?u===401?p="permission_denied":p="rest_error:"+u:p="ok",s(p,null)}})}unlisten(e,n){const r=yh.getListenId_(e,n);delete this.listens_[r]}get(e){const n=BE(e._queryParams),r=e._path.toString(),s=new Ol;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ca(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=kl(a.responseText)}catch{In("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&In("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(){this.rootNode_=Fe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(){return{value:null,children:new Map}}function jC(t,e,n){if(Ce(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Pe(e);t.children.has(r)||t.children.set(r,vh());const s=t.children.get(r);e=Ze(e),jC(s,e,n)}}function Yp(t,e,n){t.value!==null?n(e,t.value):UF(t,(r,s)=>{const i=new et(e.toString()+"/"+r);Yp(s,i,n)})}function UF(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Fn(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=10*1e3,BF=30*1e3,HF=5*60*1e3;class WF{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new $F(e);const r=WE+(BF-WE)*Math.random();hl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Fn(e,(s,i)=>{i>0&&Jr(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),hl(this.reportStats_.bind(this),Math.floor(Math.random()*2*HF))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(lr||(lr={}));function qC(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function KC(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function GC(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=lr.ACK_USER_WRITE,this.source=qC()}operationForChild(e){if(Ce(this.path)){if(this.affectedTree.value!=null)return ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new et(e));return new Eh(He(),n,this.revert)}}else return ne(Pe(this.path)===e,"operationForChild called for unrelated child."),new Eh(Ze(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=lr.OVERWRITE}operationForChild(e){return Ce(this.path)?new Ai(this.source,He(),this.snap.getImmediateChild(e)):new Ai(this.source,Ze(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=lr.MERGE}operationForChild(e){if(Ce(this.path)){const n=this.children.subtree(new et(e));return n.isEmpty()?null:n.value?new Ai(this.source,He(),n.value):new Vl(this.source,He(),n)}else return ne(Pe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Vl(this.source,Ze(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ce(e))return this.isFullyInitialized()&&!this.filtered_;const n=Pe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function jF(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(VF(o.childName,o.snapshotNode))}),Ua(t,s,"child_removed",e,r,n),Ua(t,s,"child_added",e,r,n),Ua(t,s,"child_moved",i,r,n),Ua(t,s,"child_changed",e,r,n),Ua(t,s,"value",e,r,n),s}function Ua(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,l)=>KF(t,a,l)),o.forEach(a=>{const l=qF(t,a,i);s.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function qF(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function KF(t,e,n){if(e.childName==null||n.childName==null)throw aa("Should only compare child_ events.");const r=new Ne(e.childName,e.snapshotNode),s=new Ne(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t,e){return{eventCache:t,serverCache:e}}function dl(t,e,n,r){return zC(new Nm(e,n,r),t.serverCache)}function YC(t,e,n,r){return zC(t.eventCache,new Nm(e,n,r))}function Qp(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ii(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uf;const GF=()=>(Uf||(Uf=new ar(kV)),Uf);class Je{constructor(e,n=GF()){this.value=e,this.children=n}static fromObject(e){let n=new Je(null);return Fn(e,(r,s)=>{n=n.set(new et(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:He(),value:this.value};if(Ce(e))return null;{const r=Pe(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Ze(e),n);return i!=null?{path:wt(new et(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ce(e))return this;{const n=Pe(e),r=this.children.get(n);return r!==null?r.subtree(Ze(e)):new Je(null)}}set(e,n){if(Ce(e))return new Je(n,this.children);{const r=Pe(e),i=(this.children.get(r)||new Je(null)).set(Ze(e),n),o=this.children.insert(r,i);return new Je(this.value,o)}}remove(e){if(Ce(e))return this.children.isEmpty()?new Je(null):new Je(null,this.children);{const n=Pe(e),r=this.children.get(n);if(r){const s=r.remove(Ze(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Je(null):new Je(this.value,i)}else return this}}get(e){if(Ce(e))return this.value;{const n=Pe(e),r=this.children.get(n);return r?r.get(Ze(e)):null}}setTree(e,n){if(Ce(e))return n;{const r=Pe(e),i=(this.children.get(r)||new Je(null)).setTree(Ze(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Je(this.value,o)}}fold(e){return this.fold_(He(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(wt(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,He(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Ce(e))return null;{const i=Pe(e),o=this.children.get(i);return o?o.findOnPath_(Ze(e),wt(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,He(),n)}foreachOnPath_(e,n,r){if(Ce(e))return this;{this.value&&r(n,this.value);const s=Pe(e),i=this.children.get(s);return i?i.foreachOnPath_(Ze(e),wt(n,s),r):new Je(null)}}foreach(e){this.foreach_(He(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(wt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.writeTree_=e}static empty(){return new zn(new Je(null))}}function fl(t,e,n){if(Ce(e))return new zn(new Je(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=kn(s,e);return i=i.updateChild(o,n),new zn(t.writeTree_.set(s,i))}else{const s=new Je(n),i=t.writeTree_.setTree(e,s);return new zn(i)}}}function jE(t,e,n){let r=t;return Fn(n,(s,i)=>{r=fl(r,wt(e,s),i)}),r}function qE(t,e){if(Ce(e))return zn.empty();{const n=t.writeTree_.setTree(e,new Je(null));return new zn(n)}}function Xp(t,e){return Vi(t,e)!=null}function Vi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(kn(n.path,e)):null}function KE(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Gt,(r,s)=>{e.push(new Ne(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Ne(r,s.value))}),e}function Ps(t,e){if(Ce(e))return t;{const n=Vi(t,e);return n!=null?new zn(new Je(n)):new zn(t.writeTree_.subtree(e))}}function Jp(t){return t.writeTree_.isEmpty()}function Fo(t,e){return QC(He(),t.writeTree_,e)}function QC(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(ne(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=QC(wt(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(wt(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(t,e){return nS(e,t)}function zF(t,e,n,r,s){ne(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=fl(t.visibleWrites,e,n)),t.lastWriteId=r}function YF(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function QF(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ne(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&XF(a,r.path)?s=!1:qn(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return JF(t),!0;if(r.snap)t.visibleWrites=qE(t.visibleWrites,r.path);else{const a=r.children;Fn(a,l=>{t.visibleWrites=qE(t.visibleWrites,wt(r.path,l))})}return!0}else return!1}function XF(t,e){if(t.snap)return qn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&qn(wt(t.path,n),e))return!0;return!1}function JF(t){t.visibleWrites=JC(t.allWrites,ZF,He()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function ZF(t){return t.visible}function JC(t,e,n){let r=zn.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)qn(n,o)?(a=kn(n,o),r=fl(r,a,i.snap)):qn(o,n)&&(a=kn(o,n),r=fl(r,He(),i.snap.getChild(a)));else if(i.children){if(qn(n,o))a=kn(n,o),r=jE(r,a,i.children);else if(qn(o,n))if(a=kn(o,n),Ce(a))r=jE(r,He(),i.children);else{const l=Mo(i.children,Pe(a));if(l){const u=l.getChild(Ze(a));r=fl(r,He(),u)}}}else throw aa("WriteRecord should have .snap or .children")}}return r}function ZC(t,e,n,r,s){if(!r&&!s){const i=Vi(t.visibleWrites,e);if(i!=null)return i;{const o=Ps(t.visibleWrites,e);if(Jp(o))return n;if(n==null&&!Xp(o,He()))return null;{const a=n||Fe.EMPTY_NODE;return Fo(o,a)}}}else{const i=Ps(t.visibleWrites,e);if(!s&&Jp(i))return n;if(!s&&n==null&&!Xp(i,He()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(qn(u.path,e)||qn(e,u.path))},a=JC(t.allWrites,o,e),l=n||Fe.EMPTY_NODE;return Fo(a,l)}}}function eU(t,e,n){let r=Fe.EMPTY_NODE;const s=Vi(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Gt,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Ps(t.visibleWrites,e);return n.forEachChild(Gt,(o,a)=>{const l=Fo(Ps(i,new et(o)),a);r=r.updateImmediateChild(o,l)}),KE(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Ps(t.visibleWrites,e);return KE(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function tU(t,e,n,r,s){ne(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=wt(e,n);if(Xp(t.visibleWrites,i))return null;{const o=Ps(t.visibleWrites,i);return Jp(o)?s.getChild(n):Fo(o,s.getChild(n))}}function nU(t,e,n,r){const s=wt(e,n),i=Vi(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Ps(t.visibleWrites,s);return Fo(o,r.getNode().getImmediateChild(n))}else return null}function rU(t,e){return Vi(t.visibleWrites,e)}function sU(t,e,n,r,s,i,o){let a;const l=Ps(t.visibleWrites,e),u=Vi(l,He());if(u!=null)a=u;else if(n!=null)a=Fo(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],d=o.getCompare(),p=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let m=p.getNext();for(;m&&h.length<s;)d(m,r)!==0&&h.push(m),m=p.getNext();return h}else return[]}function iU(){return{visibleWrites:zn.empty(),allWrites:[],lastWriteId:-1}}function Zp(t,e,n,r){return ZC(t.writeTree,t.treePath,e,n,r)}function eS(t,e){return eU(t.writeTree,t.treePath,e)}function GE(t,e,n,r){return tU(t.writeTree,t.treePath,e,n,r)}function Th(t,e){return rU(t.writeTree,wt(t.treePath,e))}function oU(t,e,n,r,s,i){return sU(t.writeTree,t.treePath,e,n,r,s,i)}function Om(t,e,n){return nU(t.writeTree,t.treePath,e,n)}function tS(t,e){return nS(wt(t.treePath,e),t.writeTree)}function nS(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ne(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ne(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,$E(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,xF(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,MF(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,$E(r,e.snapshotNode,s.oldSnap));else throw aa("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const rS=new lU;class km{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Nm(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Om(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ii(this.viewCache_),i=oU(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}function cU(t,e){ne(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ne(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function uU(t,e,n,r,s){const i=new aU;let o,a;if(n.type===lr.OVERWRITE){const u=n;u.source.fromUser?o=eg(t,e,u.path,u.snap,r,s,i):(ne(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Ce(u.path),o=bh(t,e,u.path,u.snap,r,s,a,i))}else if(n.type===lr.MERGE){const u=n;u.source.fromUser?o=dU(t,e,u.path,u.children,r,s,i):(ne(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=tg(t,e,u.path,u.children,r,s,a,i))}else if(n.type===lr.ACK_USER_WRITE){const u=n;u.revert?o=gU(t,e,u.path,r,s,i):o=fU(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===lr.LISTEN_COMPLETE)o=pU(t,e,n.path,r,i);else throw aa("Unknown operation type: "+n.type);const l=i.getChanges();return hU(e,o,l),{viewCache:o,changes:l}}function hU(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=Qp(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(LF(Qp(e)))}}function sS(t,e,n,r,s,i){const o=e.eventCache;if(Th(r,n)!=null)return e;{let a,l;if(Ce(n))if(ne(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Ii(e),h=u instanceof Fe?u:Fe.EMPTY_NODE,d=eS(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const u=Zp(r,Ii(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=Pe(n);if(u===".priority"){ne(xs(n)===1,"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const d=GE(r,n,h,l);d!=null?a=t.filter.updatePriority(h,d):a=o.getNode()}else{const h=Ze(n);let d;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const p=GE(r,n,o.getNode(),l);p!=null?d=o.getNode().getImmediateChild(u).updateChild(h,p):d=o.getNode().getImmediateChild(u)}else d=Om(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,h,s,i):a=o.getNode()}}return dl(e,a,o.isFullyInitialized()||Ce(n),t.filter.filtersNodes())}}function bh(t,e,n,r,s,i,o,a){const l=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(Ce(n))u=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const m=l.getNode().updateChild(n,r);u=h.updateFullNode(l.getNode(),m,null)}else{const m=Pe(n);if(!l.isCompleteForPath(n)&&xs(n)>1)return e;const _=Ze(n),P=l.getNode().getImmediateChild(m).updateChild(_,r);m===".priority"?u=h.updatePriority(l.getNode(),P):u=h.updateChild(l.getNode(),m,P,_,rS,null)}const d=YC(e,u,l.isFullyInitialized()||Ce(n),h.filtersNodes()),p=new km(s,d,i);return sS(t,d,n,s,p,a)}function eg(t,e,n,r,s,i,o){const a=e.eventCache;let l,u;const h=new km(s,e,i);if(Ce(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=dl(e,u,!0,t.filter.filtersNodes());else{const d=Pe(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=dl(e,u,a.isFullyInitialized(),a.isFiltered());else{const p=Ze(n),m=a.getNode().getImmediateChild(d);let _;if(Ce(p))_=r;else{const w=h.getCompleteChild(d);w!=null?LC(p)===".priority"&&w.getChild(xC(p)).isEmpty()?_=w:_=w.updateChild(p,r):_=Fe.EMPTY_NODE}if(m.equals(_))l=e;else{const w=t.filter.updateChild(a.getNode(),d,_,p,h,o);l=dl(e,w,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function zE(t,e){return t.eventCache.isCompleteForChild(e)}function dU(t,e,n,r,s,i,o){let a=e;return r.foreach((l,u)=>{const h=wt(n,l);zE(e,Pe(h))&&(a=eg(t,a,h,u,s,i,o))}),r.foreach((l,u)=>{const h=wt(n,l);zE(e,Pe(h))||(a=eg(t,a,h,u,s,i,o))}),a}function YE(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function tg(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;Ce(n)?u=r:u=new Je(null).setTree(n,r);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,p)=>{if(h.hasChild(d)){const m=e.serverCache.getNode().getImmediateChild(d),_=YE(t,m,p);l=bh(t,l,new et(d),_,s,i,o,a)}}),u.children.inorderTraversal((d,p)=>{const m=!e.serverCache.isCompleteForChild(d)&&p.value===null;if(!h.hasChild(d)&&!m){const _=e.serverCache.getNode().getImmediateChild(d),w=YE(t,_,p);l=bh(t,l,new et(d),w,s,i,o,a)}}),l}function fU(t,e,n,r,s,i,o){if(Th(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Ce(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return bh(t,e,n,l.getNode().getChild(n),s,i,a,o);if(Ce(n)){let u=new Je(null);return l.getNode().forEachChild(Po,(h,d)=>{u=u.set(new et(h),d)}),tg(t,e,n,u,s,i,a,o)}else return e}else{let u=new Je(null);return r.foreach((h,d)=>{const p=wt(n,h);l.isCompleteForPath(p)&&(u=u.set(h,l.getNode().getChild(p)))}),tg(t,e,n,u,s,i,a,o)}}function pU(t,e,n,r,s){const i=e.serverCache,o=YC(e,i.getNode(),i.isFullyInitialized()||Ce(n),i.isFiltered());return sS(t,o,n,r,rS,s)}function gU(t,e,n,r,s,i){let o;if(Th(r,n)!=null)return e;{const a=new km(r,e,s),l=e.eventCache.getNode();let u;if(Ce(n)||Pe(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Zp(r,Ii(e));else{const d=e.serverCache.getNode();ne(d instanceof Fe,"serverChildren would be complete if leaf node"),h=eS(r,d)}h=h,u=t.filter.updateFullNode(l,h,i)}else{const h=Pe(n);let d=Om(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=l.getImmediateChild(h)),d!=null?u=t.filter.updateChild(l,h,d,Ze(n),a,i):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(l,h,Fe.EMPTY_NODE,Ze(n),a,i):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Zp(r,Ii(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||Th(r,He())!=null,dl(e,u,o,t.filter.filtersNodes())}}function mU(t,e){const n=Ii(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ce(e)&&!n.getImmediateChild(Pe(e)).isEmpty())?n.getChild(e):null}function QE(t,e,n,r){e.type===lr.MERGE&&e.source.queryId!==null&&(ne(Ii(t.viewCache_),"We should always have a full cache before handling merges"),ne(Qp(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=uU(t.processor_,s,e,n,r);return cU(t.processor_,i.viewCache),ne(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,_U(t,i.changes,i.viewCache.eventCache.getNode())}function _U(t,e,n,r){const s=t.eventRegistrations_;return jF(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XE;function yU(t){ne(!XE,"__referenceConstructor has already been defined"),XE=t}function Dm(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return ne(i!=null,"SyncTree gave us an op for an invalid query."),QE(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(QE(o,e,n,r));return i}}function Lm(t,e){let n=null;for(const r of t.views.values())n=n||mU(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JE;function vU(t){ne(!JE,"__referenceConstructor has already been defined"),JE=t}class ZE{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Je(null),this.pendingWriteTree_=iU(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function EU(t,e,n,r,s){return zF(t.pendingWriteTree_,e,n,r,s),s?Ed(t,new Ai(qC(),e,n)):[]}function _o(t,e,n=!1){const r=YF(t.pendingWriteTree_,e);if(QF(t.pendingWriteTree_,e)){let i=new Je(null);return r.snap!=null?i=i.set(He(),!0):Fn(r.children,o=>{i=i.set(new et(o),!0)}),Ed(t,new Eh(r.path,i,n))}else return[]}function vd(t,e,n){return Ed(t,new Ai(KC(),e,n))}function TU(t,e,n){const r=Je.fromObject(n);return Ed(t,new Vl(KC(),e,r))}function bU(t,e,n,r){const s=lS(t,r);if(s!=null){const i=cS(s),o=i.path,a=i.queryId,l=kn(o,e),u=new Ai(GC(a),l,n);return uS(t,o,u)}else return[]}function wU(t,e,n,r){const s=lS(t,r);if(s){const i=cS(s),o=i.path,a=i.queryId,l=kn(o,e),u=Je.fromObject(n),h=new Vl(GC(a),l,u);return uS(t,o,h)}else return[]}function iS(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=kn(o,e),u=Lm(a,l);if(u)return u});return ZC(s,e,i,n,!0)}function Ed(t,e){return oS(e,t.syncPointTree_,null,XC(t.pendingWriteTree_,He()))}function oS(t,e,n,r){if(Ce(t.path))return aS(t,e,n,r);{const s=e.get(He());n==null&&s!=null&&(n=Lm(s,He()));let i=[];const o=Pe(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,h=tS(r,o);i=i.concat(oS(a,l,u,h))}return s&&(i=i.concat(Dm(s,t,r,n))),i}}function aS(t,e,n,r){const s=e.get(He());n==null&&s!=null&&(n=Lm(s,He()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=tS(r,o),h=t.operationForChild(o);h&&(i=i.concat(aS(h,a,l,u)))}),s&&(i=i.concat(Dm(s,t,r,n))),i}function lS(t,e){return t.tagToQueryMap.get(e)}function cS(t){const e=t.indexOf("$");return ne(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new et(t.substr(0,e))}}function uS(t,e,n){const r=t.syncPointTree_.get(e);ne(r,"Missing sync point for query tag that we're tracking");const s=XC(t.pendingWriteTree_,e);return Dm(r,n,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Mm(n)}node(){return this.node_}}class xm{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=wt(this.path_,e);return new xm(this.syncTree_,n)}node(){return iS(this.syncTree_,this.path_)}}const AU=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},eT=function(t,e,n){if(!t||typeof t!="object")return t;if(ne(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return IU(t[".sv"],e,n);if(typeof t[".sv"]=="object")return CU(t[".sv"],e);ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},IU=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ne(!1,"Unexpected server value: "+t)}},CU=function(t,e,n){t.hasOwnProperty("increment")||ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ne(!1,"Unexpected increment value: "+r);const s=e.node();if(ne(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},SU=function(t,e,n,r){return Vm(e,new xm(n,t),r)},RU=function(t,e,n){return Vm(t,new Mm(e),n)};function Vm(t,e,n){const r=t.getPriority().val(),s=eT(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=eT(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Tt(a,jt(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Tt(s))),o.forEachChild(Gt,(a,l)=>{const u=Vm(l,e.getImmediateChild(a),n);u!==l&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Um(t,e){let n=e instanceof et?e:new et(e),r=t,s=Pe(n);for(;s!==null;){const i=Mo(r.node.children,s)||{children:{},childCount:0};r=new Fm(s,r,i),n=Ze(n),s=Pe(n)}return r}function da(t){return t.node.value}function hS(t,e){t.node.value=e,ng(t)}function dS(t){return t.node.childCount>0}function PU(t){return da(t)===void 0&&!dS(t)}function Td(t,e){Fn(t.node.children,(n,r)=>{e(new Fm(n,t,r))})}function fS(t,e,n,r){n&&!r&&e(t),Td(t,s=>{fS(s,e,!0,r)}),n&&r&&e(t)}function NU(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function gc(t){return new et(t.parent===null?t.name:gc(t.parent)+"/"+t.name)}function ng(t){t.parent!==null&&OU(t.parent,t.name,t)}function OU(t,e,n){const r=PU(n),s=Jr(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,ng(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,ng(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU=/[\[\].#$\/\u0000-\u001F\u007F]/,DU=/[\[\].#$\u0000-\u001F\u007F]/,$f=10*1024*1024,pS=function(t){return typeof t=="string"&&t.length!==0&&!kU.test(t)},LU=function(t){return typeof t=="string"&&t.length!==0&&!DU.test(t)},MU=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),LU(t)},gS=function(t,e,n){const r=n instanceof et?new pF(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ai(r));if(typeof e=="function")throw new Error(t+"contains a function "+ai(r)+" with contents = "+e.toString());if(pC(e))throw new Error(t+"contains "+e.toString()+" "+ai(r));if(typeof e=="string"&&e.length>$f/3&&fd(e)>$f)throw new Error(t+"contains a string greater than "+$f+" utf8 bytes "+ai(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Fn(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!pS(o)))throw new Error(t+" contains an invalid key ("+o+") "+ai(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);gF(r,o),gS(t,a,r),mF(r)}),s&&i)throw new Error(t+' contains ".value" child '+ai(r)+" in addition to actual children.")}},xU=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!pS(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!MU(n))throw new Error(SL(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function FU(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!VC(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function Fi(t,e,n){FU(t,n),UU(t,r=>qn(r,e)||qn(e,r))}function UU(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?($U(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function $U(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ul&&Wt("event: "+n.toString()),fc(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU="repo_interrupt",HU=25;class WU{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new VU,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vh(),this.transactionQueueTree_=new Fm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jU(t,e,n){if(t.stats_=Im(t.repoInfo_),t.forceRestClient_||FV())t.server_=new yh(t.repoInfo_,(r,s,i,o)=>{tT(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>nT(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Rt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Br(t.repoInfo_,e,(r,s,i,o)=>{tT(t,r,s,i,o)},r=>{nT(t,r)},r=>{KU(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=jV(t.repoInfo_,()=>new WF(t.stats_,t.server_)),t.infoData_=new FF,t.infoSyncTree_=new ZE({startListening:(r,s,i,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=vd(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),$m(t,"connected",!1),t.serverSyncTree_=new ZE({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,l)=>{const u=o(a,l);Fi(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function qU(t){const n=t.infoData_.getNode(new et(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function mS(t){return AU({timestamp:qU(t)})}function tT(t,e,n,r,s){t.dataUpdateCount++;const i=new et(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const l=oh(n,u=>jt(u));o=wU(t.serverSyncTree_,i,l,s)}else{const l=jt(n);o=bU(t.serverSyncTree_,i,l,s)}else if(r){const l=oh(n,u=>jt(u));o=TU(t.serverSyncTree_,i,l)}else{const l=jt(n);o=vd(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=Hm(t,i)),Fi(t.eventQueue_,a,o)}function nT(t,e){$m(t,"connected",e),e===!1&&zU(t)}function KU(t,e){Fn(e,(n,r)=>{$m(t,n,r)})}function $m(t,e,n){const r=new et("/.info/"+e),s=jt(n);t.infoData_.updateSnapshot(r,s);const i=vd(t.infoSyncTree_,r,s);Fi(t.eventQueue_,r,i)}function GU(t){return t.nextWriteId_++}function zU(t){_S(t,"onDisconnectEvents");const e=mS(t),n=vh();Yp(t.onDisconnect_,He(),(s,i)=>{const o=SU(s,i,t.serverSyncTree_,e);jC(n,s,o)});let r=[];Yp(n,He(),(s,i)=>{r=r.concat(vd(t.serverSyncTree_,s,i));const o=JU(t,s);Hm(t,o)}),t.onDisconnect_=vh(),Fi(t.eventQueue_,He(),r)}function YU(t){t.persistentConnection_&&t.persistentConnection_.interrupt(BU)}function _S(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Wt(n,...e)}function yS(t,e,n){return iS(t.serverSyncTree_,e,n)||Fe.EMPTY_NODE}function Bm(t,e=t.transactionQueueTree_){if(e||bd(t,e),da(e)){const n=ES(t,e);ne(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&QU(t,gc(e),n)}else dS(e)&&Td(e,n=>{Bm(t,n)})}function QU(t,e,n){const r=n.map(u=>u.currentWriteId),s=yS(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const h=n[u];ne(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=kn(e,h.path);i=i.updateChild(d,h.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,u=>{_S(t,"transaction put response",{path:l.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(_o(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&d.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();bd(t,Um(t.transactionQueueTree_,e)),Bm(t,t.transactionQueueTree_),Fi(t.eventQueue_,e,h);for(let p=0;p<d.length;p++)fc(d[p])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{In("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Hm(t,e)}},o)}function Hm(t,e){const n=vS(t,e),r=gc(n),s=ES(t,n);return XU(t,s,r),r}function XU(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=kn(n,l.path);let h=!1,d;if(ne(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)h=!0,d=l.abortReason,s=s.concat(_o(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=HU)h=!0,d="maxretry",s=s.concat(_o(t.serverSyncTree_,l.currentWriteId,!0));else{const p=yS(t,l.path,o);l.currentInputSnapshot=p;const m=e[a].update(p.val());if(m!==void 0){gS("transaction failed: Data returned ",m,l.path);let _=jt(m);typeof m=="object"&&m!=null&&Jr(m,".priority")||(_=_.updatePriority(p.getPriority()));const P=l.currentWriteId,D=mS(t),k=RU(_,p,D);l.currentOutputSnapshotRaw=_,l.currentOutputSnapshotResolved=k,l.currentWriteId=GU(t),o.splice(o.indexOf(P),1),s=s.concat(EU(t.serverSyncTree_,l.path,k,l.currentWriteId,l.applyLocally)),s=s.concat(_o(t.serverSyncTree_,P,!0))}else h=!0,d="nodata",s=s.concat(_o(t.serverSyncTree_,l.currentWriteId,!0))}Fi(t.eventQueue_,n,s),s=[],h&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}bd(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)fc(r[a]);Bm(t,t.transactionQueueTree_)}function vS(t,e){let n,r=t.transactionQueueTree_;for(n=Pe(e);n!==null&&da(r)===void 0;)r=Um(r,n),e=Ze(e),n=Pe(e);return r}function ES(t,e){const n=[];return TS(t,e,n),n.sort((r,s)=>r.order-s.order),n}function TS(t,e,n){const r=da(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Td(e,s=>{TS(t,s,n)})}function bd(t,e){const n=da(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,hS(e,n.length>0?n:void 0)}Td(e,r=>{bd(t,r)})}function JU(t,e){const n=gc(vS(t,e)),r=Um(t.transactionQueueTree_,e);return NU(r,s=>{Bf(t,s)}),Bf(t,r),fS(r,s=>{Bf(t,s)}),n}function Bf(t,e){const n=da(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ne(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(ne(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(_o(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?hS(e,void 0):n.length=i+1,Fi(t.eventQueue_,gc(e),s);for(let o=0;o<r.length;o++)fc(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function e$(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):In(`Invalid query segment '${n}' in query '${t}'`)}return e}const rT=function(t,e){const n=t$(t),r=n.namespace;n.domain==="firebase.com"&&bi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&bi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||NV();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new BV(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new et(n.pathString)}},t$=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(s=ZU(t.substring(h,d)));const p=e$(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const m=e.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const _=e.indexOf(".");r=e.substring(0,_).toLowerCase(),n=e.substring(_+1),i=r}"ns"in p&&(i=p.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Ce(this._path)?null:LC(this._path)}get ref(){return new fa(this._repo,this._path)}get _queryIdentifier(){const e=HE(this._queryParams),n=wm(e);return n==="{}"?"default":n}get _queryObject(){return HE(this._queryParams)}isEqual(e){if(e=rt(e),!(e instanceof Wm))return!1;const n=this._repo===e._repo,r=VC(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+fF(this._path)}}class fa extends Wm{constructor(e,n){super(e,n,new Pm,!1)}get parent(){const e=xC(this._path);return e===null?null:new fa(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}yU(fa);vU(fa);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$="FIREBASE_DATABASE_EMULATOR_HOST",rg={};let r$=!1;function s$(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||bi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Wt("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=rT(i,s),a=o.repoInfo,l;typeof process<"u"&&wE&&(l=wE[n$]),l?(i=`http://${l}?ns=${a.namespace}`,o=rT(i,s),a=o.repoInfo):o.repoInfo.secure;const u=new $V(t.name,t.options,e);xU("Invalid Firebase Database URL",o),Ce(o.path)||bi("Database URL must point to the root of a Firebase Database (not including a child path).");const h=o$(a,t,u,new UV(t.name,n));return new a$(h,t)}function i$(t,e){const n=rg[e];(!n||n[t.key]!==t)&&bi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),YU(t),delete n[t.key]}function o$(t,e,n,r){let s=rg[e.name];s||(s={},rg[e.name]=s);let i=s[t.toURLString()];return i&&bi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new WU(t,r$,n,r),s[t.toURLString()]=i,i}class a${constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(jU(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new fa(this._repo,He())),this._rootInternal}_delete(){return this._rootInternal!==null&&(i$(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&bi("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l$(t){AV(Gs),Er(new Qn("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return s$(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),An(AE,IE,t),An(AE,IE,"esm2017")}Br.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Br.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};l$();var sT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mi,bS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,v){function y(){}y.prototype=v.prototype,A.D=v.prototype,A.prototype=new y,A.prototype.constructor=A,A.C=function(T,N,R){for(var I=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)I[fe-2]=arguments[fe];return v.prototype[N].apply(T,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,v,y){y||(y=0);var T=Array(16);if(typeof v=="string")for(var N=0;16>N;++N)T[N]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(N=0;16>N;++N)T[N]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=A.g[0],y=A.g[1],N=A.g[2];var R=A.g[3],I=v+(R^y&(N^R))+T[0]+3614090360&4294967295;v=y+(I<<7&4294967295|I>>>25),I=R+(N^v&(y^N))+T[1]+3905402710&4294967295,R=v+(I<<12&4294967295|I>>>20),I=N+(y^R&(v^y))+T[2]+606105819&4294967295,N=R+(I<<17&4294967295|I>>>15),I=y+(v^N&(R^v))+T[3]+3250441966&4294967295,y=N+(I<<22&4294967295|I>>>10),I=v+(R^y&(N^R))+T[4]+4118548399&4294967295,v=y+(I<<7&4294967295|I>>>25),I=R+(N^v&(y^N))+T[5]+1200080426&4294967295,R=v+(I<<12&4294967295|I>>>20),I=N+(y^R&(v^y))+T[6]+2821735955&4294967295,N=R+(I<<17&4294967295|I>>>15),I=y+(v^N&(R^v))+T[7]+4249261313&4294967295,y=N+(I<<22&4294967295|I>>>10),I=v+(R^y&(N^R))+T[8]+1770035416&4294967295,v=y+(I<<7&4294967295|I>>>25),I=R+(N^v&(y^N))+T[9]+2336552879&4294967295,R=v+(I<<12&4294967295|I>>>20),I=N+(y^R&(v^y))+T[10]+4294925233&4294967295,N=R+(I<<17&4294967295|I>>>15),I=y+(v^N&(R^v))+T[11]+2304563134&4294967295,y=N+(I<<22&4294967295|I>>>10),I=v+(R^y&(N^R))+T[12]+1804603682&4294967295,v=y+(I<<7&4294967295|I>>>25),I=R+(N^v&(y^N))+T[13]+4254626195&4294967295,R=v+(I<<12&4294967295|I>>>20),I=N+(y^R&(v^y))+T[14]+2792965006&4294967295,N=R+(I<<17&4294967295|I>>>15),I=y+(v^N&(R^v))+T[15]+1236535329&4294967295,y=N+(I<<22&4294967295|I>>>10),I=v+(N^R&(y^N))+T[1]+4129170786&4294967295,v=y+(I<<5&4294967295|I>>>27),I=R+(y^N&(v^y))+T[6]+3225465664&4294967295,R=v+(I<<9&4294967295|I>>>23),I=N+(v^y&(R^v))+T[11]+643717713&4294967295,N=R+(I<<14&4294967295|I>>>18),I=y+(R^v&(N^R))+T[0]+3921069994&4294967295,y=N+(I<<20&4294967295|I>>>12),I=v+(N^R&(y^N))+T[5]+3593408605&4294967295,v=y+(I<<5&4294967295|I>>>27),I=R+(y^N&(v^y))+T[10]+38016083&4294967295,R=v+(I<<9&4294967295|I>>>23),I=N+(v^y&(R^v))+T[15]+3634488961&4294967295,N=R+(I<<14&4294967295|I>>>18),I=y+(R^v&(N^R))+T[4]+3889429448&4294967295,y=N+(I<<20&4294967295|I>>>12),I=v+(N^R&(y^N))+T[9]+568446438&4294967295,v=y+(I<<5&4294967295|I>>>27),I=R+(y^N&(v^y))+T[14]+3275163606&4294967295,R=v+(I<<9&4294967295|I>>>23),I=N+(v^y&(R^v))+T[3]+4107603335&4294967295,N=R+(I<<14&4294967295|I>>>18),I=y+(R^v&(N^R))+T[8]+1163531501&4294967295,y=N+(I<<20&4294967295|I>>>12),I=v+(N^R&(y^N))+T[13]+2850285829&4294967295,v=y+(I<<5&4294967295|I>>>27),I=R+(y^N&(v^y))+T[2]+4243563512&4294967295,R=v+(I<<9&4294967295|I>>>23),I=N+(v^y&(R^v))+T[7]+1735328473&4294967295,N=R+(I<<14&4294967295|I>>>18),I=y+(R^v&(N^R))+T[12]+2368359562&4294967295,y=N+(I<<20&4294967295|I>>>12),I=v+(y^N^R)+T[5]+4294588738&4294967295,v=y+(I<<4&4294967295|I>>>28),I=R+(v^y^N)+T[8]+2272392833&4294967295,R=v+(I<<11&4294967295|I>>>21),I=N+(R^v^y)+T[11]+1839030562&4294967295,N=R+(I<<16&4294967295|I>>>16),I=y+(N^R^v)+T[14]+4259657740&4294967295,y=N+(I<<23&4294967295|I>>>9),I=v+(y^N^R)+T[1]+2763975236&4294967295,v=y+(I<<4&4294967295|I>>>28),I=R+(v^y^N)+T[4]+1272893353&4294967295,R=v+(I<<11&4294967295|I>>>21),I=N+(R^v^y)+T[7]+4139469664&4294967295,N=R+(I<<16&4294967295|I>>>16),I=y+(N^R^v)+T[10]+3200236656&4294967295,y=N+(I<<23&4294967295|I>>>9),I=v+(y^N^R)+T[13]+681279174&4294967295,v=y+(I<<4&4294967295|I>>>28),I=R+(v^y^N)+T[0]+3936430074&4294967295,R=v+(I<<11&4294967295|I>>>21),I=N+(R^v^y)+T[3]+3572445317&4294967295,N=R+(I<<16&4294967295|I>>>16),I=y+(N^R^v)+T[6]+76029189&4294967295,y=N+(I<<23&4294967295|I>>>9),I=v+(y^N^R)+T[9]+3654602809&4294967295,v=y+(I<<4&4294967295|I>>>28),I=R+(v^y^N)+T[12]+3873151461&4294967295,R=v+(I<<11&4294967295|I>>>21),I=N+(R^v^y)+T[15]+530742520&4294967295,N=R+(I<<16&4294967295|I>>>16),I=y+(N^R^v)+T[2]+3299628645&4294967295,y=N+(I<<23&4294967295|I>>>9),I=v+(N^(y|~R))+T[0]+4096336452&4294967295,v=y+(I<<6&4294967295|I>>>26),I=R+(y^(v|~N))+T[7]+1126891415&4294967295,R=v+(I<<10&4294967295|I>>>22),I=N+(v^(R|~y))+T[14]+2878612391&4294967295,N=R+(I<<15&4294967295|I>>>17),I=y+(R^(N|~v))+T[5]+4237533241&4294967295,y=N+(I<<21&4294967295|I>>>11),I=v+(N^(y|~R))+T[12]+1700485571&4294967295,v=y+(I<<6&4294967295|I>>>26),I=R+(y^(v|~N))+T[3]+2399980690&4294967295,R=v+(I<<10&4294967295|I>>>22),I=N+(v^(R|~y))+T[10]+4293915773&4294967295,N=R+(I<<15&4294967295|I>>>17),I=y+(R^(N|~v))+T[1]+2240044497&4294967295,y=N+(I<<21&4294967295|I>>>11),I=v+(N^(y|~R))+T[8]+1873313359&4294967295,v=y+(I<<6&4294967295|I>>>26),I=R+(y^(v|~N))+T[15]+4264355552&4294967295,R=v+(I<<10&4294967295|I>>>22),I=N+(v^(R|~y))+T[6]+2734768916&4294967295,N=R+(I<<15&4294967295|I>>>17),I=y+(R^(N|~v))+T[13]+1309151649&4294967295,y=N+(I<<21&4294967295|I>>>11),I=v+(N^(y|~R))+T[4]+4149444226&4294967295,v=y+(I<<6&4294967295|I>>>26),I=R+(y^(v|~N))+T[11]+3174756917&4294967295,R=v+(I<<10&4294967295|I>>>22),I=N+(v^(R|~y))+T[2]+718787259&4294967295,N=R+(I<<15&4294967295|I>>>17),I=y+(R^(N|~v))+T[9]+3951481745&4294967295,A.g[0]=A.g[0]+v&4294967295,A.g[1]=A.g[1]+(N+(I<<21&4294967295|I>>>11))&4294967295,A.g[2]=A.g[2]+N&4294967295,A.g[3]=A.g[3]+R&4294967295}r.prototype.u=function(A,v){v===void 0&&(v=A.length);for(var y=v-this.blockSize,T=this.B,N=this.h,R=0;R<v;){if(N==0)for(;R<=y;)s(this,A,R),R+=this.blockSize;if(typeof A=="string"){for(;R<v;)if(T[N++]=A.charCodeAt(R++),N==this.blockSize){s(this,T),N=0;break}}else for(;R<v;)if(T[N++]=A[R++],N==this.blockSize){s(this,T),N=0;break}}this.h=N,this.o+=v},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var v=1;v<A.length-8;++v)A[v]=0;var y=8*this.o;for(v=A.length-8;v<A.length;++v)A[v]=y&255,y/=256;for(this.u(A),A=Array(16),v=y=0;4>v;++v)for(var T=0;32>T;T+=8)A[y++]=this.g[v]>>>T&255;return A};function i(A,v){var y=a;return Object.prototype.hasOwnProperty.call(y,A)?y[A]:y[A]=v(A)}function o(A,v){this.h=v;for(var y=[],T=!0,N=A.length-1;0<=N;N--){var R=A[N]|0;T&&R==v||(y[N]=R,T=!1)}this.g=y}var a={};function l(A){return-128<=A&&128>A?i(A,function(v){return new o([v|0],0>v?-1:0)}):new o([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return d;if(0>A)return P(u(-A));for(var v=[],y=1,T=0;A>=y;T++)v[T]=A/y|0,y*=4294967296;return new o(v,0)}function h(A,v){if(A.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(A.charAt(0)=="-")return P(h(A.substring(1),v));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=u(Math.pow(v,8)),T=d,N=0;N<A.length;N+=8){var R=Math.min(8,A.length-N),I=parseInt(A.substring(N,N+R),v);8>R?(R=u(Math.pow(v,R)),T=T.j(R).add(u(I))):(T=T.j(y),T=T.add(u(I)))}return T}var d=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-P(this).m();for(var A=0,v=1,y=0;y<this.g.length;y++){var T=this.i(y);A+=(0<=T?T:4294967296+T)*v,v*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(_(this))return"0";if(w(this))return"-"+P(this).toString(A);for(var v=u(Math.pow(A,6)),y=this,T="";;){var N=C(y,v).g;y=D(y,N.j(v));var R=((0<y.g.length?y.g[0]:y.h)>>>0).toString(A);if(y=N,_(y))return R+T;for(;6>R.length;)R="0"+R;T=R+T}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function _(A){if(A.h!=0)return!1;for(var v=0;v<A.g.length;v++)if(A.g[v]!=0)return!1;return!0}function w(A){return A.h==-1}t.l=function(A){return A=D(this,A),w(A)?-1:_(A)?0:1};function P(A){for(var v=A.g.length,y=[],T=0;T<v;T++)y[T]=~A.g[T];return new o(y,~A.h).add(p)}t.abs=function(){return w(this)?P(this):this},t.add=function(A){for(var v=Math.max(this.g.length,A.g.length),y=[],T=0,N=0;N<=v;N++){var R=T+(this.i(N)&65535)+(A.i(N)&65535),I=(R>>>16)+(this.i(N)>>>16)+(A.i(N)>>>16);T=I>>>16,R&=65535,I&=65535,y[N]=I<<16|R}return new o(y,y[y.length-1]&-2147483648?-1:0)};function D(A,v){return A.add(P(v))}t.j=function(A){if(_(this)||_(A))return d;if(w(this))return w(A)?P(this).j(P(A)):P(P(this).j(A));if(w(A))return P(this.j(P(A)));if(0>this.l(m)&&0>A.l(m))return u(this.m()*A.m());for(var v=this.g.length+A.g.length,y=[],T=0;T<2*v;T++)y[T]=0;for(T=0;T<this.g.length;T++)for(var N=0;N<A.g.length;N++){var R=this.i(T)>>>16,I=this.i(T)&65535,fe=A.i(N)>>>16,Ee=A.i(N)&65535;y[2*T+2*N]+=I*Ee,k(y,2*T+2*N),y[2*T+2*N+1]+=R*Ee,k(y,2*T+2*N+1),y[2*T+2*N+1]+=I*fe,k(y,2*T+2*N+1),y[2*T+2*N+2]+=R*fe,k(y,2*T+2*N+2)}for(T=0;T<v;T++)y[T]=y[2*T+1]<<16|y[2*T];for(T=v;T<2*v;T++)y[T]=0;return new o(y,0)};function k(A,v){for(;(A[v]&65535)!=A[v];)A[v+1]+=A[v]>>>16,A[v]&=65535,v++}function b(A,v){this.g=A,this.h=v}function C(A,v){if(_(v))throw Error("division by zero");if(_(A))return new b(d,d);if(w(A))return v=C(P(A),v),new b(P(v.g),P(v.h));if(w(v))return v=C(A,P(v)),new b(P(v.g),v.h);if(30<A.g.length){if(w(A)||w(v))throw Error("slowDivide_ only works with positive integers.");for(var y=p,T=v;0>=T.l(A);)y=L(y),T=L(T);var N=x(y,1),R=x(T,1);for(T=x(T,2),y=x(y,2);!_(T);){var I=R.add(T);0>=I.l(A)&&(N=N.add(y),R=I),T=x(T,1),y=x(y,1)}return v=D(A,N.j(v)),new b(N,v)}for(N=d;0<=A.l(v);){for(y=Math.max(1,Math.floor(A.m()/v.m())),T=Math.ceil(Math.log(y)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),R=u(y),I=R.j(v);w(I)||0<I.l(A);)y-=T,R=u(y),I=R.j(v);_(R)&&(R=p),N=N.add(R),A=D(A,I)}return new b(N,A)}t.A=function(A){return C(this,A).h},t.and=function(A){for(var v=Math.max(this.g.length,A.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)&A.i(T);return new o(y,this.h&A.h)},t.or=function(A){for(var v=Math.max(this.g.length,A.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)|A.i(T);return new o(y,this.h|A.h)},t.xor=function(A){for(var v=Math.max(this.g.length,A.g.length),y=[],T=0;T<v;T++)y[T]=this.i(T)^A.i(T);return new o(y,this.h^A.h)};function L(A){for(var v=A.g.length+1,y=[],T=0;T<v;T++)y[T]=A.i(T)<<1|A.i(T-1)>>>31;return new o(y,A.h)}function x(A,v){var y=v>>5;v%=32;for(var T=A.g.length-y,N=[],R=0;R<T;R++)N[R]=0<v?A.i(R+y)>>>v|A.i(R+y+1)<<32-v:A.i(R+y);return new o(N,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,bS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,mi=o}).apply(typeof sT<"u"?sT:typeof self<"u"?self:typeof window<"u"?window:{});var uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wS,AS,Xa,IS,ku,sg,CS,SS,RS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,g){return c==Array.prototype||c==Object.prototype||(c[f]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof uu=="object"&&uu];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(c,f){if(f)e:{var g=r;c=c.split(".");for(var E=0;E<c.length-1;E++){var M=c[E];if(!(M in g))break e;g=g[M]}c=c[c.length-1],E=g[c],f=f(E),f!=E&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var g=0,E=!1,M={next:function(){if(!E&&g<c.length){var F=g++;return{value:f(F,c[F]),done:!1}}return E=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(c){return c||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,g){return c.call.apply(c.bind,arguments)}function d(c,f,g){if(!c)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,E),c.apply(f,M)}}return function(){return c.apply(f,arguments)}}function p(c,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),c.apply(this,E)}}function _(c,f){function g(){}g.prototype=f.prototype,c.aa=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(E,M,F){for(var Q=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)Q[qe-2]=arguments[qe];return f.prototype[M].apply(E,Q)}}function w(c){const f=c.length;if(0<f){const g=Array(f);for(let E=0;E<f;E++)g[E]=c[E];return g}return[]}function P(c,f){for(let g=1;g<arguments.length;g++){const E=arguments[g];if(l(E)){const M=c.length||0,F=E.length||0;c.length=M+F;for(let Q=0;Q<F;Q++)c[M+Q]=E[Q]}else c.push(E)}}class D{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function k(c){return/^[\s\xa0]*$/.test(c)}function b(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function C(c){return C[" "](c),c}C[" "]=function(){};var L=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function x(c,f,g){for(const E in c)f.call(g,c[E],E,c)}function A(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function v(c){const f={};for(const g in c)f[g]=c[g];return f}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,f){let g,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(g in E)c[g]=E[g];for(let F=0;F<y.length;F++)g=y[F],Object.prototype.hasOwnProperty.call(E,g)&&(c[g]=E[g])}}function N(c){var f=1;c=c.split(":");const g=[];for(;0<f&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function R(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Me;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class fe{constructor(){this.h=this.g=null}add(f,g){const E=Ee.get();E.set(f,g),this.h?this.h.next=E:this.g=E,this.h=E}}var Ee=new D(()=>new Y,c=>c.reset());class Y{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let re,oe=!1,Me=new fe,Dt=()=>{const c=a.Promise.resolve(void 0);re=()=>{c.then(Lt)}};var Lt=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(g){R(g)}var f=Ee;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}oe=!1};function Ue(){this.s=this.s,this.C=this.C}Ue.prototype.s=!1,Ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Be(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}Be.prototype.h=function(){this.defaultPrevented=!0};var Zt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return c}();function mt(c,f){if(Be.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,E=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(L){e:{try{C(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ut[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&mt.aa.h.call(this)}}_(mt,Be);var ut={2:"touch",3:"pen",4:"mouse"};mt.prototype.h=function(){mt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var U="closure_listenable_"+(1e6*Math.random()|0),ee=0;function X(c,f,g,E,M){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!E,this.ha=M,this.key=++ee,this.da=this.fa=!1}function se(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function be(c){this.src=c,this.g={},this.h=0}be.prototype.add=function(c,f,g,E,M){var F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);var Q=S(c,f,E,M);return-1<Q?(f=c[Q],g||(f.fa=!1)):(f=new X(f,this.src,F,!!E,M),f.fa=g,c.push(f)),f};function xe(c,f){var g=f.type;if(g in c.g){var E=c.g[g],M=Array.prototype.indexOf.call(E,f,void 0),F;(F=0<=M)&&Array.prototype.splice.call(E,M,1),F&&(se(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function S(c,f,g,E){for(var M=0;M<c.length;++M){var F=c[M];if(!F.da&&F.listener==f&&F.capture==!!g&&F.ha==E)return M}return-1}var O="closure_lm_"+(1e6*Math.random()|0),V={};function H(c,f,g,E,M){if(Array.isArray(f)){for(var F=0;F<f.length;F++)H(c,f[F],g,E,M);return null}return g=ue(g),c&&c[U]?c.K(f,g,u(E)?!!E.capture:!!E,M):$(c,f,g,!1,E,M)}function $(c,f,g,E,M,F){if(!f)throw Error("Invalid event type");var Q=u(M)?!!M.capture:!!M,qe=he(c);if(qe||(c[O]=qe=new be(c)),g=qe.add(f,g,E,Q,F),g.proxy)return g;if(E=q(),g.proxy=E,E.src=c,E.listener=g,c.addEventListener)Zt||(M=Q),M===void 0&&(M=!1),c.addEventListener(f.toString(),E,M);else if(c.attachEvent)c.attachEvent(z(f.toString()),E);else if(c.addListener&&c.removeListener)c.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function q(){function c(g){return f.call(c.src,c.listener,g)}const f=K;return c}function J(c,f,g,E,M){if(Array.isArray(f))for(var F=0;F<f.length;F++)J(c,f[F],g,E,M);else E=u(E)?!!E.capture:!!E,g=ue(g),c&&c[U]?(c=c.i,f=String(f).toString(),f in c.g&&(F=c.g[f],g=S(F,g,E,M),-1<g&&(se(F[g]),Array.prototype.splice.call(F,g,1),F.length==0&&(delete c.g[f],c.h--)))):c&&(c=he(c))&&(f=c.g[f.toString()],c=-1,f&&(c=S(f,g,E,M)),(g=-1<c?f[c]:null)&&G(g))}function G(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[U])xe(f.i,c);else{var g=c.type,E=c.proxy;f.removeEventListener?f.removeEventListener(g,E,c.capture):f.detachEvent?f.detachEvent(z(g),E):f.addListener&&f.removeListener&&f.removeListener(E),(g=he(f))?(xe(g,c),g.h==0&&(g.src=null,f[O]=null)):se(c)}}}function z(c){return c in V?V[c]:V[c]="on"+c}function K(c,f){if(c.da)c=!0;else{f=new mt(f,this);var g=c.listener,E=c.ha||c.src;c.fa&&G(c),c=g.call(E,f)}return c}function he(c){return c=c[O],c instanceof be?c:null}var Z="__closure_events_fn_"+(1e9*Math.random()>>>0);function ue(c){return typeof c=="function"?c:(c[Z]||(c[Z]=function(f){return c.handleEvent(f)}),c[Z])}function ie(){Ue.call(this),this.i=new be(this),this.M=this,this.F=null}_(ie,Ue),ie.prototype[U]=!0,ie.prototype.removeEventListener=function(c,f,g,E){J(this,c,f,g,E)};function pe(c,f){var g,E=c.F;if(E)for(g=[];E;E=E.F)g.push(E);if(c=c.M,E=f.type||f,typeof f=="string")f=new Be(f,c);else if(f instanceof Be)f.target=f.target||c;else{var M=f;f=new Be(E,c),T(f,M)}if(M=!0,g)for(var F=g.length-1;0<=F;F--){var Q=f.g=g[F];M=Se(Q,E,!0,f)&&M}if(Q=f.g=c,M=Se(Q,E,!0,f)&&M,M=Se(Q,E,!1,f)&&M,g)for(F=0;F<g.length;F++)Q=f.g=g[F],M=Se(Q,E,!1,f)&&M}ie.prototype.N=function(){if(ie.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var g=c.g[f],E=0;E<g.length;E++)se(g[E]);delete c.g[f],c.h--}}this.F=null},ie.prototype.K=function(c,f,g,E){return this.i.add(String(c),f,!1,g,E)},ie.prototype.L=function(c,f,g,E){return this.i.add(String(c),f,!0,g,E)};function Se(c,f,g,E){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,F=0;F<f.length;++F){var Q=f[F];if(Q&&!Q.da&&Q.capture==g){var qe=Q.listener,Ct=Q.ha||Q.src;Q.fa&&xe(c.i,Q),M=qe.call(Ct,E)!==!1&&M}}return M&&!E.defaultPrevented}function ke(c,f,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function Mt(c){c.g=ke(()=>{c.g=null,c.i&&(c.i=!1,Mt(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class At extends Ue{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Mt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function It(c){Ue.call(this),this.h=c,this.g={}}_(It,Ue);var xt=[];function es(c){x(c.g,function(f,g){this.g.hasOwnProperty(g)&&G(f)},c),c.g={}}It.prototype.N=function(){It.aa.N.call(this),es(this)},It.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qi=a.JSON.stringify,en=a.JSON.parse,Nn=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ki(){}Ki.prototype.h=null;function sy(c){return c.h||(c.h=c.i())}function iy(){}var Ea={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ef(){Be.call(this,"d")}_(ef,Be);function tf(){Be.call(this,"c")}_(tf,Be);var ei={},oy=null;function Pc(){return oy=oy||new ie}ei.La="serverreachability";function ay(c){Be.call(this,ei.La,c)}_(ay,Be);function Ta(c){const f=Pc();pe(f,new ay(f))}ei.STAT_EVENT="statevent";function ly(c,f){Be.call(this,ei.STAT_EVENT,c),this.stat=f}_(ly,Be);function tn(c){const f=Pc();pe(f,new ly(f,c))}ei.Ma="timingevent";function cy(c,f){Be.call(this,ei.Ma,c),this.size=f}_(cy,Be);function ba(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function wa(){this.g=!0}wa.prototype.xa=function(){this.g=!1};function AP(c,f,g,E,M,F){c.info(function(){if(c.g)if(F)for(var Q="",qe=F.split("&"),Ct=0;Ct<qe.length;Ct++){var De=qe[Ct].split("=");if(1<De.length){var Vt=De[0];De=De[1];var Ft=Vt.split("_");Q=2<=Ft.length&&Ft[1]=="type"?Q+(Vt+"="+De+"&"):Q+(Vt+"=redacted&")}}else Q=null;else Q=F;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+f+`
`+g+`
`+Q})}function IP(c,f,g,E,M,F,Q){c.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+f+`
`+g+`
`+F+" "+Q})}function Gi(c,f,g,E){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+SP(c,g)+(E?" "+E:"")})}function CP(c,f){c.info(function(){return"TIMEOUT: "+f})}wa.prototype.info=function(){};function SP(c,f){if(!c.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var E=g[c];if(!(2>E.length)){var M=E[1];if(Array.isArray(M)&&!(1>M.length)){var F=M[0];if(F!="noop"&&F!="stop"&&F!="close")for(var Q=1;Q<M.length;Q++)M[Q]=""}}}}return qi(g)}catch{return f}}var Nc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},uy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nf;function Oc(){}_(Oc,Ki),Oc.prototype.g=function(){return new XMLHttpRequest},Oc.prototype.i=function(){return{}},nf=new Oc;function ts(c,f,g,E){this.j=c,this.i=f,this.l=g,this.R=E||1,this.U=new It(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hy}function hy(){this.i=null,this.g="",this.h=!1}var dy={},rf={};function sf(c,f,g){c.L=1,c.v=Mc(Ir(f)),c.m=g,c.P=!0,fy(c,null)}function fy(c,f){c.F=Date.now(),kc(c),c.A=Ir(c.v);var g=c.A,E=c.R;Array.isArray(E)||(E=[String(E)]),Sy(g.i,"t",E),c.C=0,g=c.j.J,c.h=new hy,c.g=qy(c.j,g?f:null,!c.m),0<c.O&&(c.M=new At(p(c.Y,c,c.g),c.O)),f=c.U,g=c.g,E=c.ca;var M="readystatechange";Array.isArray(M)||(M&&(xt[0]=M.toString()),M=xt);for(var F=0;F<M.length;F++){var Q=H(g,M[F],E||f.handleEvent,!1,f.h||f);if(!Q)break;f.g[Q.key]=Q}f=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),Ta(),AP(c.i,c.u,c.A,c.l,c.R,c.m)}ts.prototype.ca=function(c){c=c.target;const f=this.M;f&&Cr(c)==3?f.j():this.Y(c)},ts.prototype.Y=function(c){try{if(c==this.g)e:{const Ft=Cr(this.g);var f=this.g.Ba();const Qi=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||Ly(this.g)))){this.J||Ft!=4||f==7||(f==8||0>=Qi?Ta(3):Ta(2)),of(this);var g=this.g.Z();this.X=g;t:if(py(this)){var E=Ly(this.g);c="";var M=E.length,F=Cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ti(this),Aa(this);var Q="";break t}this.h.i=new a.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,c+=this.h.i.decode(E[f],{stream:!(F&&f==M-1)});E.length=0,this.h.g+=c,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=g==200,IP(this.i,this.u,this.A,this.l,this.R,Ft,g),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Ct=this.g;if((qe=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(qe)){var De=qe;break t}}De=null}if(g=De)Gi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,af(this,g);else{this.o=!1,this.s=3,tn(12),ti(this),Aa(this);break e}}if(this.P){g=!0;let Hn;for(;!this.J&&this.C<Q.length;)if(Hn=RP(this,Q),Hn==rf){Ft==4&&(this.s=4,tn(14),g=!1),Gi(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==dy){this.s=4,tn(15),Gi(this.i,this.l,Q,"[Invalid Chunk]"),g=!1;break}else Gi(this.i,this.l,Hn,null),af(this,Hn);if(py(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||Q.length!=0||this.h.h||(this.s=1,tn(16),g=!1),this.o=this.o&&g,!g)Gi(this.i,this.l,Q,"[Invalid Chunked Response]"),ti(this),Aa(this);else if(0<Q.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),ff(Vt),Vt.M=!0,tn(11))}}else Gi(this.i,this.l,Q,null),af(this,Q);Ft==4&&ti(this),this.o&&!this.J&&(Ft==4?By(this.j,this):(this.o=!1,kc(this)))}else qP(this.g),g==400&&0<Q.indexOf("Unknown SID")?(this.s=3,tn(12)):(this.s=0,tn(13)),ti(this),Aa(this)}}}catch{}finally{}};function py(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function RP(c,f){var g=c.C,E=f.indexOf(`
`,g);return E==-1?rf:(g=Number(f.substring(g,E)),isNaN(g)?dy:(E+=1,E+g>f.length?rf:(f=f.slice(E,E+g),c.C=E+g,f)))}ts.prototype.cancel=function(){this.J=!0,ti(this)};function kc(c){c.S=Date.now()+c.I,gy(c,c.I)}function gy(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ba(p(c.ba,c),f)}function of(c){c.B&&(a.clearTimeout(c.B),c.B=null)}ts.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(CP(this.i,this.A),this.L!=2&&(Ta(),tn(17)),ti(this),this.s=2,Aa(this)):gy(this,this.S-c)};function Aa(c){c.j.G==0||c.J||By(c.j,c)}function ti(c){of(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,es(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function af(c,f){try{var g=c.j;if(g.G!=0&&(g.g==c||lf(g.h,c))){if(!c.K&&lf(g.h,c)&&g.G==3){try{var E=g.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)$c(g),Fc(g);else break e;df(g),tn(18)}}else g.za=M[1],0<g.za-g.T&&37500>M[2]&&g.F&&g.v==0&&!g.C&&(g.C=ba(p(g.Za,g),6e3));if(1>=yy(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ri(g,11)}else if((c.K||g.g==c)&&$c(g),!k(f))for(M=g.Da.g.parse(f),f=0;f<M.length;f++){let De=M[f];if(g.T=De[0],De=De[1],g.G==2)if(De[0]=="c"){g.K=De[1],g.ia=De[2];const Vt=De[3];Vt!=null&&(g.la=Vt,g.j.info("VER="+g.la));const Ft=De[4];Ft!=null&&(g.Aa=Ft,g.j.info("SVER="+g.Aa));const Qi=De[5];Qi!=null&&typeof Qi=="number"&&0<Qi&&(E=1.5*Qi,g.L=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const Hn=c.g;if(Hn){const Hc=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hc){var F=E.h;F.g||Hc.indexOf("spdy")==-1&&Hc.indexOf("quic")==-1&&Hc.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(cf(F,F.h),F.h=null))}if(E.D){const pf=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;pf&&(E.ya=pf,Xe(E.I,E.D,pf))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),E=g;var Q=c;if(E.qa=jy(E,E.J?E.ia:null,E.W),Q.K){vy(E.h,Q);var qe=Q,Ct=E.L;Ct&&(qe.I=Ct),qe.B&&(of(qe),kc(qe)),E.g=Q}else Uy(E);0<g.i.length&&Uc(g)}else De[0]!="stop"&&De[0]!="close"||ri(g,7);else g.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?ri(g,7):hf(g):De[0]!="noop"&&g.l&&g.l.ta(De),g.v=0)}}Ta(4)}catch{}}var PP=class{constructor(c,f){this.g=c,this.map=f}};function my(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _y(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function yy(c){return c.h?1:c.g?c.g.size:0}function lf(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function cf(c,f){c.g?c.g.add(f):c.h=f}function vy(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}my.prototype.cancel=function(){if(this.i=Ey(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ey(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.D);return f}return w(c.i)}function NP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],g=c.length,E=0;E<g;E++)f.push(c[E]);return f}f=[],g=0;for(E in c)f[g++]=c[E];return f}function OP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var g=0;g<c;g++)f.push(g);return f}f=[],g=0;for(const E in c)f[g++]=E;return f}}}function Ty(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var g=OP(c),E=NP(c),M=E.length,F=0;F<M;F++)f.call(void 0,E[F],g&&g[F],c)}var by=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kP(c,f){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var E=c[g].indexOf("="),M=null;if(0<=E){var F=c[g].substring(0,E);M=c[g].substring(E+1)}else F=c[g];f(F,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function ni(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ni){this.h=c.h,Dc(this,c.j),this.o=c.o,this.g=c.g,Lc(this,c.s),this.l=c.l;var f=c.i,g=new Sa;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),wy(this,g),this.m=c.m}else c&&(f=String(c).match(by))?(this.h=!1,Dc(this,f[1]||"",!0),this.o=Ia(f[2]||""),this.g=Ia(f[3]||"",!0),Lc(this,f[4]),this.l=Ia(f[5]||"",!0),wy(this,f[6]||"",!0),this.m=Ia(f[7]||"")):(this.h=!1,this.i=new Sa(null,this.h))}ni.prototype.toString=function(){var c=[],f=this.j;f&&c.push(Ca(f,Ay,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Ca(f,Ay,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Ca(g,g.charAt(0)=="/"?MP:LP,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Ca(g,VP)),c.join("")};function Ir(c){return new ni(c)}function Dc(c,f,g){c.j=g?Ia(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Lc(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function wy(c,f,g){f instanceof Sa?(c.i=f,FP(c.i,c.h)):(g||(f=Ca(f,xP)),c.i=new Sa(f,c.h))}function Xe(c,f,g){c.i.set(f,g)}function Mc(c){return Xe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ia(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ca(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,DP),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function DP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ay=/[#\/\?@]/g,LP=/[#\?:]/g,MP=/[#\?]/g,xP=/[#\?@]/g,VP=/#/g;function Sa(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function ns(c){c.g||(c.g=new Map,c.h=0,c.i&&kP(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=Sa.prototype,t.add=function(c,f){ns(this),this.i=null,c=zi(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function Iy(c,f){ns(c),f=zi(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function Cy(c,f){return ns(c),f=zi(c,f),c.g.has(f)}t.forEach=function(c,f){ns(this),this.g.forEach(function(g,E){g.forEach(function(M){c.call(f,M,E,this)},this)},this)},t.na=function(){ns(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let E=0;E<f.length;E++){const M=c[E];for(let F=0;F<M.length;F++)g.push(f[E])}return g},t.V=function(c){ns(this);let f=[];if(typeof c=="string")Cy(this,c)&&(f=f.concat(this.g.get(zi(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)f=f.concat(c[g])}return f},t.set=function(c,f){return ns(this),this.i=null,c=zi(this,c),Cy(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function Sy(c,f,g){Iy(c,f),0<g.length&&(c.i=null,c.g.set(zi(c,f),w(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var E=f[g];const F=encodeURIComponent(String(E)),Q=this.V(E);for(E=0;E<Q.length;E++){var M=F;Q[E]!==""&&(M+="="+encodeURIComponent(String(Q[E]))),c.push(M)}}return this.i=c.join("&")};function zi(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function FP(c,f){f&&!c.j&&(ns(c),c.i=null,c.g.forEach(function(g,E){var M=E.toLowerCase();E!=M&&(Iy(this,E),Sy(this,M,g))},c)),c.j=f}function UP(c,f){const g=new wa;if(a.Image){const E=new Image;E.onload=m(rs,g,"TestLoadImage: loaded",!0,f,E),E.onerror=m(rs,g,"TestLoadImage: error",!1,f,E),E.onabort=m(rs,g,"TestLoadImage: abort",!1,f,E),E.ontimeout=m(rs,g,"TestLoadImage: timeout",!1,f,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=c}else f(!1)}function $P(c,f){const g=new wa,E=new AbortController,M=setTimeout(()=>{E.abort(),rs(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:E.signal}).then(F=>{clearTimeout(M),F.ok?rs(g,"TestPingServer: ok",!0,f):rs(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),rs(g,"TestPingServer: error",!1,f)})}function rs(c,f,g,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(g)}catch{}}function BP(){this.g=new Nn}function HP(c,f,g){const E=g||"";try{Ty(c,function(M,F){let Q=M;u(M)&&(Q=qi(M)),f.push(E+F+"="+encodeURIComponent(Q))})}catch(M){throw f.push(E+"type="+encodeURIComponent("_badmap")),M}}function Ra(c){this.l=c.Ub||null,this.j=c.eb||!1}_(Ra,Ki),Ra.prototype.g=function(){return new xc(this.l,this.j)},Ra.prototype.i=function(c){return function(){return c}}({});function xc(c,f){ie.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(xc,ie),t=xc.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,Na(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pa(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Na(this)),this.g&&(this.readyState=3,Na(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ry(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ry(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Pa(this):Na(this),this.readyState==3&&Ry(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Pa(this))},t.Qa=function(c){this.g&&(this.response=c,Pa(this))},t.ga=function(){this.g&&Pa(this)};function Pa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Na(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function Na(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(xc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Py(c){let f="";return x(c,function(g,E){f+=E,f+=":",f+=g,f+=`\r
`}),f}function uf(c,f,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=Py(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Xe(c,f,g))}function it(c){ie.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(it,ie);var WP=/^https?$/i,jP=["POST","PUT"];t=it.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nf.g(),this.v=this.o?sy(this.o):sy(nf),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(F){Ny(this,F);return}if(c=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)g.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const F of E.keys())g.set(F,E.get(F));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(F=>F.toLowerCase()=="content-type"),M=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(jP,f,void 0))||E||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,Q]of g)this.g.setRequestHeader(F,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dy(this),this.u=!0,this.g.send(c),this.u=!1}catch(F){Ny(this,F)}};function Ny(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Oy(c),Vc(c)}function Oy(c){c.A||(c.A=!0,pe(c,"complete"),pe(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,pe(this,"complete"),pe(this,"abort"),Vc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vc(this,!0)),it.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ky(this):this.bb())},t.bb=function(){ky(this)};function ky(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Cr(c)!=4||c.Z()!=2)){if(c.u&&Cr(c)==4)ke(c.Ea,0,c);else if(pe(c,"readystatechange"),Cr(c)==4){c.h=!1;try{const Q=c.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var E;if(E=Q===0){var M=String(c.D).match(by)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),E=!WP.test(M?M.toLowerCase():"")}g=E}if(g)pe(c,"complete"),pe(c,"success");else{c.m=6;try{var F=2<Cr(c)?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.Z()+"]",Oy(c)}}finally{Vc(c)}}}}function Vc(c,f){if(c.g){Dy(c);const g=c.g,E=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||pe(c,"ready");try{g.onreadystatechange=E}catch{}}}function Dy(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Cr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Cr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),en(f)}};function Ly(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function qP(c){const f={};c=(c.g&&2<=Cr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<c.length;E++){if(k(c[E]))continue;var g=N(c[E]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const F=f[M]||[];f[M]=F,F.push(g)}A(f,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oa(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function My(c){this.Aa=0,this.i=[],this.j=new wa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oa("baseRetryDelayMs",5e3,c),this.cb=Oa("retryDelaySeedMs",1e4,c),this.Wa=Oa("forwardChannelMaxRetries",2,c),this.wa=Oa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new my(c&&c.concurrentRequestLimit),this.Da=new BP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=My.prototype,t.la=8,t.G=1,t.connect=function(c,f,g,E){tn(0),this.W=c,this.H=f||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.I=jy(this,null,this.W),Uc(this)};function hf(c){if(xy(c),c.G==3){var f=c.U++,g=Ir(c.I);if(Xe(g,"SID",c.K),Xe(g,"RID",f),Xe(g,"TYPE","terminate"),ka(c,g),f=new ts(c,c.j,f),f.L=2,f.v=Mc(Ir(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=qy(f.j,null),f.g.ea(f.v)),f.F=Date.now(),kc(f)}Wy(c)}function Fc(c){c.g&&(ff(c),c.g.cancel(),c.g=null)}function xy(c){Fc(c),c.u&&(a.clearTimeout(c.u),c.u=null),$c(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Uc(c){if(!_y(c.h)&&!c.s){c.s=!0;var f=c.Ga;re||Dt(),oe||(re(),oe=!0),Me.add(f,c),c.B=0}}function KP(c,f){return yy(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ba(p(c.Ga,c,f),Hy(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const M=new ts(this,this.j,c);let F=this.o;if(this.S&&(F?(F=v(F),T(F,this.S)):F=this.S),this.m!==null||this.O||(M.H=F,F=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Fy(this,M,f),g=Ir(this.I),Xe(g,"RID",c),Xe(g,"CVER",22),this.D&&Xe(g,"X-HTTP-Session-Id",this.D),ka(this,g),F&&(this.O?f="headers="+encodeURIComponent(String(Py(F)))+"&"+f:this.m&&uf(g,this.m,F)),cf(this.h,M),this.Ua&&Xe(g,"TYPE","init"),this.P?(Xe(g,"$req",f),Xe(g,"SID","null"),M.T=!0,sf(M,g,null)):sf(M,g,f),this.G=2}}else this.G==3&&(c?Vy(this,c):this.i.length==0||_y(this.h)||Vy(this))};function Vy(c,f){var g;f?g=f.l:g=c.U++;const E=Ir(c.I);Xe(E,"SID",c.K),Xe(E,"RID",g),Xe(E,"AID",c.T),ka(c,E),c.m&&c.o&&uf(E,c.m,c.o),g=new ts(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),f&&(c.i=f.D.concat(c.i)),f=Fy(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),cf(c.h,g),sf(g,E,f)}function ka(c,f){c.H&&x(c.H,function(g,E){Xe(f,E,g)}),c.l&&Ty({},function(g,E){Xe(f,E,g)})}function Fy(c,f,g){g=Math.min(c.i.length,g);var E=c.l?p(c.l.Na,c.l,c):null;e:{var M=c.i;let F=-1;for(;;){const Q=["count="+g];F==-1?0<g?(F=M[0].g,Q.push("ofs="+F)):F=0:Q.push("ofs="+F);let qe=!0;for(let Ct=0;Ct<g;Ct++){let De=M[Ct].g;const Vt=M[Ct].map;if(De-=F,0>De)F=Math.max(0,M[Ct].g-100),qe=!1;else try{HP(Vt,Q,"req"+De+"_")}catch{E&&E(Vt)}}if(qe){E=Q.join("&");break e}}}return c=c.i.splice(0,g),f.D=c,E}function Uy(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;re||Dt(),oe||(re(),oe=!0),Me.add(f,c),c.v=0}}function df(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ba(p(c.Fa,c),Hy(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,$y(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ba(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tn(10),Fc(this),$y(this))};function ff(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function $y(c){c.g=new ts(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=Ir(c.qa);Xe(f,"RID","rpc"),Xe(f,"SID",c.K),Xe(f,"AID",c.T),Xe(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&Xe(f,"TO",c.ja),Xe(f,"TYPE","xmlhttp"),ka(c,f),c.m&&c.o&&uf(f,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Mc(Ir(f)),g.m=null,g.P=!0,fy(g,c)}t.Za=function(){this.C!=null&&(this.C=null,Fc(this),df(this),tn(19))};function $c(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function By(c,f){var g=null;if(c.g==f){$c(c),ff(c),c.g=null;var E=2}else if(lf(c.h,f))g=f.D,vy(c.h,f),E=1;else return;if(c.G!=0){if(f.o)if(E==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var M=c.B;E=Pc(),pe(E,new cy(E,g)),Uc(c)}else Uy(c);else if(M=f.s,M==3||M==0&&0<f.X||!(E==1&&KP(c,f)||E==2&&df(c)))switch(g&&0<g.length&&(f=c.h,f.i=f.i.concat(g)),M){case 1:ri(c,5);break;case 4:ri(c,10);break;case 3:ri(c,6);break;default:ri(c,2)}}}function Hy(c,f){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*f}function ri(c,f){if(c.j.info("Error code "+f),f==2){var g=p(c.fb,c),E=c.Xa;const M=!E;E=new ni(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Dc(E,"https"),Mc(E),M?UP(E.toString(),g):$P(E.toString(),g)}else tn(2);c.G=0,c.l&&c.l.sa(f),Wy(c),xy(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),tn(2)):(this.j.info("Failed to ping google.com"),tn(1))};function Wy(c){if(c.G=0,c.ka=[],c.l){const f=Ey(c.h);(f.length!=0||c.i.length!=0)&&(P(c.ka,f),P(c.ka,c.i),c.h.i.length=0,w(c.i),c.i.length=0),c.l.ra()}}function jy(c,f,g){var E=g instanceof ni?Ir(g):new ni(g);if(E.g!="")f&&(E.g=f+"."+E.g),Lc(E,E.s);else{var M=a.location;E=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var F=new ni(null);E&&Dc(F,E),f&&(F.g=f),M&&Lc(F,M),g&&(F.l=g),E=F}return g=c.D,f=c.ya,g&&f&&Xe(E,g,f),Xe(E,"VER",c.la),ka(c,E),E}function qy(c,f,g){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new it(new Ra({eb:g})):new it(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ky(){}t=Ky.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Bc(){}Bc.prototype.g=function(c,f){return new yn(c,f)};function yn(c,f){ie.call(this),this.g=new My(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!k(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!k(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Yi(this)}_(yn,ie),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){hf(this.g)},yn.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=qi(c),c=g);f.i.push(new PP(f.Ya++,c)),f.G==3&&Uc(f)},yn.prototype.N=function(){this.g.l=null,delete this.j,hf(this.g),delete this.g,yn.aa.N.call(this)};function Gy(c){ef.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}_(Gy,ef);function zy(){tf.call(this),this.status=1}_(zy,tf);function Yi(c){this.g=c}_(Yi,Ky),Yi.prototype.ua=function(){pe(this.g,"a")},Yi.prototype.ta=function(c){pe(this.g,new Gy(c))},Yi.prototype.sa=function(c){pe(this.g,new zy)},Yi.prototype.ra=function(){pe(this.g,"b")},Bc.prototype.createWebChannel=Bc.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,RS=function(){return new Bc},SS=function(){return Pc()},CS=ei,sg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nc.NO_ERROR=0,Nc.TIMEOUT=8,Nc.HTTP_ERROR=6,ku=Nc,uy.COMPLETE="complete",IS=uy,iy.EventType=Ea,Ea.OPEN="a",Ea.CLOSE="b",Ea.ERROR="c",Ea.MESSAGE="d",ie.prototype.listen=ie.prototype.K,Xa=iy,AS=Ra,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,wS=it}).apply(typeof uu<"u"?uu:typeof self<"u"?self:typeof window<"u"?window:{});const iT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pa="10.13.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new oc("@firebase/firestore");function $a(){return Ci.logLevel}function ce(t,...e){if(Ci.logLevel<=we.DEBUG){const n=e.map(jm);Ci.debug(`Firestore (${pa}): ${t}`,...n)}}function Gr(t,...e){if(Ci.logLevel<=we.ERROR){const n=e.map(jm);Ci.error(`Firestore (${pa}): ${t}`,...n)}}function Uo(t,...e){if(Ci.logLevel<=we.WARN){const n=e.map(jm);Ci.warn(`Firestore (${pa}): ${t}`,...n)}}function jm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t="Unexpected state"){const e=`FIRESTORE (${pa}) INTERNAL ASSERTION FAILED: `+t;throw Gr(e),new Error(e)}function We(t,e){t||ye()}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends wr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class c${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($t.UNAUTHENTICATED))}shutdown(){}}class u${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class h${constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new fr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new fr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new fr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We(typeof r.accessToken=="string"),new PS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string"),new $t(e)}}class d${constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class f${constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new d$(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class p${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class g${constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(We(typeof n.token=="string"),this.R=n.token,new p$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=m$(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Le(t,e){return t<e?-1:t>e?1:0}function $o(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new te(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new gt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Te(e)}static min(){return new Te(new gt(0,0))}static max(){return new Te(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n,r){n===void 0?n=0:n>e.length&&ye(),r===void 0?r=e.length-n:r>e.length-n&&ye(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Fl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ze extends Fl{construct(e,n,r){return new ze(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ze(n)}static emptyPath(){return new ze([])}}const _$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Fl{construct(e,n,r){return new Pt(e,n,r)}static isValidIdentifier(e){return _$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new te(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new te(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new te(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new te(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(ze.fromString(e))}static fromName(e){return new de(ze.fromString(e).popFirst(5))}static empty(){return new de(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new ze(e.slice()))}}function y$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Te.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new Vs(s,de.empty(),e)}function v$(t){return new Vs(t.readTime,t.key,-1)}class Vs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Vs(Te.min(),de.empty(),-1)}static max(){return new Vs(Te.max(),de.empty(),-1)}}function E$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==T$)throw t;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(s=>s?j.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new j((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new j((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function w$(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _c(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}qm.oe=-1;function wd(t){return t==null}function wh(t){return t===0&&1/t==-1/0}function A$(t){return typeof t=="number"&&Number.isInteger(t)&&!wh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ui(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function I$(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function OS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hu(this.root,e,this.comparator,!1)}getReverseIterator(){return new hu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hu(this.root,e,this.comparator,!0)}}class hu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??St.RED,this.left=s??St.EMPTY,this.right=i??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new St(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return St.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();const e=this.left.check();if(e!==this.right.check())throw ye();return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(e,n,r,s,i){return this}insert(e,n,r){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new aT(this.data.getIterator())}getIteratorFrom(e){return new aT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ot(this.comparator);return n.data=e,n}}class aT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new bn([])}unionWith(e){let n=new Ot(Pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $o(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new kS("Invalid base64 string: "+i):i}}(e);return new kt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const C$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(t){if(We(!!t),typeof t=="string"){let e=0;const n=C$.exec(t);if(We(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ct(t.seconds),nanos:ct(t.nanos)}}function ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Si(t){return typeof t=="string"?kt.fromBase64String(t):kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Km(t){const e=t.mapValue.fields.__previous_value__;return Ad(e)?Km(e):e}function Ul(t){const e=Fs(t.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(e,n,r,s,i,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class $l{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new $l("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof $l&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ri(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ad(t)?4:P$(t)?9007199254740991:R$(t)?10:11:ye()}function Tr(t,e){if(t===e)return!0;const n=Ri(t);if(n!==Ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ul(t).isEqual(Ul(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Fs(s.timestampValue),a=Fs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Si(s.bytesValue).isEqual(Si(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ct(s.geoPointValue.latitude)===ct(i.geoPointValue.latitude)&&ct(s.geoPointValue.longitude)===ct(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ct(s.integerValue)===ct(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ct(s.doubleValue),a=ct(i.doubleValue);return o===a?wh(o)===wh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return $o(t.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(oT(o)!==oT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Tr(o[l],a[l])))return!1;return!0}(t,e);default:return ye()}}function Bl(t,e){return(t.values||[]).find(n=>Tr(n,e))!==void 0}function Bo(t,e){if(t===e)return 0;const n=Ri(t),r=Ri(e);if(n!==r)return Le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=ct(i.integerValue||i.doubleValue),l=ct(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return lT(t.timestampValue,e.timestampValue);case 4:return lT(Ul(t),Ul(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Si(i),l=Si(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Le(a[u],l[u]);if(h!==0)return h}return Le(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Le(ct(i.latitude),ct(o.latitude));return a!==0?a:Le(ct(i.longitude),ct(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return cT(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,u,h;const d=i.fields||{},p=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,_=(l=p.value)===null||l===void 0?void 0:l.arrayValue,w=Le(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:cT(m,_)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===du.mapValue&&o===du.mapValue)return 0;if(i===du.mapValue)return 1;if(o===du.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=Le(l[d],h[d]);if(p!==0)return p;const m=Bo(a[l[d]],u[h[d]]);if(m!==0)return m}return Le(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ye()}}function lT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=Fs(t),r=Fs(e),s=Le(n.seconds,r.seconds);return s!==0?s:Le(n.nanos,r.nanos)}function cT(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Bo(n[s],r[s]);if(i)return i}return Le(n.length,r.length)}function Ho(t){return ig(t)}function ig(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Fs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Si(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ig(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ig(n.fields[o])}`;return s+"}"}(t.mapValue):ye()}function Ah(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function og(t){return!!t&&"integerValue"in t}function Gm(t){return!!t&&"arrayValue"in t}function uT(t){return!!t&&"nullValue"in t}function hT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Du(t){return!!t&&"mapValue"in t}function R$(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function pl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function P$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Du(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pl(n)}setAll(e){let n=Pt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=pl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Du(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Du(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ui(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new gn(pl(this.value))}}function DS(t){const e=[];return Ui(t.fields,(n,r)=>{const s=new Pt([n]);if(Du(r)){const i=DS(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new qt(e,0,Te.min(),Te.min(),Te.min(),gn.empty(),0)}static newFoundDocument(e,n,r,s){return new qt(e,1,n,Te.min(),r,s,0)}static newNoDocument(e,n){return new qt(e,2,n,Te.min(),Te.min(),gn.empty(),0)}static newUnknownDocument(e,n){return new qt(e,3,n,Te.min(),Te.min(),gn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n){this.position=e,this.inclusive=n}}function dT(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=de.comparator(de.fromName(o.referenceValue),n.key):r=Bo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function fT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n="asc"){this.field=e,this.dir=n}}function N$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{}class pt extends LS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new k$(e,n,r):n==="array-contains"?new M$(e,r):n==="in"?new x$(e,r):n==="not-in"?new V$(e,r):n==="array-contains-any"?new F$(e,r):new pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new D$(e,r):new L$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Bo(n,this.value)):n!==null&&Ri(this.value)===Ri(n)&&this.matchesComparison(Bo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends LS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zn(e,n)}matches(e){return MS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function MS(t){return t.op==="and"}function xS(t){return O$(t)&&MS(t)}function O$(t){for(const e of t.filters)if(e instanceof Zn)return!1;return!0}function ag(t){if(t instanceof pt)return t.field.canonicalString()+t.op.toString()+Ho(t.value);if(xS(t))return t.filters.map(e=>ag(e)).join(",");{const e=t.filters.map(n=>ag(n)).join(",");return`${t.op}(${e})`}}function VS(t,e){return t instanceof pt?function(r,s){return s instanceof pt&&r.op===s.op&&r.field.isEqual(s.field)&&Tr(r.value,s.value)}(t,e):t instanceof Zn?function(r,s){return s instanceof Zn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&VS(o,s.filters[a]),!0):!1}(t,e):void ye()}function FS(t){return t instanceof pt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ho(n.value)}`}(t):t instanceof Zn?function(n){return n.op.toString()+" {"+n.getFilters().map(FS).join(" ,")+"}"}(t):"Filter"}class k$ extends pt{constructor(e,n,r){super(e,n,r),this.key=de.fromName(r.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class D$ extends pt{constructor(e,n){super(e,"in",n),this.keys=US("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class L$ extends pt{constructor(e,n){super(e,"not-in",n),this.keys=US("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function US(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>de.fromName(r.referenceValue))}class M$ extends pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gm(n)&&Bl(n.arrayValue,this.value)}}class x$ extends pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bl(this.value.arrayValue,n)}}class V$ extends pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Bl(this.value.arrayValue,n)}}class F$ extends pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function pT(t,e=null,n=[],r=[],s=null,i=null,o=null){return new U$(t,e,n,r,s,i,o)}function zm(t){const e=ve(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ag(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),wd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ho(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ho(r)).join(",")),e.ue=n}return e.ue}function Ym(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!N$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!VS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fT(t.startAt,e.startAt)&&fT(t.endAt,e.endAt)}function lg(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $$(t,e,n,r,s,i,o,a){return new $i(t,e,n,r,s,i,o,a)}function Id(t){return new $i(t)}function gT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Qm(t){return t.collectionGroup!==null}function No(t){const e=ve(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ot(Pt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Hl(i,r))}),n.has(Pt.keyField().canonicalString())||e.ce.push(new Hl(Pt.keyField(),r))}return e.ce}function pr(t){const e=ve(t);return e.le||(e.le=$S(e,No(t))),e.le}function B$(t){const e=ve(t);return e.he||(e.he=$S(e,t.explicitOrderBy)),e.he}function $S(t,e){if(t.limitType==="F")return pT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Hl(s.field,i)});const n=t.endAt?new Wo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wo(t.startAt.position,t.startAt.inclusive):null;return pT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function cg(t,e){const n=t.filters.concat([e]);return new $i(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ih(t,e,n){return new $i(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cd(t,e){return Ym(pr(t),pr(e))&&t.limitType===e.limitType}function BS(t){return`${zm(pr(t))}|lt:${t.limitType}`}function oo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>FS(s)).join(", ")}]`),wd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ho(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ho(s)).join(",")),`Target(${r})`}(pr(t))}; limitType=${t.limitType})`}function Sd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):de.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of No(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const u=dT(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,No(r),s)||r.endAt&&!function(o,a,l){const u=dT(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,No(r),s))}(t,e)}function H$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HS(t){return(e,n)=>{let r=!1;for(const s of No(t)){const i=W$(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function W$(t,e,n){const r=t.field.isKeyField()?de.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Bo(l,u):ye()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ye()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return OS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$=new st(de.comparator);function zr(){return j$}const WS=new st(de.comparator);function Ja(...t){let e=WS;for(const n of t)e=e.insert(n.key,n);return e}function jS(t){let e=WS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ui(){return gl()}function qS(){return gl()}function gl(){return new ga(t=>t.toString(),(t,e)=>t.isEqual(e))}const q$=new st(de.comparator),K$=new Ot(de.comparator);function Ie(...t){let e=K$;for(const n of t)e=e.add(n);return e}const G$=new Ot(Le);function z$(){return G$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wh(e)?"-0":e}}function KS(t){return{integerValue:""+t}}function Y$(t,e){return A$(e)?KS(e):Xm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(){this._=void 0}}function Q$(t,e,n){return t instanceof Ch?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ad(i)&&(i=Km(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Wl?zS(t,e):t instanceof jl?YS(t,e):function(s,i){const o=GS(s,i),a=mT(o)+mT(s.Pe);return og(o)&&og(s.Pe)?KS(a):Xm(s.serializer,a)}(t,e)}function X$(t,e,n){return t instanceof Wl?zS(t,e):t instanceof jl?YS(t,e):n}function GS(t,e){return t instanceof Sh?function(r){return og(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ch extends Rd{}class Wl extends Rd{constructor(e){super(),this.elements=e}}function zS(t,e){const n=QS(e);for(const r of t.elements)n.some(s=>Tr(s,r))||n.push(r);return{arrayValue:{values:n}}}class jl extends Rd{constructor(e){super(),this.elements=e}}function YS(t,e){let n=QS(e);for(const r of t.elements)n=n.filter(s=>!Tr(s,r));return{arrayValue:{values:n}}}class Sh extends Rd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function mT(t){return ct(t.integerValue||t.doubleValue)}function QS(t){return Gm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function J$(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Wl&&s instanceof Wl||r instanceof jl&&s instanceof jl?$o(r.elements,s.elements,Tr):r instanceof Sh&&s instanceof Sh?Tr(r.Pe,s.Pe):r instanceof Ch&&s instanceof Ch}(t.transform,e.transform)}class Z${constructor(e,n){this.version=e,this.transformResults=n}}class Yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pd{}function XS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jm(t.key,Yn.none()):new yc(t.key,t.data,Yn.none());{const n=t.data,r=gn.empty();let s=new Ot(Pt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ys(t.key,r,new bn(s.toArray()),Yn.none())}}function eB(t,e,n){t instanceof yc?function(s,i,o){const a=s.value.clone(),l=yT(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ys?function(s,i,o){if(!Lu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=yT(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(JS(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ml(t,e,n,r){return t instanceof yc?function(i,o,a,l){if(!Lu(i.precondition,o))return a;const u=i.value.clone(),h=vT(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ys?function(i,o,a,l){if(!Lu(i.precondition,o))return a;const u=vT(i.fieldTransforms,l,o),h=o.data;return h.setAll(JS(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return Lu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function tB(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=GS(r.transform,s||null);i!=null&&(n===null&&(n=gn.empty()),n.set(r.field,i))}return n||null}function _T(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&$o(r,s,(i,o)=>J$(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yc extends Pd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ys extends Pd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function JS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function yT(t,e,n){const r=new Map;We(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,X$(o,a,n[s]))}return r}function vT(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Q$(i,o,e))}return r}class Jm extends Pd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nB extends Pd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&eB(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ml(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ml(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=qS();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=XS(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&$o(this.mutations,e.mutations,(n,r)=>_T(n,r))&&$o(this.baseMutations,e.baseMutations,(n,r)=>_T(n,r))}}class Zm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){We(e.mutations.length===r.length);let s=function(){return q$}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Zm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht,Re;function aB(t){switch(t){default:return ye();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function ZS(t){if(t===void 0)return Gr("GRPC error has no .code"),B.UNKNOWN;switch(t){case ht.OK:return B.OK;case ht.CANCELLED:return B.CANCELLED;case ht.UNKNOWN:return B.UNKNOWN;case ht.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case ht.INTERNAL:return B.INTERNAL;case ht.UNAVAILABLE:return B.UNAVAILABLE;case ht.UNAUTHENTICATED:return B.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case ht.NOT_FOUND:return B.NOT_FOUND;case ht.ALREADY_EXISTS:return B.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return B.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case ht.ABORTED:return B.ABORTED;case ht.OUT_OF_RANGE:return B.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return B.UNIMPLEMENTED;case ht.DATA_LOSS:return B.DATA_LOSS;default:return ye()}}(Re=ht||(ht={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cB=new mi([4294967295,4294967295],0);function ET(t){const e=lB().encode(t),n=new bS;return n.update(e),new Uint8Array(n.digest())}function TT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new mi([n,r],0),new mi([s,i],0)]}class e_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Za(`Invalid padding: ${n}`);if(r<0)throw new Za(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Za(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Za(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=mi.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(mi.fromNumber(r)));return s.compare(cB)===1&&(s=new mi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ET(e),[r,s]=TT(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new e_(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=ET(e),[r,s]=TT(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Za extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,vc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Nd(Te.min(),s,new st(Le),zr(),Ie())}}class vc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new vc(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class eR{constructor(e,n){this.targetId=e,this.me=n}}class tR{constructor(e,n,r=kt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class bT{constructor(){this.fe=0,this.ge=AT(),this.pe=kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ie(),n=Ie(),r=Ie();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ye()}}),new vc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=AT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,We(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uB{constructor(e){this.Le=e,this.Be=new Map,this.ke=zr(),this.qe=wT(),this.Qe=new st(Le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ye()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(lg(i))if(r===0){const o=new de(i.path);this.Ue(n,o,qt.newNoDocument(o,Te.min()))}else We(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Si(r).toUint8Array()}catch(l){if(l instanceof kS)return Uo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new e_(o,s,i)}catch(l){return Uo(l instanceof Za?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&lg(a.target)){const l=new de(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,qt.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Ie();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Nd(e,n,this.Qe,this.ke,r);return this.ke=zr(),this.qe=wT(),this.Qe=new st(Le),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new bT,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ot(Le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ce("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new bT),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function wT(){return new st(de.comparator)}function AT(){return new st(de.comparator)}const hB={asc:"ASCENDING",desc:"DESCENDING"},dB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fB={and:"AND",or:"OR"};class pB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ug(t,e){return t.useProto3Json||wd(e)?e:{value:e}}function Rh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gB(t,e){return Rh(t,e.toTimestamp())}function gr(t){return We(!!t),Te.fromTimestamp(function(n){const r=Fs(n);return new gt(r.seconds,r.nanos)}(t))}function t_(t,e){return hg(t,e).canonicalString()}function hg(t,e){const n=function(s){return new ze(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function rR(t){const e=ze.fromString(t);return We(cR(e)),e}function dg(t,e){return t_(t.databaseId,e.path)}function Hf(t,e){const n=rR(e);if(n.get(1)!==t.databaseId.projectId)throw new te(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de(iR(n))}function sR(t,e){return t_(t.databaseId,e)}function mB(t){const e=rR(t);return e.length===4?ze.emptyPath():iR(e)}function fg(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iR(t){return We(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function IT(t,e,n){return{name:dg(t,e),fields:n.value.mapValue.fields}}function _B(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ye()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(We(h===void 0||typeof h=="string"),kt.fromBase64String(h||"")):(We(h===void 0||h instanceof Buffer||h instanceof Uint8Array),kt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?B.UNKNOWN:ZS(u.code);return new te(h,u.message||"")}(o);n=new tR(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Hf(t,r.document.name),i=gr(r.document.updateTime),o=r.document.createTime?gr(r.document.createTime):Te.min(),a=new gn({mapValue:{fields:r.document.fields}}),l=qt.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Mu(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Hf(t,r.document),i=r.readTime?gr(r.readTime):Te.min(),o=qt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Mu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Hf(t,r.document),i=r.removedTargetIds||[];n=new Mu([],i,s,null)}else{if(!("filter"in e))return ye();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new oB(s,i),a=r.targetId;n=new eR(a,o)}}return n}function yB(t,e){let n;if(e instanceof yc)n={update:IT(t,e.key,e.value)};else if(e instanceof Jm)n={delete:dg(t,e.key)};else if(e instanceof Ys)n={update:IT(t,e.key,e.data),updateMask:SB(e.fieldMask)};else{if(!(e instanceof nB))return ye();n={verify:dg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ch)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof jl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Sh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ye()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:gB(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ye()}(t,e.precondition)),n}function vB(t,e){return t&&t.length>0?(We(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?gr(s.updateTime):gr(i);return o.isEqual(Te.min())&&(o=gr(i)),new Z$(o,s.transformResults||[])}(n,e))):[]}function EB(t,e){return{documents:[sR(t,e.path)]}}function oR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=sR(t,s);const i=function(u){if(u.length!==0)return lR(Zn.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Es(p.field),direction:AB(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ug(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:s}}function TB(t,e,n,r){const{_t:s,parent:i}=oR(t,e),o={},a=[];let l=0;return n.forEach(u=>{const h="aggregate_"+l++;o[h]=u.alias,u.aggregateType==="count"?a.push({alias:h,count:{}}):u.aggregateType==="avg"?a.push({alias:h,avg:{field:Es(u.fieldPath)}}):u.aggregateType==="sum"&&a.push({alias:h,sum:{field:Es(u.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ut:o,parent:i}}function bB(t){let e=mB(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){We(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const p=aR(d);return p instanceof Zn&&xS(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(_){return new Hl(ao(_.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,wd(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,m=d.values||[];return new Wo(m,p)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const p=!d.before,m=d.values||[];return new Wo(m,p)}(n.endAt)),$$(e,s,o,i,a,"F",l,u)}function wB(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ao(n.unaryFilter.field);return pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ao(n.unaryFilter.field);return pt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ao(n.unaryFilter.field);return pt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ao(n.unaryFilter.field);return pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(t):t.fieldFilter!==void 0?function(n){return pt.create(ao(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zn.create(n.compositeFilter.filters.map(r=>aR(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ye()}}(n.compositeFilter.op))}(t):ye()}function AB(t){return hB[t]}function IB(t){return dB[t]}function CB(t){return fB[t]}function Es(t){return{fieldPath:t.canonicalString()}}function ao(t){return Pt.fromServerFormat(t.fieldPath)}function lR(t){return t instanceof pt?function(n){if(n.op==="=="){if(hT(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NAN"}};if(uT(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hT(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NAN"}};if(uT(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Es(n.field),op:IB(n.op),value:n.value}}}(t):t instanceof Zn?function(n){const r=n.getFilters().map(s=>lR(s));return r.length===1?r[0]:{compositeFilter:{op:CB(n.op),filters:r}}}(t):ye()}function SB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function cR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n,r,s,i=Te.min(),o=Te.min(),a=kt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e){this.ct=e}}function PB(t){const e=bB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ih(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(){this.un=new OB}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Vs.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class OB{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ot(ze.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ot(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new jo(0)}static kn(){return new jo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(){this.changes=new ga(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ml(r.mutation,s,bn.empty(),gt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const s=ui();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ja();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ui();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=zr();const o=gl(),a=function(){return gl()}();return n.forEach((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof Ys)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),ml(h.mutation,u,h.mutation.getFieldMask(),gt.now())):o.set(u.key,bn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var d;return a.set(u,new DB(h,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=gl();let s=new st((o,a)=>o-a),i=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||bn.empty();h=a.applyToLocalView(u,h),r.set(l,h);const d=(s.get(a.batchId)||Ie()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=qS();h.forEach(p=>{if(!i.has(p)){const m=XS(n.get(p),r.get(p));m!==null&&d.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return de.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Qm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):j.resolve(ui());let a=-1,l=i;return o.next(u=>j.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Ie())).next(h=>({batchId:a,changes:jS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(r=>{let s=Ja();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ja();return this.indexManager.getCollectionParents(e,i).next(a=>j.forEach(a,l=>{const u=function(d,p){return new $i(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,qt.newInvalidDocument(h)))});let a=Ja();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&ml(h.mutation,u,bn.empty(),gt.now()),Sd(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:gr(s.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:PB(s.bundledQuery),readTime:gr(s.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(){this.overlays=new st(de.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ui();return j.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const s=ui(),i=n.length+1,o=new de(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new st((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=ui(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=ui(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return j.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sB(n,r));let i=this.Ir.get(n);i===void 0&&(i=Ie(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(){this.Tr=new Ot(bt.Er),this.dr=new Ot(bt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new bt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new bt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new de(new ze([])),r=new bt(n,e),s=new bt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new de(new ze([])),r=new bt(n,e),s=new bt(n,e+1);let i=Ie();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new bt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class bt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return de.comparator(e.key,n.key)||Le(e.wr,n.wr)}static Ar(e,n){return Le(e.wr,n.wr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ot(bt.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rB(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new bt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return j.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new bt(n,0),s=new bt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),j.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ot(Le);return n.forEach(s=>{const i=new bt(s,0),o=new bt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),j.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;de.isDocumentKey(i)||(i=i.child(""));const o=new bt(new de(i),0);let a=new Ot(Le);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.wr)),!0)},o),j.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){We(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return j.forEach(n.mutations,s=>{const i=new bt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new bt(n,0),s=this.br.firstAfterOrEqual(r);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e){this.Mr=e,this.docs=function(){return new st(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():qt.newInvalidDocument(n))}getEntries(e,n){let r=zr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():qt.newInvalidDocument(s))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=zr();const o=n.path,a=new de(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||E$(v$(h),r)<=0||(s.has(h.key)||Sd(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return j.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ye()}Or(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $B(this)}getSize(e){return j.resolve(this.size)}}class $B extends kB{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e){this.persistence=e,this.Nr=new ga(n=>zm(n),Ym),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new n_,this.targetCount=0,this.kr=jo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new jo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),j.waitFor(i).next(()=>s)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),j.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e,n){this.qr={},this.overlays={},this.Qr=new qm(0),this.Kr=!1,this.Kr=!0,this.$r=new VB,this.referenceDelegate=e(this),this.Ur=new BB(this),this.indexManager=new NB,this.remoteDocumentCache=function(s){return new UB(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new RB(n),this.Gr=new MB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new FB(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ce("MemoryPersistence","Starting transaction:",e);const s=new WB(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return j.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class WB extends b${constructor(e){super(),this.currentSequenceNumber=e}}class r_{constructor(e){this.persistence=e,this.Jr=new n_,this.Yr=null}static Zr(e){return new r_(e)}get Xr(){if(this.Yr)return this.Yr;throw ye()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,r=>{const s=de.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Ie(),s=Ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new s_(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return mL()?8:w$(Jt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new jB;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?($a()<=we.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",oo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):($a()<=we.DEBUG&&ce("QueryEngine","Query:",oo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?($a()<=we.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",oo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pr(n))):j.resolve())}Yi(e,n){if(gT(n))return j.resolve(null);let r=pr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ih(n,null,"F"),r=pr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ie(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,Ih(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,s){return gT(n)||s.isEqual(Te.min())?j.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?j.resolve(null):($a()<=we.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),oo(n)),this.rs(e,o,n,y$(s,-1)).next(a=>a))})}ts(e,n){let r=new Ot(HS(e));return n.forEach((s,i)=>{Sd(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return $a()<=we.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",oo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Vs.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new st(Le),this._s=new ga(i=>zm(i),Ym),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LB(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function GB(t,e,n,r){return new KB(t,e,n,r)}async function uR(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ie();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function zB(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const d=u.batch,p=d.keys();let m=j.resolve();return p.forEach(_=>{m=m.next(()=>h.getEntry(l,_)).next(w=>{const P=u.docVersions.get(_);We(P!==null),w.version.compareTo(P)<0&&(d.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ie();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function hR(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function YB(t,e){const n=ve(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=s.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,d)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(kt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),s=s.insert(d,m),function(w,P,D){return w.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(p,m,h)&&a.push(n.Ur.updateTargetData(i,m))});let l=zr(),u=Ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(QB(i,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!r.isEqual(Te.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(d=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.os=s,i))}function QB(t,e,n){let r=Ie(),s=Ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=zr();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Te.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ce("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function XB(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function JB(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,j.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new ws(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function pg(t,e,n){const r=ve(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!_c(o))throw o;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function CT(t,e,n){const r=ve(t);let s=Te.min(),i=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const d=ve(l),p=d._s.get(h);return p!==void 0?j.resolve(d.os.get(p)):d.Ur.getTargetData(u,h)}(r,o,pr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Te.min(),n?i:Ie())).next(a=>(ZB(r,H$(e),a),{documents:a,Ts:i})))}function ZB(t,e,n){let r=t.us.get(e)||Te.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class ST{constructor(){this.activeTargetIds=z$()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class e2{constructor(){this.so=new ST,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ST,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu=null;function Wf(){return fu===null?fu=function(){return 268435456+Math.round(2147483648*Math.random())}():fu++,"0x"+fu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class s2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Wf(),l=this.xo(n,r.toUriEncodedString());ce("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,i,o),this.No(n,l,u,s).then(h=>(ce("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Uo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=n2[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Wf();return new Promise((o,a)=>{const l=new wS;l.setWithCredentials(!0),l.listenOnce(IS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ku.NO_ERROR:const h=l.getResponseJson();ce(Ut,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case ku.TIMEOUT:ce(Ut,`RPC '${e}' ${i} timed out`),a(new te(B.DEADLINE_EXCEEDED,"Request time out"));break;case ku.HTTP_ERROR:const d=l.getStatus();if(ce(Ut,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const _=function(P){const D=P.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(D)>=0?D:B.UNKNOWN}(m.status);a(new te(_,m.message))}else a(new te(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new te(B.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{ce(Ut,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);ce(Ut,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const s=Wf(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=RS(),a=SS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new AS({})),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");ce(Ut,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,m=!1;const _=new r2({Io:P=>{m?ce(Ut,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(p||(ce(Ut,`Opening RPC '${e}' stream ${s} transport.`),d.open(),p=!0),ce(Ut,`RPC '${e}' stream ${s} sending:`,P),d.send(P))},To:()=>d.close()}),w=(P,D,k)=>{P.listen(D,b=>{try{k(b)}catch(C){setTimeout(()=>{throw C},0)}})};return w(d,Xa.EventType.OPEN,()=>{m||(ce(Ut,`RPC '${e}' stream ${s} transport opened.`),_.yo())}),w(d,Xa.EventType.CLOSE,()=>{m||(m=!0,ce(Ut,`RPC '${e}' stream ${s} transport closed`),_.So())}),w(d,Xa.EventType.ERROR,P=>{m||(m=!0,Uo(Ut,`RPC '${e}' stream ${s} transport errored:`,P),_.So(new te(B.UNAVAILABLE,"The operation could not be completed")))}),w(d,Xa.EventType.MESSAGE,P=>{var D;if(!m){const k=P.data[0];We(!!k);const b=k,C=b.error||((D=b[0])===null||D===void 0?void 0:D.error);if(C){ce(Ut,`RPC '${e}' stream ${s} received error:`,C);const L=C.status;let x=function(y){const T=ht[y];if(T!==void 0)return ZS(T)}(L),A=C.message;x===void 0&&(x=B.INTERNAL,A="Unknown error status: "+L+" with message "+C.message),m=!0,_.So(new te(x,A)),d.close()}else ce(Ut,`RPC '${e}' stream ${s} received:`,k),_.bo(k)}}),w(a,CS.STAT_EVENT,P=>{P.stat===sg.PROXY?ce(Ut,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===sg.NOPROXY&&ce(Ut,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function jf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t){return new pB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&ce("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new dR(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Gr(n.toString()),Gr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new te(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i2 extends fR{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=_B(this.serializer,e),r=function(i){if(!("targetChange"in i))return Te.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Te.min():o.readTime?gr(o.readTime):Te.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=fg(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=lg(l)?{documents:EB(i,l)}:{query:oR(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=nR(i,o.resumeToken);const u=ug(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Te.min())>0){a.readTime=Rh(i,o.snapshotVersion.toTimestamp());const u=ug(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=wB(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=fg(this.serializer),n.removeTarget=e,this.a_(n)}}class o2 extends fR{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return We(!!e.streamToken),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){We(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=vB(e.writeResults,e.commitTime),r=gr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=fg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>yB(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new te(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,hg(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new te(B.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,hg(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class l2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Gr(n),this.D_=!1):ce("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Bi(this)&&(ce("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ve(l);u.L_.add(4),await Ec(u),u.q_.set("Unknown"),u.L_.delete(4),await kd(u)}(this))})}),this.q_=new l2(r,s)}}async function kd(t){if(Bi(t))for(const e of t.B_)await e(!0)}async function Ec(t){for(const e of t.B_)await e(!1)}function pR(t,e){const n=ve(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),l_(n)?a_(n):ma(n).r_()&&o_(n,e))}function i_(t,e){const n=ve(t),r=ma(n);n.N_.delete(e),r.r_()&&gR(n,e),n.N_.size===0&&(r.r_()?r.o_():Bi(n)&&n.q_.set("Unknown"))}function o_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ma(t).A_(e)}function gR(t,e){t.Q_.xe(e),ma(t).R_(e)}function a_(t){t.Q_=new uB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ma(t).start(),t.q_.v_()}function l_(t){return Bi(t)&&!ma(t).n_()&&t.N_.size>0}function Bi(t){return ve(t).L_.size===0}function mR(t){t.Q_=void 0}async function u2(t){t.q_.set("Online")}async function h2(t){t.N_.forEach((e,n)=>{o_(t,e)})}async function d2(t,e){mR(t),l_(t)?(t.q_.M_(e),a_(t)):t.q_.set("Unknown")}async function f2(t,e,n){if(t.q_.set("Online"),e instanceof tR&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ph(t,r)}else if(e instanceof Mu?t.Q_.Ke(e):e instanceof eR?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Te.min()))try{const r=await hR(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.N_.get(u);h&&i.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=i.N_.get(l);if(!h)return;i.N_.set(l,h.withResumeToken(kt.EMPTY_BYTE_STRING,h.snapshotVersion)),gR(i,l);const d=new ws(h.target,l,u,h.sequenceNumber);o_(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ce("RemoteStore","Failed to raise snapshot:",r),await Ph(t,r)}}async function Ph(t,e,n){if(!_c(e))throw e;t.L_.add(1),await Ec(t),t.q_.set("Offline"),n||(n=()=>hR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ce("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await kd(t)})}function _R(t,e){return e().catch(n=>Ph(t,n,e))}async function Dd(t){const e=ve(t),n=Us(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;p2(e);)try{const s=await XB(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,g2(e,s)}catch(s){await Ph(e,s)}yR(e)&&vR(e)}function p2(t){return Bi(t)&&t.O_.length<10}function g2(t,e){t.O_.push(e);const n=Us(t);n.r_()&&n.V_&&n.m_(e.mutations)}function yR(t){return Bi(t)&&!Us(t).n_()&&t.O_.length>0}function vR(t){Us(t).start()}async function m2(t){Us(t).p_()}async function _2(t){const e=Us(t);for(const n of t.O_)e.m_(n.mutations)}async function y2(t,e,n){const r=t.O_.shift(),s=Zm.from(r,e,n);await _R(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Dd(t)}async function v2(t,e){e&&Us(t).V_&&await async function(r,s){if(function(o){return aB(o)&&o!==B.ABORTED}(s.code)){const i=r.O_.shift();Us(r).s_(),await _R(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Dd(r)}}(t,e),yR(t)&&vR(t)}async function PT(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");const r=Bi(n);n.L_.add(3),await Ec(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await kd(n)}async function E2(t,e){const n=ve(t);e?(n.L_.delete(2),await kd(n)):e||(n.L_.add(2),await Ec(n),n.q_.set("Unknown"))}function ma(t){return t.K_||(t.K_=function(n,r,s){const i=ve(n);return i.w_(),new i2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:u2.bind(null,t),Ro:h2.bind(null,t),mo:d2.bind(null,t),d_:f2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),l_(t)?a_(t):t.q_.set("Unknown")):(await t.K_.stop(),mR(t))})),t.K_}function Us(t){return t.U_||(t.U_=function(n,r,s){const i=ve(n);return i.w_(),new o2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:m2.bind(null,t),mo:v2.bind(null,t),f_:_2.bind(null,t),g_:y2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Dd(t)):(await t.U_.stop(),t.O_.length>0&&(ce("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new c_(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function u_(t,e){if(Gr("AsyncQueue",`${e}: ${t}`),_c(t))return new te(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||de.comparator(n.key,r.key):(n,r)=>de.comparator(n.key,r.key),this.keyedMap=Ja(),this.sortedSet=new st(this.comparator)}static emptySet(e){return new Oo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Oo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Oo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(){this.W_=new st(de.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ye():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class qo{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new qo(e,n,Oo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class b2{constructor(){this.queries=OT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ve(n),i=s.queries;s.queries=OT(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new te(B.ABORTED,"Firestore shutting down"))}}function OT(){return new ga(t=>BS(t),Cd)}async function h_(t,e){const n=ve(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new T2,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=u_(o,`Initialization of query '${oo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&f_(n)}async function d_(t,e){const n=ve(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function w2(t,e){const n=ve(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&f_(n)}function A2(t,e,n){const r=ve(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function f_(t){t.Y_.forEach(e=>{e.next()})}var gg,kT;(kT=gg||(gg={})).ea="default",kT.Cache="cache";class p_{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new qo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==gg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.key=e}}class TR{constructor(e){this.key=e}}class I2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ie(),this.mutatedKeys=Ie(),this.Aa=HS(e),this.Ra=new Oo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new NT,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const p=s.get(h),m=Sd(this.query,d)?d:null,_=!!p&&this.mutatedKeys.has(p.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let P=!1;p&&m?p.data.isEqual(m.data)?_!==w&&(r.track({type:3,doc:m}),P=!0):this.ga(p,m)||(r.track({type:2,doc:m}),P=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),P=!0):p&&!m&&(r.track({type:1,doc:p}),P=!0,(l||u)&&(a=!0)),P&&(m?(o=o.add(m),i=w?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(m,_){const w=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return w(m)-w(_)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new qo(this.query,e.Ra,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new NT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new TR(r))}),this.da.forEach(r=>{e.has(r)||n.push(new ER(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return qo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class C2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class S2{constructor(e){this.key=e,this.va=!1}}class R2{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ga(a=>BS(a),Cd),this.Ma=new Map,this.xa=new Set,this.Oa=new st(de.comparator),this.Na=new Map,this.La=new n_,this.Ba={},this.ka=new Map,this.qa=jo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function P2(t,e,n=!0){const r=SR(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await bR(r,e,n,!0),s}async function N2(t,e){const n=SR(t);await bR(n,e,!0,!1)}async function bR(t,e,n,r){const s=await JB(t.localStore,pr(e)),i=s.targetId,o=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return r&&(a=await O2(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&pR(t.remoteStore,s),a}async function O2(t,e,n,r,s){t.Ka=(d,p,m)=>async function(w,P,D,k){let b=P.view.ma(D);b.ns&&(b=await CT(w.localStore,P.query,!1).then(({documents:A})=>P.view.ma(A,b)));const C=k&&k.targetChanges.get(P.targetId),L=k&&k.targetMismatches.get(P.targetId)!=null,x=P.view.applyChanges(b,w.isPrimaryClient,C,L);return LT(w,P.targetId,x.wa),x.snapshot}(t,d,p,m);const i=await CT(t.localStore,e,!0),o=new I2(e,i.Ts),a=o.ma(i.documents),l=vc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);LT(t,n,u.wa);const h=new C2(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function k2(t,e,n){const r=ve(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Cd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await pg(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&i_(r.remoteStore,s.targetId),mg(r,s.targetId)}).catch(mc)):(mg(r,s.targetId),await pg(r.localStore,s.targetId,!0))}async function D2(t,e){const n=ve(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),i_(n.remoteStore,r.targetId))}async function L2(t,e,n){const r=B2(t);try{const s=await function(o,a){const l=ve(o),u=gt.now(),h=a.reduce((m,_)=>m.add(_.key),Ie());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=zr(),w=Ie();return l.cs.getEntries(m,h).next(P=>{_=P,_.forEach((D,k)=>{k.isValidDocument()||(w=w.add(D))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,_)).next(P=>{d=P;const D=[];for(const k of a){const b=tB(k,d.get(k.key).overlayedDocument);b!=null&&D.push(new Ys(k.key,b,DS(b.value.mapValue),Yn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,D,a)}).next(P=>{p=P;const D=P.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(m,P.batchId,D)})}).then(()=>({batchId:p.batchId,changes:jS(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new st(Le)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,s.batchId,n),await Tc(r,s.changes),await Dd(r.remoteStore)}catch(s){const i=u_(s,"Failed to persist write");n.reject(i)}}async function wR(t,e){const n=ve(t);try{const r=await YB(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(We(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?We(o.va):s.removedDocuments.size>0&&(We(o.va),o.va=!1))}),await Tc(n,r,e)}catch(r){await mc(r)}}function DT(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ve(o);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(u=!0)}),u&&f_(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function M2(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new st(de.comparator);o=o.insert(i,qt.newNoDocument(i,Te.min()));const a=Ie().add(i),l=new Nd(Te.min(),new Map,new st(Le),o,a);await wR(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),g_(r)}else await pg(r.localStore,e,!1).then(()=>mg(r,e,n)).catch(mc)}async function x2(t,e){const n=ve(t),r=e.batch.batchId;try{const s=await zB(n.localStore,e);IR(n,r,null),AR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Tc(n,s)}catch(s){await mc(s)}}async function V2(t,e,n){const r=ve(t);try{const s=await function(o,a){const l=ve(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(We(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);IR(r,e,n),AR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Tc(r,s)}catch(s){await mc(s)}}function AR(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function IR(t,e,n){const r=ve(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function mg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||CR(t,r)})}function CR(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(i_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),g_(t))}function LT(t,e,n){for(const r of n)r instanceof ER?(t.La.addReference(r.key,e),F2(t,r)):r instanceof TR?(ce("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||CR(t,r.key)):ye()}function F2(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ce("SyncEngine","New document in limbo: "+n),t.xa.add(r),g_(t))}function g_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new de(ze.fromString(e)),r=t.qa.next();t.Na.set(r,new S2(n)),t.Oa=t.Oa.insert(n,r),pR(t.remoteStore,new ws(pr(Id(n.path)),r,"TargetPurposeLimboResolution",qm.oe))}}async function Tc(t,e,n){const r=ve(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){s.push(u);const d=s_.Wi(l.targetId,u);i.push(d)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,u){const h=ve(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>j.forEach(u,p=>j.forEach(p.$i,m=>h.persistence.referenceDelegate.addReference(d,p.targetId,m)).next(()=>j.forEach(p.Ui,m=>h.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))}catch(d){if(!_c(d))throw d;ce("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const p=d.targetId;if(!d.fromCache){const m=h.os.get(p),_=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(p,w)}}}(r.localStore,i))}async function U2(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());const r=await uR(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new te(B.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Tc(n,r.hs)}}function $2(t,e){const n=ve(t),r=n.Na.get(e);if(r&&r.va)return Ie().add(r.key);{let s=Ie();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function SR(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M2.bind(null,e),e.Ca.d_=w2.bind(null,e.eventManager),e.Ca.$a=A2.bind(null,e.eventManager),e}function B2(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V2.bind(null,e),e}class MT{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Od(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return GB(this.persistence,new qB,e.initialUser,this.serializer)}createPersistence(e){return new HB(r_.Zr,this.serializer)}createSharedClientState(e){return new e2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class H2{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>DT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=U2.bind(null,this.syncEngine),await E2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new b2}()}createDatastore(e){const n=Od(e.databaseInfo.databaseId),r=function(i){return new s2(i)}(e.databaseInfo);return function(i,o,a,l){return new a2(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new c2(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>DT(this.syncEngine,n,0),function(){return RT.D()?new RT:new t2}())}createSyncEngine(e,n){return function(s,i,o,a,l,u,h){const d=new R2(s,i,o,a,l,u);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ve(s);ce("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ec(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Gr("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=$t.UNAUTHENTICATED,this.clientId=NS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{ce("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(ce("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new te(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=u_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qf(t,e){t.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await uR(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function xT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await q2(t);ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>PT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>PT(e.remoteStore,s)),t._onlineComponents=e}function j2(t){return t.name==="FirebaseError"?t.code===B.FAILED_PRECONDITION||t.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function q2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await qf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!j2(n))throw n;Uo("Error using user provided cache. Falling back to memory cache: "+n),await qf(t,new MT)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),await qf(t,new MT);return t._offlineComponents}async function __(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),await xT(t,t._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),await xT(t,new H2))),t._onlineComponents}function K2(t){return __(t).then(e=>e.syncEngine)}function G2(t){return __(t).then(e=>e.datastore)}async function Nh(t){const e=await __(t),n=e.eventManager;return n.onListen=P2.bind(null,e.syncEngine),n.onUnlisten=k2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=N2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=D2.bind(null,e.syncEngine),n}function z2(t,e,n={}){const r=new fr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new m_({next:p=>{o.enqueueAndForget(()=>d_(i,d));const m=p.docs.has(a);!m&&p.fromCache?u.reject(new te(B.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?u.reject(new te(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new p_(Id(a.path),h,{includeMetadataChanges:!0,_a:!0});return h_(i,d)}(await Nh(t),t.asyncQueue,e,n,r)),r.promise}function Y2(t,e,n={}){const r=new fr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new m_({next:p=>{o.enqueueAndForget(()=>d_(i,d)),p.fromCache&&l.source==="server"?u.reject(new te(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new p_(a,h,{includeMetadataChanges:!0,_a:!0});return h_(i,d)}(await Nh(t),t.asyncQueue,e,n,r)),r.promise}function Q2(t,e,n){const r=new fr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await G2(t);r.resolve(async function(o,a,l){var u;const h=ve(o),{request:d,ut:p,parent:m}=TB(h.serializer,B$(a),l);h.connection.Fo||delete d.parent;const _=(await h.Lo("RunAggregationQuery",h.serializer.databaseId,m,d,1)).filter(P=>!!P.result);We(_.length===1);const w=(u=_[0].result)===null||u===void 0?void 0:u.aggregateFields;return Object.keys(w).reduce((P,D)=>(P[p[D]]=w[D],P),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(t,e,n){if(!n)throw new te(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function X2(t,e,n,r){if(e===!0&&r===!0)throw new te(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function FT(t){if(!de.isDocumentKey(t))throw new te(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function UT(t){if(de.isDocumentKey(t))throw new te(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ld(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ye()}function Cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ld(t);throw new te(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function J2(t,e){if(e<=0)throw new te(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new te(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new te(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new te(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Md{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $T({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new te(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new te(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $T(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new c$;switch(r.type){case"firstParty":return new f$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=VT.get(n);r&&(ce("ComponentProvider","Removing Datastore"),VT.delete(n),r.terminate())}(this),Promise.resolve()}}function Z2(t,e,n,r={}){var s;const i=(t=Cn(t,Md))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=$t.MOCK_USER;else{a=yI(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new te(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new $t(u)}t._authCredentials=new u$(new PS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ar(this.firestore,e,this._query)}}class an{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ns(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}}class Ns extends Ar{constructor(e,n,r){super(e,n,Id(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new de(e))}withConverter(e){return new Ns(this.firestore,e,this._path)}}function NR(t,e,...n){if(t=rt(t),PR("collection","path",e),t instanceof Md){const r=ze.fromString(e,...n);return UT(r),new Ns(t,null,r)}{if(!(t instanceof an||t instanceof Ns))throw new te(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return UT(r),new Ns(t.firestore,null,r)}}function eH(t,e,...n){if(t=rt(t),arguments.length===1&&(e=NS.newId()),PR("doc","path",e),t instanceof Md){const r=ze.fromString(e,...n);return FT(r),new an(t,null,new de(r))}{if(!(t instanceof an||t instanceof Ns))throw new te(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return FT(r),new an(t.firestore,t instanceof Ns?t.converter:null,new de(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new dR(this,"async_queue_retry"),this.Eu=()=>{const n=jf();n&&ce("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=jf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=jf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new fr;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!_c(e))throw e;ce("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Gr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const s=c_.createAndSchedule(this,e,n,r,i=>this.Vu(i));return this.lu.push(s),s}du(){this.hu&&ye()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}function BT(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Yr extends Md{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new tH}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||OR(this),this._firestoreClient.terminate()}}function nH(t,e){const n=typeof t=="object"?t:um(),r=typeof t=="string"?t:"(default)",s=cm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=mI("firestore");i&&Z2(s,...i)}return s}function bc(t){return t._firestoreClient||OR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function OR(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,u,h){return new S$(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,RR(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new W2(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rH{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class sH{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ko(kt.fromBase64String(e))}catch(n){throw new te(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ko(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iH=/^__.*__$/;class oH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ys(e,this.data,this.fieldMask,n,this.fieldTransforms):new yc(e,this.data,n,this.fieldTransforms)}}class kR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ys(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function DR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}class E_{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.yu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new E_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:r,Du:!1});return s.vu(e),s}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:r,Du:!1});return s.yu(),s}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Oh(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(DR(this.wu)&&iH.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class aH{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Od(e)}Nu(e,n,r,s=!1){return new E_({wu:e,methodName:n,Ou:r,path:Pt.emptyPath(),Du:!1,xu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fd(t){const e=t._freezeSettings(),n=Od(t._databaseId);return new aH(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lH(t,e,n,r,s,i={}){const o=t.Nu(i.merge||i.mergeFields?2:0,e,n,s);T_("Data must be an object, but it was:",o,r);const a=MR(r,o);let l,u;if(i.merge)l=new bn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=_g(e,d,n);if(!o.contains(p))throw new te(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);VR(h,p)||h.push(p)}l=new bn(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new oH(new gn(a),l,u)}class Ud extends y_{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ud}}function cH(t,e,n,r){const s=t.Nu(1,e,n);T_("Data must be an object, but it was:",s,r);const i=[],o=gn.empty();Ui(r,(l,u)=>{const h=b_(e,l,n);u=rt(u);const d=s.Cu(h);if(u instanceof Ud)i.push(h);else{const p=wc(u,d);p!=null&&(i.push(h),o.set(h,p))}});const a=new bn(i);return new kR(o,a,s.fieldTransforms)}function uH(t,e,n,r,s,i){const o=t.Nu(1,e,n),a=[_g(e,r,n)],l=[s];if(i.length%2!=0)throw new te(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(_g(e,i[p])),l.push(i[p+1]);const u=[],h=gn.empty();for(let p=a.length-1;p>=0;--p)if(!VR(u,a[p])){const m=a[p];let _=l[p];_=rt(_);const w=o.Cu(m);if(_ instanceof Ud)u.push(m);else{const P=wc(_,w);P!=null&&(u.push(m),h.set(m,P))}}const d=new bn(u);return new kR(h,d,o.fieldTransforms)}function LR(t,e,n,r=!1){return wc(n,t.Nu(r?4:3,e))}function wc(t,e){if(xR(t=rt(t)))return T_("Unsupported field value:",e,t),MR(t,e);if(t instanceof y_)return function(r,s){if(!DR(s.wu))throw s.Mu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Mu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=wc(a,s.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Y$(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=gt.fromDate(r);return{timestampValue:Rh(s.serializer,i)}}if(r instanceof gt){const i=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rh(s.serializer,i)}}if(r instanceof Vd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ko)return{bytesValue:nR(s.serializer,r._byteString)};if(r instanceof an){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:t_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof v_)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return Xm(a.serializer,l)})}}}}}}(r,s);throw s.Mu(`Unsupported field value: ${Ld(r)}`)}(t,e)}function MR(t,e){const n={};return OS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(t,(r,s)=>{const i=wc(s,e.bu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function xR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof Vd||t instanceof Ko||t instanceof an||t instanceof y_||t instanceof v_)}function T_(t,e,n){if(!xR(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Ld(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function _g(t,e,n){if((e=rt(e))instanceof xd)return e._internalPath;if(typeof e=="string")return b_(t,e);throw Oh("Field path arguments must be of type string or ",t,!1,void 0,n)}const hH=new RegExp("[~\\*/\\[\\]]");function b_(t,e,n){if(e.search(hH)>=0)throw Oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xd(...e.split("."))._internalPath}catch{throw Oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Oh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new te(B.INVALID_ARGUMENT,a+t+l)}function VR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($d("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dH extends w_{data(){return super.data()}}function $d(t,e){return typeof e=="string"?b_(t,e):e instanceof xd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class A_{}class Bd extends A_{}function i3(t,e,...n){let r=[];e instanceof A_&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof I_).length,a=i.filter(l=>l instanceof Hd).length;if(o>1||o>0&&a>0)throw new te(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Hd extends Bd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Hd(e,n,r)}_apply(e){const n=this._parse(e);return UR(e._query,n),new Ar(e.firestore,e.converter,cg(e._query,n))}_parse(e){const n=Fd(e.firestore);return function(i,o,a,l,u,h,d){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new te(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){WT(d,h);const m=[];for(const _ of d)m.push(HT(l,i,_));p={arrayValue:{values:m}}}else p=HT(l,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||WT(d,h),p=LR(a,o,d,h==="in"||h==="not-in");return pt.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function o3(t,e,n){const r=e,s=$d("where",t);return Hd._create(s,r,n)}class I_ extends A_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new I_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)UR(o,l),o=cg(o,l)}(e._query,n),new Ar(e.firestore,e.converter,cg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class C_ extends Bd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new C_(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new te(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new te(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hl(i,o)}(e._query,this._field,this._direction);return new Ar(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new $i(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function a3(t,e="asc"){const n=e,r=$d("orderBy",t);return C_._create(r,n)}class S_ extends Bd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new S_(e,n,r)}_apply(e){return new Ar(e.firestore,e.converter,Ih(e._query,this._limit,this._limitType))}}function l3(t){return J2("limit",t),S_._create("limit",t,"F")}class R_ extends Bd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new R_(e,n,r)}_apply(e){const n=fH(e,this.type,this._docOrFields,this._inclusive);return new Ar(e.firestore,e.converter,function(s,i){return new $i(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function c3(...t){return R_._create("startAfter",t,!1)}function fH(t,e,n,r){if(n[0]=rt(n[0]),n[0]instanceof w_)return function(i,o,a,l,u){if(!l)throw new te(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const d of No(i))if(d.field.isKeyField())h.push(Ah(o,l.key));else{const p=l.data.field(d.field);if(Ad(p))throw new te(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const m=d.field.canonicalString();throw new te(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(p)}return new Wo(h,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Fd(t.firestore);return function(o,a,l,u,h,d){const p=o.explicitOrderBy;if(h.length>p.length)throw new te(B.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let _=0;_<h.length;_++){const w=h[_];if(p[_].field.isKeyField()){if(typeof w!="string")throw new te(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof w}`);if(!Qm(o)&&w.indexOf("/")!==-1)throw new te(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${w}' contains a slash.`);const P=o.path.child(ze.fromString(w));if(!de.isDocumentKey(P))throw new te(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const D=new de(P);m.push(Ah(a,D))}else{const P=LR(l,u,w);m.push(P)}}return new Wo(m,d)}(t._query,t.firestore._databaseId,s,e,n,r)}}function HT(t,e,n){if(typeof(n=rt(n))=="string"){if(n==="")throw new te(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qm(e)&&n.indexOf("/")!==-1)throw new te(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ze.fromString(n));if(!de.isDocumentKey(r))throw new te(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ah(t,new de(r))}if(n instanceof an)return Ah(t,n._key);throw new te(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ld(n)}.`)}function WT(t,e){if(!Array.isArray(t)||t.length===0)throw new te(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UR(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new te(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class pH{convertValue(e,n="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ye()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ui(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ct(o.doubleValue));return new v_(i)}convertGeoPoint(e){return new Vd(ct(e.latitude),ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Km(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ul(e));default:return null}}convertTimestamp(e){const n=Fs(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ze.fromString(e);We(cR(r));const s=new $l(r.get(1),r.get(3)),i=new de(r.popFirst(5));return s.isEqual(n)||Gr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gH(t,e,n){let r;return r=t?t.toFirestore(e):e,r}function mH(){return new rH("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $R extends w_{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($d("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class xu extends $R{data(e={}){return super.data(e)}}class BR{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new el(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xu(this._firestore,this._userDataWriter,r.key,r,new el(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new xu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new el(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new xu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new el(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:_H(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function _H(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(t){t=Cn(t,an);const e=Cn(t.firestore,Yr);return z2(bc(e),t._key).then(n=>WR(e,t,n))}class Wd extends pH{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ko(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,n)}}function yH(t){t=Cn(t,Ar);const e=Cn(t.firestore,Yr),n=bc(e),r=new Wd(e);return FR(t._query),Y2(n,t._query).then(s=>new BR(e,r,t,s))}function u3(t,e,n,...r){t=Cn(t,an);const s=Cn(t.firestore,Yr),i=Fd(s);let o;return o=typeof(e=rt(e))=="string"||e instanceof xd?uH(i,"updateDoc",t._key,e,n,r):cH(i,"updateDoc",t._key,e),N_(s,[o.toMutation(t._key,Yn.exists(!0))])}function h3(t){return N_(Cn(t.firestore,Yr),[new Jm(t._key,Yn.none())])}function d3(t,e){const n=Cn(t.firestore,Yr),r=eH(t),s=gH(t.converter,e);return N_(n,[lH(Fd(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Yn.exists(!1))]).then(()=>r)}function P_(t,...e){var n,r,s;t=rt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||BT(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(BT(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,u,h;if(t instanceof an)u=Cn(t.firestore,Yr),h=Id(t._key.path),l={next:d=>{e[o]&&e[o](WR(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Cn(t,Ar);u=Cn(d.firestore,Yr),h=d._query;const p=new Wd(u);l={next:m=>{e[o]&&e[o](new BR(u,p,d,m))},error:e[o+1],complete:e[o+2]},FR(t._query)}return function(p,m,_,w){const P=new m_(w),D=new p_(m,P,_);return p.asyncQueue.enqueueAndForget(async()=>h_(await Nh(p),D)),()=>{P.za(),p.asyncQueue.enqueueAndForget(async()=>d_(await Nh(p),D))}}(bc(u),h,a,l)}function N_(t,e){return function(r,s){const i=new fr;return r.asyncQueue.enqueueAndForget(async()=>L2(await K2(r),s,i)),i.promise}(bc(t),e)}function WR(t,e,n){const r=n.docs.get(e._key),s=new Wd(t);return new $R(t,s,e._key,r,new el(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(t){return vH(t,{count:mH()})}function vH(t,e){const n=Cn(t.firestore,Yr),r=bc(n),s=I$(e,(i,o)=>new iB(o,i.aggregateType,i._internalFieldPath));return Q2(r,t._query,s).then(i=>function(a,l,u){const h=new Wd(a);return new sH(l,h,u)}(n,t,i))}(function(e,n=!0){(function(s){pa=s})(Gs),Er(new Qn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Yr(new h$(r.getProvider("auth-internal")),new g$(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new te(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $l(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),An(iT,"4.7.1",e),An(iT,"4.7.1","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR="firebasestorage.googleapis.com",qR="storageBucket",EH=2*60*1e3,TH=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at extends wr{constructor(e,n,r=0){super(Kf(e),`Firebase Storage: ${n} (${Kf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,at.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Kf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ot;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ot||(ot={}));function Kf(t){return"storage/"+t}function O_(){const t="An unknown error occurred, please check the error payload for server response.";return new at(ot.UNKNOWN,t)}function bH(t){return new at(ot.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function wH(t){return new at(ot.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function AH(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new at(ot.UNAUTHENTICATED,t)}function IH(){return new at(ot.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function CH(t){return new at(ot.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function SH(){return new at(ot.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RH(){return new at(ot.CANCELED,"User canceled the upload/download.")}function PH(t){return new at(ot.INVALID_URL,"Invalid URL '"+t+"'.")}function NH(t){return new at(ot.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function OH(){return new at(ot.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+qR+"' property when initializing the app?")}function kH(){return new at(ot.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function DH(){return new at(ot.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function LH(t){return new at(ot.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function yg(t){return new at(ot.INVALID_ARGUMENT,t)}function KR(){return new at(ot.APP_DELETED,"The Firebase app was deleted.")}function MH(t){return new at(ot.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _l(t,e){return new at(ot.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ba(t){throw new at(ot.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=wn.makeFromUrl(e,n)}catch{return new wn(e,"")}if(r.path==="")return r;throw NH(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u(C){C.path_=decodeURIComponent(C.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${h}/b/${s}/o${p}`,"i"),_={bucket:1,path:3},w=n===jR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",D=new RegExp(`^https?://${w}/${s}/${P}`,"i"),b=[{regex:a,indices:l,postModify:i},{regex:m,indices:_,postModify:u},{regex:D,indices:{bucket:1,path:2},postModify:u}];for(let C=0;C<b.length;C++){const L=b[C],x=L.regex.exec(e);if(x){const A=x[L.indices.bucket];let v=x[L.indices.path];v||(v=""),r=new wn(A,v),L.postModify(r);break}}if(r==null)throw PH(e);return r}}class xH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VH(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...P){u||(u=!0,e.apply(null,P))}function d(P){s=setTimeout(()=>{s=null,t(m,l())},P)}function p(){i&&clearTimeout(i)}function m(P,...D){if(u){p();return}if(P){p(),h.call(null,P,...D);return}if(l()||o){p(),h.call(null,P,...D);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,d(b)}let _=!1;function w(P){_||(_=!0,p(),!u&&(s!==null?(P||(a=2),clearTimeout(s),d(0)):P||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,w(!0)},n),w}function FH(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UH(t){return t!==void 0}function $H(t){return typeof t=="object"&&!Array.isArray(t)}function k_(t){return typeof t=="string"||t instanceof String}function jT(t){return D_()&&t instanceof Blob}function D_(){return typeof Blob<"u"}function qT(t,e,n,r){if(r<e)throw yg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw yg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function GR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var _i;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(_i||(_i={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BH(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HH{constructor(e,n,r,s,i,o,a,l,u,h,d,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,_)=>{this.resolve_=m,this.reject_=_,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new pu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===_i.NO_ERROR,l=i.getStatus();if(!a||BH(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===_i.ABORT;r(!1,new pu(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new pu(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());UH(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=O_();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?KR():RH();o(l)}else{const l=SH();o(l)}};this.canceled_?n(!1,new pu(!1,null,!0)):this.backoffId_=VH(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&FH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function WH(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function jH(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qH(t,e){e&&(t["X-Firebase-GMPID"]=e)}function KH(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function GH(t,e,n,r,s,i,o=!0){const a=GR(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return qH(u,e),WH(u,n),jH(u,i),KH(u,r),new HH(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function YH(...t){const e=zH();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(D_())return new Blob(t);throw new at(ot.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function QH(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XH(t){if(typeof atob>"u")throw LH("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Gf{constructor(e,n){this.data=e,this.contentType=n||null}}function JH(t,e){switch(t){case cr.RAW:return new Gf(zR(e));case cr.BASE64:case cr.BASE64URL:return new Gf(YR(t,e));case cr.DATA_URL:return new Gf(eW(e),tW(e))}throw O_()}function zR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function ZH(t){let e;try{e=decodeURIComponent(t)}catch{throw _l(cr.DATA_URL,"Malformed data URL.")}return zR(e)}function YR(t,e){switch(t){case cr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw _l(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case cr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw _l(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=XH(e)}catch(s){throw s.message.includes("polyfill")?s:_l(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class QR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw _l(cr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=nW(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function eW(t){const e=new QR(t);return e.base64?YR(cr.BASE64,e.rest):ZH(e.rest)}function tW(t){return new QR(t).contentType}function nW(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n){let r=0,s="";jT(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(jT(this.data_)){const r=this.data_,s=QH(r,e,n);return s===null?null:new Ts(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ts(r,!0)}}static getBlob(...e){if(D_()){const n=e.map(r=>r instanceof Ts?r.data_:r);return new Ts(YH.apply(null,n))}else{const n=e.map(o=>k_(o)?JH(cr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Ts(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t){let e;try{e=JSON.parse(t)}catch{return null}return $H(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rW(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function sW(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function JR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iW(t,e){return e}class nn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||iW}}let gu=null;function oW(t){return!k_(t)||t.length<2?t:JR(t)}function ZR(){if(gu)return gu;const t=[];t.push(new nn("bucket")),t.push(new nn("generation")),t.push(new nn("metageneration")),t.push(new nn("name","fullPath",!0));function e(i,o){return oW(o)}const n=new nn("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new nn("size");return s.xform=r,t.push(s),t.push(new nn("timeCreated")),t.push(new nn("updated")),t.push(new nn("md5Hash",null,!0)),t.push(new nn("cacheControl",null,!0)),t.push(new nn("contentDisposition",null,!0)),t.push(new nn("contentEncoding",null,!0)),t.push(new nn("contentLanguage",null,!0)),t.push(new nn("contentType",null,!0)),t.push(new nn("metadata","customMetadata",!0)),gu=t,gu}function aW(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new wn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function lW(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return aW(r,t),r}function e0(t,e,n){const r=XR(e);return r===null?null:lW(t,r,n)}function cW(t,e,n,r){const s=XR(e);if(s===null||!k_(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const h=t.bucket,d=t.fullPath,p="/b/"+o(h)+"/o/"+o(d),m=L_(p,n,r),_=GR({alt:"media",token:u});return m+_})[0]}function uW(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class t0{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t){if(!t)throw O_()}function hW(t,e){function n(r,s){const i=e0(t,s,e);return n0(i!==null),i}return n}function dW(t,e){function n(r,s){const i=e0(t,s,e);return n0(i!==null),cW(i,s,t.host,t._protocol)}return n}function r0(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=IH():s=AH():n.getStatus()===402?s=wH(t.bucket):n.getStatus()===403?s=CH(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function fW(t){const e=r0(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=bH(t.path)),i.serverResponse=s.serverResponse,i}return n}function pW(t,e,n){const r=e.fullServerUrl(),s=L_(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new t0(s,i,dW(t,n),o);return a.errorHandler=fW(e),a}function gW(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function mW(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=gW(null,e)),r}function _W(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let C=0;C<2;C++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=mW(e,r,s),h=uW(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Ts.getBlob(d,r,p);if(m===null)throw kH();const _={name:u.fullPath},w=L_(i,t.host,t._protocol),P="POST",D=t.maxUploadRetryTime,k=new t0(w,P,hW(t,n),D);return k.urlParams=_,k.headers=o,k.body=m.uploadData(),k.errorHandler=r0(e),k}class yW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_i.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_i.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_i.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Ba("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ba("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ba("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ba("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ba("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class vW extends yW{initXhr(){this.xhr_.responseType="text"}}function s0(){return new vW}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){this._service=e,n instanceof wn?this._location=n:this._location=wn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Pi(e,n)}get root(){const e=new wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return JR(this._location.path)}get storage(){return this._service}get parent(){const e=rW(this._location.path);if(e===null)return null;const n=new wn(this._location.bucket,e);return new Pi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw MH(e)}}function EW(t,e,n){t._throwIfRoot("uploadBytes");const r=_W(t.storage,t._location,ZR(),new Ts(e,!0),n);return t.storage.makeRequestWithTokens(r,s0).then(s=>({metadata:s,ref:t}))}function TW(t){t._throwIfRoot("getDownloadURL");const e=pW(t.storage,t._location,ZR());return t.storage.makeRequestWithTokens(e,s0).then(n=>{if(n===null)throw DH();return n})}function bW(t,e){const n=sW(t._location.path,e),r=new wn(t._location.bucket,n);return new Pi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wW(t){return/^[A-Za-z]+:\/\//.test(t)}function AW(t,e){return new Pi(t,e)}function i0(t,e){if(t instanceof M_){const n=t;if(n._bucket==null)throw OH();const r=new Pi(n,n._bucket);return e!=null?i0(r,e):r}else return e!==void 0?bW(t,e):t}function IW(t,e){if(e&&wW(e)){if(t instanceof M_)return AW(t,e);throw yg("To use ref(service, url), the first argument must be a Storage instance.")}else return i0(t,e)}function KT(t,e){const n=e==null?void 0:e[qR];return n==null?null:wn.makeFromBucketSpec(n,t)}function CW(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:yI(s,t.app.options.projectId))}class M_{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=jR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=EH,this._maxUploadRetryTime=TH,this._requests=new Set,s!=null?this._bucket=wn.makeFromBucketSpec(s,this._host):this._bucket=KT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=wn.makeFromBucketSpec(this._url,e):this._bucket=KT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Pi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new xH(KR());{const o=GH(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const GT="@firebase/storage",zT="0.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="storage";function SW(t,e,n){return t=rt(t),EW(t,e,n)}function RW(t){return t=rt(t),TW(t)}function PW(t,e){return t=rt(t),IW(t,e)}function NW(t=um(),e){t=rt(t);const r=cm(t,o0).getImmediate({identifier:e}),s=mI("storage");return s&&OW(r,...s),r}function OW(t,e,n,r={}){CW(t,e,n,r)}function kW(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new M_(n,r,s,e,Gs)}function DW(){Er(new Qn(o0,kW,"PUBLIC").setMultipleInstances(!0)),An(GT,zT,""),An(GT,zT,"esm2017")}DW();const zf=new WeakMap;function a0(t,e){return zf.has(e)||zf.set(e,{f:{},r:{},s:{},u:{}}),zf.get(e)}function LW(t,e,n,r){if(!t)return n;const[s,i]=l0(t);if(!s)return n;const o=a0(void 0,r)[s]||{},a=e||i;return a&&a in o?o[a]:n}function MW(t,e,n,r){if(!t)return;const[s,i]=l0(t);if(!s)return;const o=a0(void 0,r)[s],a=e||i;if(a)return n.then(l=>{o[a]=l}).catch(or),a}function l0(t){return pV(t)||gV(t)?["f",t.path]:mV(t)?["r",t.toString()]:_V(t)?["s",t.toString()]:[]}const Yf=new WeakMap;function xW(t,e,n){const r=Em();Yf.has(r)||Yf.set(r,new Map);const s=Yf.get(r),i=MW(e,n,t,r);return i&&s.set(i,t),i?()=>s.delete(i):or}const VW={toFirestore(t){return t},fromFirestore(t,e){return t.exists()?Object.defineProperties(t.data(e),{id:{value:t.id}}):null}};function vg(t,e,n,r){if(!dV(t))return[t,{}];const s=[{},{}],i=Object.keys(n).reduce((a,l)=>{const u=n[l];return a[u.path]=u.data(),a},{});function o(a,l,u,h){l=l||{};const[d,p]=h;Object.getOwnPropertyNames(a).forEach(m=>{const _=Object.getOwnPropertyDescriptor(a,m);_&&!_.enumerable&&Object.defineProperty(d,m,_)});for(const m in a){const _=a[m];if(_==null||_ instanceof Date||_ instanceof gt||_ instanceof Vd)d[m]=_;else if(bm(_)){const w=u+m;d[m]=w in n?l[m]:_.path,p[w]=_.converter?_:_.withConverter(r.converter)}else if(Array.isArray(_)){d[m]=Array(_.length);for(let w=0;w<_.length;w++){const P=_[w];P&&P.path in i&&(d[m][w]=i[P.path])}o(_,l[m]||d[m],u+m+".",[d[m],p])}else xi(_)?(d[m]={},o(_,l[m],u+m+".",[d[m],p])):d[m]=_}}return o(t,e,"",s),s}const x_={reset:!1,wait:!0,maxRefDepth:2,converter:VW,snapshotOptions:{serverTimestamps:"estimate"}};function kh(t){for(const e in t)t[e].unsub()}function Eg(t,e,n,r,s,i,o,a,l){const[u,h]=vg(r.data(t.snapshotOptions),Tm(e,n),s,t);i.set(e,n,u),Tg(t,e,n,s,h,i,o,a,l)}function FW({ref:t,target:e,path:n,depth:r,resolve:s,reject:i,ops:o},a){const l=Object.create(null);let u=or;return a.once?HR(t).then(h=>{h.exists()?Eg(a,e,n,h,l,o,r,s,i):(o.set(e,n,null),s())}).catch(i):u=P_(t,h=>{h.exists()?Eg(a,e,n,h,l,o,r,s,i):(o.set(e,n,null),s())},i),()=>{u(),kh(l)}}function Tg(t,e,n,r,s,i,o,a,l){const u=Object.keys(s);if(Object.keys(r).filter(w=>u.indexOf(w)<0).forEach(w=>{r[w].unsub(),delete r[w]}),!u.length||++o>t.maxRefDepth)return a(n);let d=0;const p=u.length,m=Object.create(null);function _(w){w in m&&++d>=p&&a(n)}u.forEach(w=>{const P=r[w],D=s[w],k=`${n}.${w}`;if(m[k]=!0,P)if(P.path!==D.path)P.unsub();else return;r[w]={data:()=>Tm(e,k),unsub:FW({ref:D,target:e,path:k,depth:o,ops:i,resolve:_.bind(null,k),reject:l},t),path:D.path}})}function UW(t,e,n,r,s,i){const o=Object.assign({},x_,i),{snapshotListenOptions:a,snapshotOptions:l,wait:u,once:h}=o,d="value";let p=Yt(u?[]:t.value);u||n.set(t,d,[]);const m=r;let _,w=or;const P=[],D={added:({newIndex:b,doc:C})=>{P.splice(b,0,Object.create(null));const L=P[b],[x,A]=vg(C.data(l),void 0,L,o);n.add(nr(p),b,x),Tg(o,p,`${d}.${b}`,L,A,n,0,r.bind(null,C),s)},modified:({oldIndex:b,newIndex:C,doc:L})=>{const x=nr(p),A=P[b],v=x[b],[y,T]=vg(L.data(l),v,A,o);P.splice(C,0,A),n.remove(x,b),n.add(x,C,y),Tg(o,p,`${d}.${C}`,A,T,n,0,r,s)},removed:({oldIndex:b})=>{const C=nr(p);n.remove(C,b),kh(P.splice(b,1)[0])}};function k(b){const C=b.docChanges(a);if(!_&&C.length){_=!0;let L=0;const x=C.length,A=Object.create(null);for(let v=0;v<x;v++)A[C[v].doc.id]=!0;r=v=>{v&&v.id in A&&++L>=x&&(u&&(n.set(t,d,nr(p)),p=t),m(nr(p)),r=or)}}C.forEach(L=>{D[L.type](L)}),C.length||(u&&(n.set(t,d,nr(p)),p=t),r(nr(p)))}return h?yH(e).then(k).catch(s):w=P_(e,k,s),b=>{if(w(),b){const C=typeof b=="function"?b():[];n.set(t,d,C)}P.forEach(kh)}}function $W(t,e,n,r,s,i){const o=Object.assign({},x_,i),a="value",l=Object.create(null);r=yV(r,()=>Tm(t,a));let u=or;function h(d){d.exists()?Eg(o,t,a,d,l,n,0,r,s):(n.set(t,a,null),r(null))}return o.once?HR(e).then(h).catch(s):u=P_(e,h,s),d=>{if(u(),d){const p=typeof d=="function"?d():null;n.set(t,a,p)}kh(l)}}const YT=Symbol();function BW(t,e){let n=or;const r=Object.assign({},x_,e),s=nr(t),i=r.target||Yt();EV()&&(r.once=!0);const o=LW(s,r.ssrKey,YT,Em()),a=o!==YT;a&&(i.value=o);let l=!a;const u=Yt(!1),h=Yt(),d=Qh(),p=Hh();let m=or;function _(){let D=nr(t);const k=new Promise((b,C)=>{if(n(r.reset),!D)return n=or,b(null);u.value=l,l=!0,D.converter||(D=D.withConverter(r.converter)),n=(bm(D)?$W:UW)(i,D,HW,b,C,r)}).catch(b=>(d.value===k&&(h.value=b),Promise.reject(b))).finally(()=>{d.value===k&&(u.value=!1)});d.value=k}let w=or;(tt(t)||typeof t=="function")&&(w=$r(t,_)),_(),s&&(m=xW(d.value,s,r.ssrKey)),un()&&Xg(()=>d.value),p&&Vg(P);function P(D=r.reset){w(),m(),n(D)}return Object.defineProperties(i,{error:{get:()=>h},data:{get:()=>i},pending:{get:()=>u},promise:{get:()=>d},stop:{get:()=>P}})}const HW={set:(t,e,n)=>uV(t,e,n),add:(t,e,n)=>t.splice(e,0,n),remove:(t,e)=>t.splice(e,1)};function p3(t,e){return BW(t,{target:Yt([]),...e})}function WW(t){return jW({initialUser:t,dependencies:{popupRedirectResolver:O1,persistence:[Hx,Nx,ZI]}})}const c0=Symbol("VueFireAuth");function jW({dependencies:t,initialUser:e}){return(n,r)=>{const[s,i]=qW(n,r,e,t);wV(s,i)}}function qW(t,e,n,r,s=px(t,r)){const i=TV(t,e).run(()=>Yt(n));return bV.set(t,i),e.provide(c0,s),[i,s]}function g3(t){return cV?Qt(c0):null}function KW(t,{firebaseApp:e,modules:n=[]}){t.provide(lC,e);for(const r of n)r(e,t)}const GW={BASE_URL:"/admin_vue/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE_URL:"/admin_vue/",VITE_FIREBASE_API_KEY:"AIzaSyBSUE3YP53DYNtCapfflByRDFZwsCOfn7M",VITE_FIREBASE_APP_ID:"1:758125234792:web:d4d011f55ea8cf718149dd",VITE_FIREBASE_AUTH_DOMAIN:"project-1ebc9.firebaseapp.com",VITE_FIREBASE_DATABASE_URL:"https://project-1ebc9-default-rtdb.firebaseio.com",VITE_FIREBASE_MEASUREMENT_ID:"G-73RXBCTTJ8",VITE_FIREBASE_PROJECT_ID:"project-1ebc9",VITE_FIREBASE_STORAGE_BUCKET:"project-1ebc9.appspot.com",VITE_FIREBVITE_FIREBASE_STORAGE_BUCKETASE_MESSAGING_SENDER_ID:"758125234792"},{VITE_FIREBASE_API_KEY:zW,VITE_FIREBASE_AUTH_DOMAIN:YW,VITE_FIREBASE_DATABASE_URL:QW,VITE_FIREBASE_PROJECT_ID:XW,VITE_FIREBASE_STORAGE_BUCKET:JW,VITE_FIREBASE_MESSAGING_SENDER_ID:ZW,VITE_FIREBASE_APP_ID:ej,VITE_FIREBASE_MEASUREMENT_ID:tj}=GW,V_=II({apiKey:zW,authDomain:YW,databaseURL:QW,projectId:XW,storageBucket:JW,messagingSenderId:ZW,appId:ej,measurementId:tj}),u0=nH(V_),m3=NR(u0,"user-categories"),_3=NR(u0,"customers"),nj=NW(V_),y3=(t,e)=>new Promise((n,r)=>{const s=`${e}/${t.name}`,i=PW(nj,s);SW(i,t).then(async o=>{console.log("Upload successful!");const a=await RW(o.ref);n(a)}).catch(o=>{r(o)})});function rj(t){return{all:t=t||new Map,on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(s){s(n)}),(r=t.get("*"))&&r.slice().map(function(s){s(e,n)})}}}var ln="top",Sn="bottom",Rn="right",cn="left",jd="auto",_a=[ln,Sn,Rn,cn],Ni="start",Go="end",h0="clippingParents",F_="viewport",lo="popper",d0="reference",bg=_a.reduce(function(t,e){return t.concat([e+"-"+Ni,e+"-"+Go])},[]),U_=[].concat(_a,[jd]).reduce(function(t,e){return t.concat([e,e+"-"+Ni,e+"-"+Go])},[]),f0="beforeRead",p0="read",g0="afterRead",m0="beforeMain",_0="main",y0="afterMain",v0="beforeWrite",E0="write",T0="afterWrite",b0=[f0,p0,g0,m0,_0,y0,v0,E0,T0];function br(t){return t?(t.nodeName||"").toLowerCase():null}function Pn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Oi(t){var e=Pn(t).Element;return t instanceof e||t instanceof Element}function xn(t){var e=Pn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function $_(t){if(typeof ShadowRoot>"u")return!1;var e=Pn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function sj(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},i=e.elements[n];!xn(i)||!br(i)||(Object.assign(i.style,r),Object.keys(s).forEach(function(o){var a=s[o];a===!1?i.removeAttribute(o):i.setAttribute(o,a===!0?"":a)}))})}function ij(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],i=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,u){return l[u]="",l},{});!xn(s)||!br(s)||(Object.assign(s.style,a),Object.keys(i).forEach(function(l){s.removeAttribute(l)}))})}}const B_={name:"applyStyles",enabled:!0,phase:"write",fn:sj,effect:ij,requires:["computeStyles"]};function mr(t){return t.split("-")[0]}var yi=Math.max,Dh=Math.min,zo=Math.round;function wg(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function w0(){return!/^((?!chrome|android).)*safari/i.test(wg())}function Yo(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),s=1,i=1;e&&xn(t)&&(s=t.offsetWidth>0&&zo(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&zo(r.height)/t.offsetHeight||1);var o=Oi(t)?Pn(t):window,a=o.visualViewport,l=!w0()&&n,u=(r.left+(l&&a?a.offsetLeft:0))/s,h=(r.top+(l&&a?a.offsetTop:0))/i,d=r.width/s,p=r.height/i;return{width:d,height:p,top:h,right:u+d,bottom:h+p,left:u,x:u,y:h}}function H_(t){var e=Yo(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function A0(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&$_(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Qr(t){return Pn(t).getComputedStyle(t)}function oj(t){return["table","td","th"].indexOf(br(t))>=0}function Qs(t){return((Oi(t)?t.ownerDocument:t.document)||window.document).documentElement}function qd(t){return br(t)==="html"?t:t.assignedSlot||t.parentNode||($_(t)?t.host:null)||Qs(t)}function QT(t){return!xn(t)||Qr(t).position==="fixed"?null:t.offsetParent}function aj(t){var e=/firefox/i.test(wg()),n=/Trident/i.test(wg());if(n&&xn(t)){var r=Qr(t);if(r.position==="fixed")return null}var s=qd(t);for($_(s)&&(s=s.host);xn(s)&&["html","body"].indexOf(br(s))<0;){var i=Qr(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function Ac(t){for(var e=Pn(t),n=QT(t);n&&oj(n)&&Qr(n).position==="static";)n=QT(n);return n&&(br(n)==="html"||br(n)==="body"&&Qr(n).position==="static")?e:n||aj(t)||e}function W_(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function yl(t,e,n){return yi(t,Dh(e,n))}function lj(t,e,n){var r=yl(t,e,n);return r>n?n:r}function I0(){return{top:0,right:0,bottom:0,left:0}}function C0(t){return Object.assign({},I0(),t)}function S0(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var cj=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,C0(typeof e!="number"?e:S0(e,_a))};function uj(t){var e,n=t.state,r=t.name,s=t.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,a=mr(n.placement),l=W_(a),u=[cn,Rn].indexOf(a)>=0,h=u?"height":"width";if(!(!i||!o)){var d=cj(s.padding,n),p=H_(i),m=l==="y"?ln:cn,_=l==="y"?Sn:Rn,w=n.rects.reference[h]+n.rects.reference[l]-o[l]-n.rects.popper[h],P=o[l]-n.rects.reference[l],D=Ac(i),k=D?l==="y"?D.clientHeight||0:D.clientWidth||0:0,b=w/2-P/2,C=d[m],L=k-p[h]-d[_],x=k/2-p[h]/2+b,A=yl(C,x,L),v=l;n.modifiersData[r]=(e={},e[v]=A,e.centerOffset=A-x,e)}}function hj(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||A0(e.elements.popper,s)&&(e.elements.arrow=s))}const R0={name:"arrow",enabled:!0,phase:"main",fn:uj,effect:hj,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Qo(t){return t.split("-")[1]}var dj={top:"auto",right:"auto",bottom:"auto",left:"auto"};function fj(t,e){var n=t.x,r=t.y,s=e.devicePixelRatio||1;return{x:zo(n*s)/s||0,y:zo(r*s)/s||0}}function XT(t){var e,n=t.popper,r=t.popperRect,s=t.placement,i=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,h=t.roundOffsets,d=t.isFixed,p=o.x,m=p===void 0?0:p,_=o.y,w=_===void 0?0:_,P=typeof h=="function"?h({x:m,y:w}):{x:m,y:w};m=P.x,w=P.y;var D=o.hasOwnProperty("x"),k=o.hasOwnProperty("y"),b=cn,C=ln,L=window;if(u){var x=Ac(n),A="clientHeight",v="clientWidth";if(x===Pn(n)&&(x=Qs(n),Qr(x).position!=="static"&&a==="absolute"&&(A="scrollHeight",v="scrollWidth")),x=x,s===ln||(s===cn||s===Rn)&&i===Go){C=Sn;var y=d&&x===L&&L.visualViewport?L.visualViewport.height:x[A];w-=y-r.height,w*=l?1:-1}if(s===cn||(s===ln||s===Sn)&&i===Go){b=Rn;var T=d&&x===L&&L.visualViewport?L.visualViewport.width:x[v];m-=T-r.width,m*=l?1:-1}}var N=Object.assign({position:a},u&&dj),R=h===!0?fj({x:m,y:w},Pn(n)):{x:m,y:w};if(m=R.x,w=R.y,l){var I;return Object.assign({},N,(I={},I[C]=k?"0":"",I[b]=D?"0":"",I.transform=(L.devicePixelRatio||1)<=1?"translate("+m+"px, "+w+"px)":"translate3d("+m+"px, "+w+"px, 0)",I))}return Object.assign({},N,(e={},e[C]=k?w+"px":"",e[b]=D?m+"px":"",e.transform="",e))}function pj(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,i=n.adaptive,o=i===void 0?!0:i,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:mr(e.placement),variation:Qo(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,XT(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,XT(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const j_={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:pj,data:{}};var mu={passive:!0};function gj(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,i=s===void 0?!0:s,o=r.resize,a=o===void 0?!0:o,l=Pn(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&u.forEach(function(h){h.addEventListener("scroll",n.update,mu)}),a&&l.addEventListener("resize",n.update,mu),function(){i&&u.forEach(function(h){h.removeEventListener("scroll",n.update,mu)}),a&&l.removeEventListener("resize",n.update,mu)}}const q_={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:gj,data:{}};var mj={left:"right",right:"left",bottom:"top",top:"bottom"};function Vu(t){return t.replace(/left|right|bottom|top/g,function(e){return mj[e]})}var _j={start:"end",end:"start"};function JT(t){return t.replace(/start|end/g,function(e){return _j[e]})}function K_(t){var e=Pn(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function G_(t){return Yo(Qs(t)).left+K_(t).scrollLeft}function yj(t,e){var n=Pn(t),r=Qs(t),s=n.visualViewport,i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;var u=w0();(u||!u&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a+G_(t),y:l}}function vj(t){var e,n=Qs(t),r=K_(t),s=(e=t.ownerDocument)==null?void 0:e.body,i=yi(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=yi(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+G_(t),l=-r.scrollTop;return Qr(s||n).direction==="rtl"&&(a+=yi(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:a,y:l}}function z_(t){var e=Qr(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function P0(t){return["html","body","#document"].indexOf(br(t))>=0?t.ownerDocument.body:xn(t)&&z_(t)?t:P0(qd(t))}function vl(t,e){var n;e===void 0&&(e=[]);var r=P0(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=Pn(r),o=s?[i].concat(i.visualViewport||[],z_(r)?r:[]):r,a=e.concat(o);return s?a:a.concat(vl(qd(o)))}function Ag(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Ej(t,e){var n=Yo(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function ZT(t,e,n){return e===F_?Ag(yj(t,n)):Oi(e)?Ej(e,n):Ag(vj(Qs(t)))}function Tj(t){var e=vl(qd(t)),n=["absolute","fixed"].indexOf(Qr(t).position)>=0,r=n&&xn(t)?Ac(t):t;return Oi(r)?e.filter(function(s){return Oi(s)&&A0(s,r)&&br(s)!=="body"}):[]}function bj(t,e,n,r){var s=e==="clippingParents"?Tj(t):[].concat(e),i=[].concat(s,[n]),o=i[0],a=i.reduce(function(l,u){var h=ZT(t,u,r);return l.top=yi(h.top,l.top),l.right=Dh(h.right,l.right),l.bottom=Dh(h.bottom,l.bottom),l.left=yi(h.left,l.left),l},ZT(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function N0(t){var e=t.reference,n=t.element,r=t.placement,s=r?mr(r):null,i=r?Qo(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(s){case ln:l={x:o,y:e.y-n.height};break;case Sn:l={x:o,y:e.y+e.height};break;case Rn:l={x:e.x+e.width,y:a};break;case cn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var u=s?W_(s):null;if(u!=null){var h=u==="y"?"height":"width";switch(i){case Ni:l[u]=l[u]-(e[h]/2-n[h]/2);break;case Go:l[u]=l[u]+(e[h]/2-n[h]/2);break}}return l}function Xo(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,i=n.strategy,o=i===void 0?t.strategy:i,a=n.boundary,l=a===void 0?h0:a,u=n.rootBoundary,h=u===void 0?F_:u,d=n.elementContext,p=d===void 0?lo:d,m=n.altBoundary,_=m===void 0?!1:m,w=n.padding,P=w===void 0?0:w,D=C0(typeof P!="number"?P:S0(P,_a)),k=p===lo?d0:lo,b=t.rects.popper,C=t.elements[_?k:p],L=bj(Oi(C)?C:C.contextElement||Qs(t.elements.popper),l,h,o),x=Yo(t.elements.reference),A=N0({reference:x,element:b,strategy:"absolute",placement:s}),v=Ag(Object.assign({},b,A)),y=p===lo?v:x,T={top:L.top-y.top+D.top,bottom:y.bottom-L.bottom+D.bottom,left:L.left-y.left+D.left,right:y.right-L.right+D.right},N=t.modifiersData.offset;if(p===lo&&N){var R=N[s];Object.keys(T).forEach(function(I){var fe=[Rn,Sn].indexOf(I)>=0?1:-1,Ee=[ln,Sn].indexOf(I)>=0?"y":"x";T[I]+=R[Ee]*fe})}return T}function wj(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,i=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?U_:l,h=Qo(r),d=h?a?bg:bg.filter(function(_){return Qo(_)===h}):_a,p=d.filter(function(_){return u.indexOf(_)>=0});p.length===0&&(p=d);var m=p.reduce(function(_,w){return _[w]=Xo(t,{placement:w,boundary:s,rootBoundary:i,padding:o})[mr(w)],_},{});return Object.keys(m).sort(function(_,w){return m[_]-m[w]})}function Aj(t){if(mr(t)===jd)return[];var e=Vu(t);return[JT(t),e,JT(e)]}function Ij(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,u=n.padding,h=n.boundary,d=n.rootBoundary,p=n.altBoundary,m=n.flipVariations,_=m===void 0?!0:m,w=n.allowedAutoPlacements,P=e.options.placement,D=mr(P),k=D===P,b=l||(k||!_?[Vu(P)]:Aj(P)),C=[P].concat(b).reduce(function(Zt,mt){return Zt.concat(mr(mt)===jd?wj(e,{placement:mt,boundary:h,rootBoundary:d,padding:u,flipVariations:_,allowedAutoPlacements:w}):mt)},[]),L=e.rects.reference,x=e.rects.popper,A=new Map,v=!0,y=C[0],T=0;T<C.length;T++){var N=C[T],R=mr(N),I=Qo(N)===Ni,fe=[ln,Sn].indexOf(R)>=0,Ee=fe?"width":"height",Y=Xo(e,{placement:N,boundary:h,rootBoundary:d,altBoundary:p,padding:u}),re=fe?I?Rn:cn:I?Sn:ln;L[Ee]>x[Ee]&&(re=Vu(re));var oe=Vu(re),Me=[];if(i&&Me.push(Y[R]<=0),a&&Me.push(Y[re]<=0,Y[oe]<=0),Me.every(function(Zt){return Zt})){y=N,v=!1;break}A.set(N,Me)}if(v)for(var Dt=_?3:1,Lt=function(mt){var ut=C.find(function(U){var ee=A.get(U);if(ee)return ee.slice(0,mt).every(function(X){return X})});if(ut)return y=ut,"break"},Ue=Dt;Ue>0;Ue--){var Be=Lt(Ue);if(Be==="break")break}e.placement!==y&&(e.modifiersData[r]._skip=!0,e.placement=y,e.reset=!0)}}const O0={name:"flip",enabled:!0,phase:"main",fn:Ij,requiresIfExists:["offset"],data:{_skip:!1}};function eb(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function tb(t){return[ln,Rn,Sn,cn].some(function(e){return t[e]>=0})}function Cj(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,i=e.modifiersData.preventOverflow,o=Xo(e,{elementContext:"reference"}),a=Xo(e,{altBoundary:!0}),l=eb(o,r),u=eb(a,s,i),h=tb(l),d=tb(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:h,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":d})}const k0={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Cj};function Sj(t,e,n){var r=mr(t),s=[cn,ln].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=i[0],a=i[1];return o=o||0,a=(a||0)*s,[cn,Rn].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function Rj(t){var e=t.state,n=t.options,r=t.name,s=n.offset,i=s===void 0?[0,0]:s,o=U_.reduce(function(h,d){return h[d]=Sj(d,e.rects,i),h},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const D0={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Rj};function Pj(t){var e=t.state,n=t.name;e.modifiersData[n]=N0({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Y_={name:"popperOffsets",enabled:!0,phase:"read",fn:Pj,data:{}};function Nj(t){return t==="x"?"y":"x"}function Oj(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,u=n.rootBoundary,h=n.altBoundary,d=n.padding,p=n.tether,m=p===void 0?!0:p,_=n.tetherOffset,w=_===void 0?0:_,P=Xo(e,{boundary:l,rootBoundary:u,padding:d,altBoundary:h}),D=mr(e.placement),k=Qo(e.placement),b=!k,C=W_(D),L=Nj(C),x=e.modifiersData.popperOffsets,A=e.rects.reference,v=e.rects.popper,y=typeof w=="function"?w(Object.assign({},e.rects,{placement:e.placement})):w,T=typeof y=="number"?{mainAxis:y,altAxis:y}:Object.assign({mainAxis:0,altAxis:0},y),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,R={x:0,y:0};if(x){if(i){var I,fe=C==="y"?ln:cn,Ee=C==="y"?Sn:Rn,Y=C==="y"?"height":"width",re=x[C],oe=re+P[fe],Me=re-P[Ee],Dt=m?-v[Y]/2:0,Lt=k===Ni?A[Y]:v[Y],Ue=k===Ni?-v[Y]:-A[Y],Be=e.elements.arrow,Zt=m&&Be?H_(Be):{width:0,height:0},mt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:I0(),ut=mt[fe],U=mt[Ee],ee=yl(0,A[Y],Zt[Y]),X=b?A[Y]/2-Dt-ee-ut-T.mainAxis:Lt-ee-ut-T.mainAxis,se=b?-A[Y]/2+Dt+ee+U+T.mainAxis:Ue+ee+U+T.mainAxis,be=e.elements.arrow&&Ac(e.elements.arrow),xe=be?C==="y"?be.clientTop||0:be.clientLeft||0:0,S=(I=N==null?void 0:N[C])!=null?I:0,O=re+X-S-xe,V=re+se-S,H=yl(m?Dh(oe,O):oe,re,m?yi(Me,V):Me);x[C]=H,R[C]=H-re}if(a){var $,q=C==="x"?ln:cn,J=C==="x"?Sn:Rn,G=x[L],z=L==="y"?"height":"width",K=G+P[q],he=G-P[J],Z=[ln,cn].indexOf(D)!==-1,ue=($=N==null?void 0:N[L])!=null?$:0,ie=Z?K:G-A[z]-v[z]-ue+T.altAxis,pe=Z?G+A[z]+v[z]-ue-T.altAxis:he,Se=m&&Z?lj(ie,G,pe):yl(m?ie:K,G,m?pe:he);x[L]=Se,R[L]=Se-G}e.modifiersData[r]=R}}const L0={name:"preventOverflow",enabled:!0,phase:"main",fn:Oj,requiresIfExists:["offset"]};function kj(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Dj(t){return t===Pn(t)||!xn(t)?K_(t):kj(t)}function Lj(t){var e=t.getBoundingClientRect(),n=zo(e.width)/t.offsetWidth||1,r=zo(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Mj(t,e,n){n===void 0&&(n=!1);var r=xn(e),s=xn(e)&&Lj(e),i=Qs(e),o=Yo(t,s,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((br(e)!=="body"||z_(i))&&(a=Dj(e)),xn(e)?(l=Yo(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=G_(i))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function xj(t){var e=new Map,n=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function s(i){n.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&s(l)}}),r.push(i)}return t.forEach(function(i){n.has(i.name)||s(i)}),r}function Vj(t){var e=xj(t);return b0.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function Fj(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Uj(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var nb={placement:"bottom",modifiers:[],strategy:"absolute"};function rb(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Kd(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,i=s===void 0?nb:s;return function(a,l,u){u===void 0&&(u=i);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},nb,i),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],p=!1,m={state:h,setOptions:function(D){var k=typeof D=="function"?D(h.options):D;w(),h.options=Object.assign({},i,h.options,k),h.scrollParents={reference:Oi(a)?vl(a):a.contextElement?vl(a.contextElement):[],popper:vl(l)};var b=Vj(Uj([].concat(r,h.options.modifiers)));return h.orderedModifiers=b.filter(function(C){return C.enabled}),_(),m.update()},forceUpdate:function(){if(!p){var D=h.elements,k=D.reference,b=D.popper;if(rb(k,b)){h.rects={reference:Mj(k,Ac(b),h.options.strategy==="fixed"),popper:H_(b)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(T){return h.modifiersData[T.name]=Object.assign({},T.data)});for(var C=0;C<h.orderedModifiers.length;C++){if(h.reset===!0){h.reset=!1,C=-1;continue}var L=h.orderedModifiers[C],x=L.fn,A=L.options,v=A===void 0?{}:A,y=L.name;typeof x=="function"&&(h=x({state:h,options:v,name:y,instance:m})||h)}}}},update:Fj(function(){return new Promise(function(P){m.forceUpdate(),P(h)})}),destroy:function(){w(),p=!0}};if(!rb(a,l))return m;m.setOptions(u).then(function(P){!p&&u.onFirstUpdate&&u.onFirstUpdate(P)});function _(){h.orderedModifiers.forEach(function(P){var D=P.name,k=P.options,b=k===void 0?{}:k,C=P.effect;if(typeof C=="function"){var L=C({state:h,name:D,instance:m,options:b}),x=function(){};d.push(L||x)}})}function w(){d.forEach(function(P){return P()}),d=[]}return m}}var $j=Kd(),Bj=[q_,Y_,j_,B_],Hj=Kd({defaultModifiers:Bj}),Wj=[q_,Y_,j_,B_,D0,O0,L0,R0,k0],Q_=Kd({defaultModifiers:Wj});const M0=Object.freeze(Object.defineProperty({__proto__:null,afterMain:y0,afterRead:g0,afterWrite:T0,applyStyles:B_,arrow:R0,auto:jd,basePlacements:_a,beforeMain:m0,beforeRead:f0,beforeWrite:v0,bottom:Sn,clippingParents:h0,computeStyles:j_,createPopper:Q_,createPopperBase:$j,createPopperLite:Hj,detectOverflow:Xo,end:Go,eventListeners:q_,flip:O0,hide:k0,left:cn,main:_0,modifierPhases:b0,offset:D0,placements:U_,popper:lo,popperGenerator:Kd,popperOffsets:Y_,preventOverflow:L0,read:p0,reference:d0,right:Rn,start:Ni,top:ln,variationPlacements:bg,viewport:F_,write:E0},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const as=new Map,Qf={set(t,e,n){as.has(t)||as.set(t,new Map);const r=as.get(t);if(!r.has(e)&&r.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`);return}r.set(e,n)},get(t,e){return as.has(t)&&as.get(t).get(e)||null},remove(t,e){if(!as.has(t))return;const n=as.get(t);n.delete(e),n.size===0&&as.delete(t)}},jj=1e6,qj=1e3,Ig="transitionend",x0=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,n)=>`#${CSS.escape(n)}`)),t),Kj=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),Gj=t=>{do t+=Math.floor(Math.random()*jj);while(document.getElementById(t));return t},zj=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const r=Number.parseFloat(e),s=Number.parseFloat(n);return!r&&!s?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*qj)},V0=t=>{t.dispatchEvent(new Event(Ig))},Hr=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),$s=t=>Hr(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(x0(t)):null,ya=t=>{if(!Hr(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const r=t.closest("summary");if(r&&r.parentNode!==n||r===null)return!1}return e},Bs=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",F0=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?F0(t.parentNode):null},Lh=()=>{},Ic=t=>{t.offsetHeight},U0=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Xf=[],Yj=t=>{document.readyState==="loading"?(Xf.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Xf)e()}),Xf.push(t)):t()},Un=()=>document.documentElement.dir==="rtl",Bn=t=>{Yj(()=>{const e=U0();if(e){const n=t.NAME,r=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=r,t.jQueryInterface)}})},mn=(t,e=[],n=t)=>typeof t=="function"?t(...e):n,$0=(t,e,n=!0)=>{if(!n){mn(t);return}const s=zj(e)+5;let i=!1;const o=({target:a})=>{a===e&&(i=!0,e.removeEventListener(Ig,o),mn(t))};e.addEventListener(Ig,o),setTimeout(()=>{i||V0(e)},s)},X_=(t,e,n,r)=>{const s=t.length;let i=t.indexOf(e);return i===-1?!n&&r?t[s-1]:t[0]:(i+=n?1:-1,r&&(i=(i+s)%s),t[Math.max(0,Math.min(i,s-1))])},Qj=/[^.]*(?=\..*)\.|.*/,Xj=/\..*/,Jj=/::\d+$/,Jf={};let sb=1;const B0={mouseenter:"mouseover",mouseleave:"mouseout"},Zj=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function H0(t,e){return e&&`${e}::${sb++}`||t.uidEvent||sb++}function W0(t){const e=H0(t);return t.uidEvent=e,Jf[e]=Jf[e]||{},Jf[e]}function e4(t,e){return function n(r){return J_(r,{delegateTarget:t}),n.oneOff&&W.off(t,r.type,e),e.apply(t,[r])}}function t4(t,e,n){return function r(s){const i=t.querySelectorAll(e);for(let{target:o}=s;o&&o!==this;o=o.parentNode)for(const a of i)if(a===o)return J_(s,{delegateTarget:o}),r.oneOff&&W.off(t,s.type,e,n),n.apply(o,[s])}}function j0(t,e,n=null){return Object.values(t).find(r=>r.callable===e&&r.delegationSelector===n)}function q0(t,e,n){const r=typeof e=="string",s=r?n:e||n;let i=K0(t);return Zj.has(i)||(i=t),[r,s,i]}function ib(t,e,n,r,s){if(typeof e!="string"||!t)return;let[i,o,a]=q0(e,n,r);e in B0&&(o=(_=>function(w){if(!w.relatedTarget||w.relatedTarget!==w.delegateTarget&&!w.delegateTarget.contains(w.relatedTarget))return _.call(this,w)})(o));const l=W0(t),u=l[a]||(l[a]={}),h=j0(u,o,i?n:null);if(h){h.oneOff=h.oneOff&&s;return}const d=H0(o,e.replace(Qj,"")),p=i?t4(t,n,o):e4(t,o);p.delegationSelector=i?n:null,p.callable=o,p.oneOff=s,p.uidEvent=d,u[d]=p,t.addEventListener(a,p,i)}function Cg(t,e,n,r,s){const i=j0(e[n],r,s);i&&(t.removeEventListener(n,i,!!s),delete e[n][i.uidEvent])}function n4(t,e,n,r){const s=e[n]||{};for(const[i,o]of Object.entries(s))i.includes(r)&&Cg(t,e,n,o.callable,o.delegationSelector)}function K0(t){return t=t.replace(Xj,""),B0[t]||t}const W={on(t,e,n,r){ib(t,e,n,r,!1)},one(t,e,n,r){ib(t,e,n,r,!0)},off(t,e,n,r){if(typeof e!="string"||!t)return;const[s,i,o]=q0(e,n,r),a=o!==e,l=W0(t),u=l[o]||{},h=e.startsWith(".");if(typeof i<"u"){if(!Object.keys(u).length)return;Cg(t,l,o,i,s?n:null);return}if(h)for(const d of Object.keys(l))n4(t,l,d,e.slice(1));for(const[d,p]of Object.entries(u)){const m=d.replace(Jj,"");(!a||e.includes(m))&&Cg(t,l,o,p.callable,p.delegationSelector)}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const r=U0(),s=K0(e),i=e!==s;let o=null,a=!0,l=!0,u=!1;i&&r&&(o=r.Event(e,n),r(t).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),u=o.isDefaultPrevented());const h=J_(new Event(e,{bubbles:a,cancelable:!0}),n);return u&&h.preventDefault(),l&&t.dispatchEvent(h),h.defaultPrevented&&o&&o.preventDefault(),h}};function J_(t,e={}){for(const[n,r]of Object.entries(e))try{t[n]=r}catch{Object.defineProperty(t,n,{configurable:!0,get(){return r}})}return t}function ob(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function Zf(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Wr={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${Zf(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Zf(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of n){let s=r.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),e[s]=ob(t.dataset[r])}return e},getDataAttribute(t,e){return ob(t.getAttribute(`data-bs-${Zf(e)}`))}};class Cc{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const r=Hr(n)?Wr.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof r=="object"?r:{},...Hr(n)?Wr.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const[r,s]of Object.entries(n)){const i=e[r],o=Hr(i)?"element":Kj(i);if(!new RegExp(s).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${o}" but expected type "${s}".`)}}}const r4="5.3.3";class tr extends Cc{constructor(e,n){super(),e=$s(e),e&&(this._element=e,this._config=this._getConfig(n),Qf.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Qf.remove(this._element,this.constructor.DATA_KEY),W.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,r=!0){$0(e,n,r)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Qf.get($s(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return r4}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const ep=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e?e.split(",").map(n=>x0(n)).join(","):null},ge={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let r=t.parentNode.closest(e);for(;r;)n.push(r),r=r.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!Bs(n)&&ya(n))},getSelectorFromElement(t){const e=ep(t);return e&&ge.findOne(e)?e:null},getElementFromSelector(t){const e=ep(t);return e?ge.findOne(e):null},getMultipleElementsFromSelector(t){const e=ep(t);return e?ge.find(e):[]}},Gd=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,r=t.NAME;W.on(document,n,`[data-bs-dismiss="${r}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),Bs(this))return;const i=ge.getElementFromSelector(this)||this.closest(`.${r}`);t.getOrCreateInstance(i)[e]()})},s4="alert",i4="bs.alert",G0=`.${i4}`,o4=`close${G0}`,a4=`closed${G0}`,l4="fade",c4="show";class zd extends tr{static get NAME(){return s4}close(){if(W.trigger(this._element,o4).defaultPrevented)return;this._element.classList.remove(c4);const n=this._element.classList.contains(l4);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),W.trigger(this._element,a4),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=zd.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}Gd(zd,"close");Bn(zd);const u4="button",h4="bs.button",d4=`.${h4}`,f4=".data-api",p4="active",ab='[data-bs-toggle="button"]',g4=`click${d4}${f4}`;class Yd extends tr{static get NAME(){return u4}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(p4))}static jQueryInterface(e){return this.each(function(){const n=Yd.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}W.on(document,g4,ab,t=>{t.preventDefault();const e=t.target.closest(ab);Yd.getOrCreateInstance(e).toggle()});Bn(Yd);const m4="swipe",va=".bs.swipe",_4=`touchstart${va}`,y4=`touchmove${va}`,v4=`touchend${va}`,E4=`pointerdown${va}`,T4=`pointerup${va}`,b4="touch",w4="pen",A4="pointer-event",I4=40,C4={endCallback:null,leftCallback:null,rightCallback:null},S4={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Mh extends Cc{constructor(e,n){super(),this._element=e,!(!e||!Mh.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return C4}static get DefaultType(){return S4}static get NAME(){return m4}dispose(){W.off(this._element,va)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),mn(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=I4)return;const n=e/this._deltaX;this._deltaX=0,n&&mn(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(W.on(this._element,E4,e=>this._start(e)),W.on(this._element,T4,e=>this._end(e)),this._element.classList.add(A4)):(W.on(this._element,_4,e=>this._start(e)),W.on(this._element,y4,e=>this._move(e)),W.on(this._element,v4,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===w4||e.pointerType===b4)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const R4="carousel",P4="bs.carousel",Xs=`.${P4}`,z0=".data-api",N4="ArrowLeft",O4="ArrowRight",k4=500,Ha="next",to="prev",co="left",Fu="right",D4=`slide${Xs}`,tp=`slid${Xs}`,L4=`keydown${Xs}`,M4=`mouseenter${Xs}`,x4=`mouseleave${Xs}`,V4=`dragstart${Xs}`,F4=`load${Xs}${z0}`,U4=`click${Xs}${z0}`,Y0="carousel",_u="active",$4="slide",B4="carousel-item-end",H4="carousel-item-start",W4="carousel-item-next",j4="carousel-item-prev",Q0=".active",X0=".carousel-item",q4=Q0+X0,K4=".carousel-item img",G4=".carousel-indicators",z4="[data-bs-slide], [data-bs-slide-to]",Y4='[data-bs-ride="carousel"]',Q4={[N4]:Fu,[O4]:co},X4={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},J4={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Sc extends tr{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ge.findOne(G4,this._element),this._addEventListeners(),this._config.ride===Y0&&this.cycle()}static get Default(){return X4}static get DefaultType(){return J4}static get NAME(){return R4}next(){this._slide(Ha)}nextWhenVisible(){!document.hidden&&ya(this._element)&&this.next()}prev(){this._slide(to)}pause(){this._isSliding&&V0(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){W.one(this._element,tp,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){W.one(this._element,tp,()=>this.to(e));return}const r=this._getItemIndex(this._getActive());if(r===e)return;const s=e>r?Ha:to;this._slide(s,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&W.on(this._element,L4,e=>this._keydown(e)),this._config.pause==="hover"&&(W.on(this._element,M4,()=>this.pause()),W.on(this._element,x4,()=>this._maybeEnableCycle())),this._config.touch&&Mh.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const r of ge.find(K4,this._element))W.on(r,V4,s=>s.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(co)),rightCallback:()=>this._slide(this._directionToOrder(Fu)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),k4+this._config.interval))}};this._swipeHelper=new Mh(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=Q4[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=ge.findOne(Q0,this._indicatorsElement);n.classList.remove(_u),n.removeAttribute("aria-current");const r=ge.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);r&&(r.classList.add(_u),r.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const r=this._getActive(),s=e===Ha,i=n||X_(this._getItems(),r,s,this._config.wrap);if(i===r)return;const o=this._getItemIndex(i),a=m=>W.trigger(this._element,m,{relatedTarget:i,direction:this._orderToDirection(e),from:this._getItemIndex(r),to:o});if(a(D4).defaultPrevented||!r||!i)return;const u=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=i;const h=s?H4:B4,d=s?W4:j4;i.classList.add(d),Ic(i),r.classList.add(h),i.classList.add(h);const p=()=>{i.classList.remove(h,d),i.classList.add(_u),r.classList.remove(_u,d,h),this._isSliding=!1,a(tp)};this._queueCallback(p,r,this._isAnimated()),u&&this.cycle()}_isAnimated(){return this._element.classList.contains($4)}_getActive(){return ge.findOne(q4,this._element)}_getItems(){return ge.find(X0,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Un()?e===co?to:Ha:e===co?Ha:to}_orderToDirection(e){return Un()?e===to?co:Fu:e===to?Fu:co}static jQueryInterface(e){return this.each(function(){const n=Sc.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}W.on(document,U4,z4,function(t){const e=ge.getElementFromSelector(this);if(!e||!e.classList.contains(Y0))return;t.preventDefault();const n=Sc.getOrCreateInstance(e),r=this.getAttribute("data-bs-slide-to");if(r){n.to(r),n._maybeEnableCycle();return}if(Wr.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});W.on(window,F4,()=>{const t=ge.find(Y4);for(const e of t)Sc.getOrCreateInstance(e)});Bn(Sc);const Z4="collapse",e9="bs.collapse",Rc=`.${e9}`,t9=".data-api",n9=`show${Rc}`,r9=`shown${Rc}`,s9=`hide${Rc}`,i9=`hidden${Rc}`,o9=`click${Rc}${t9}`,np="show",yo="collapse",yu="collapsing",a9="collapsed",l9=`:scope .${yo} .${yo}`,c9="collapse-horizontal",u9="width",h9="height",d9=".collapse.show, .collapse.collapsing",Sg='[data-bs-toggle="collapse"]',f9={parent:null,toggle:!0},p9={parent:"(null|element)",toggle:"boolean"};class ql extends tr{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const r=ge.find(Sg);for(const s of r){const i=ge.getSelectorFromElement(s),o=ge.find(i).filter(a=>a===this._element);i!==null&&o.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return f9}static get DefaultType(){return p9}static get NAME(){return Z4}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(d9).filter(a=>a!==this._element).map(a=>ql.getOrCreateInstance(a,{toggle:!1}))),e.length&&e[0]._isTransitioning||W.trigger(this._element,n9).defaultPrevented)return;for(const a of e)a.hide();const r=this._getDimension();this._element.classList.remove(yo),this._element.classList.add(yu),this._element.style[r]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(yu),this._element.classList.add(yo,np),this._element.style[r]="",W.trigger(this._element,r9)},o=`scroll${r[0].toUpperCase()+r.slice(1)}`;this._queueCallback(s,this._element,!0),this._element.style[r]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||W.trigger(this._element,s9).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,Ic(this._element),this._element.classList.add(yu),this._element.classList.remove(yo,np);for(const s of this._triggerArray){const i=ge.getElementFromSelector(s);i&&!this._isShown(i)&&this._addAriaAndCollapsedClass([s],!1)}this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(yu),this._element.classList.add(yo),W.trigger(this._element,i9)};this._element.style[n]="",this._queueCallback(r,this._element,!0)}_isShown(e=this._element){return e.classList.contains(np)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=$s(e.parent),e}_getDimension(){return this._element.classList.contains(c9)?u9:h9}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Sg);for(const n of e){const r=ge.getElementFromSelector(n);r&&this._addAriaAndCollapsedClass([n],this._isShown(r))}}_getFirstLevelChildren(e){const n=ge.find(l9,this._config.parent);return ge.find(e,this._config.parent).filter(r=>!n.includes(r))}_addAriaAndCollapsedClass(e,n){if(e.length)for(const r of e)r.classList.toggle(a9,!n),r.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const r=ql.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}W.on(document,o9,Sg,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(const e of ge.getMultipleElementsFromSelector(this))ql.getOrCreateInstance(e,{toggle:!1}).toggle()});Bn(ql);const lb="dropdown",g9="bs.dropdown",Hi=`.${g9}`,Z_=".data-api",m9="Escape",cb="Tab",_9="ArrowUp",ub="ArrowDown",y9=2,v9=`hide${Hi}`,E9=`hidden${Hi}`,T9=`show${Hi}`,b9=`shown${Hi}`,J0=`click${Hi}${Z_}`,Z0=`keydown${Hi}${Z_}`,w9=`keyup${Hi}${Z_}`,uo="show",A9="dropup",I9="dropend",C9="dropstart",S9="dropup-center",R9="dropdown-center",hi='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',P9=`${hi}.${uo}`,Uu=".dropdown-menu",N9=".navbar",O9=".navbar-nav",k9=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",D9=Un()?"top-end":"top-start",L9=Un()?"top-start":"top-end",M9=Un()?"bottom-end":"bottom-start",x9=Un()?"bottom-start":"bottom-end",V9=Un()?"left-start":"right-start",F9=Un()?"right-start":"left-start",U9="top",$9="bottom",B9={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},H9={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class _r extends tr{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=ge.next(this._element,Uu)[0]||ge.prev(this._element,Uu)[0]||ge.findOne(Uu,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return B9}static get DefaultType(){return H9}static get NAME(){return lb}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Bs(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!W.trigger(this._element,T9,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(O9))for(const r of[].concat(...document.body.children))W.on(r,"mouseover",Lh);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(uo),this._element.classList.add(uo),W.trigger(this._element,b9,e)}}hide(){if(Bs(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!W.trigger(this._element,v9,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))W.off(r,"mouseover",Lh);this._popper&&this._popper.destroy(),this._menu.classList.remove(uo),this._element.classList.remove(uo),this._element.setAttribute("aria-expanded","false"),Wr.removeDataAttribute(this._menu,"popper"),W.trigger(this._element,E9,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!Hr(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${lb.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof M0>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:Hr(this._config.reference)?e=$s(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=Q_(e,this._menu,n)}_isShown(){return this._menu.classList.contains(uo)}_getPlacement(){const e=this._parent;if(e.classList.contains(I9))return V9;if(e.classList.contains(C9))return F9;if(e.classList.contains(S9))return U9;if(e.classList.contains(R9))return $9;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(A9)?n?L9:D9:n?x9:M9}_detectNavbar(){return this._element.closest(N9)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Wr.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...mn(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:n}){const r=ge.find(k9,this._menu).filter(s=>ya(s));r.length&&X_(r,n,e===ub,!r.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=_r.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===y9||e.type==="keyup"&&e.key!==cb)return;const n=ge.find(P9);for(const r of n){const s=_r.getInstance(r);if(!s||s._config.autoClose===!1)continue;const i=e.composedPath(),o=i.includes(s._menu);if(i.includes(s._element)||s._config.autoClose==="inside"&&!o||s._config.autoClose==="outside"&&o||s._menu.contains(e.target)&&(e.type==="keyup"&&e.key===cb||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const a={relatedTarget:s._element};e.type==="click"&&(a.clickEvent=e),s._completeHide(a)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),r=e.key===m9,s=[_9,ub].includes(e.key);if(!s&&!r||n&&!r)return;e.preventDefault();const i=this.matches(hi)?this:ge.prev(this,hi)[0]||ge.next(this,hi)[0]||ge.findOne(hi,e.delegateTarget.parentNode),o=_r.getOrCreateInstance(i);if(s){e.stopPropagation(),o.show(),o._selectMenuItem(e);return}o._isShown()&&(e.stopPropagation(),o.hide(),i.focus())}}W.on(document,Z0,hi,_r.dataApiKeydownHandler);W.on(document,Z0,Uu,_r.dataApiKeydownHandler);W.on(document,J0,_r.clearMenus);W.on(document,w9,_r.clearMenus);W.on(document,J0,hi,function(t){t.preventDefault(),_r.getOrCreateInstance(this).toggle()});Bn(_r);const eP="backdrop",W9="fade",hb="show",db=`mousedown.bs.${eP}`,j9={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},q9={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class tP extends Cc{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return j9}static get DefaultType(){return q9}static get NAME(){return eP}show(e){if(!this._config.isVisible){mn(e);return}this._append();const n=this._getElement();this._config.isAnimated&&Ic(n),n.classList.add(hb),this._emulateAnimation(()=>{mn(e)})}hide(e){if(!this._config.isVisible){mn(e);return}this._getElement().classList.remove(hb),this._emulateAnimation(()=>{this.dispose(),mn(e)})}dispose(){this._isAppended&&(W.off(this._element,db),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(W9),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=$s(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),W.on(e,db,()=>{mn(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){$0(e,this._getElement(),this._config.isAnimated)}}const K9="focustrap",G9="bs.focustrap",xh=`.${G9}`,z9=`focusin${xh}`,Y9=`keydown.tab${xh}`,Q9="Tab",X9="forward",fb="backward",J9={autofocus:!0,trapElement:null},Z9={autofocus:"boolean",trapElement:"element"};class nP extends Cc{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return J9}static get DefaultType(){return Z9}static get NAME(){return K9}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),W.off(document,xh),W.on(document,z9,e=>this._handleFocusin(e)),W.on(document,Y9,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,W.off(document,xh))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const r=ge.focusableChildren(n);r.length===0?n.focus():this._lastTabNavDirection===fb?r[r.length-1].focus():r[0].focus()}_handleKeydown(e){e.key===Q9&&(this._lastTabNavDirection=e.shiftKey?fb:X9)}}const pb=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",gb=".sticky-top",vu="padding-right",mb="margin-right";class Rg{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,vu,n=>n+e),this._setElementAttributes(pb,vu,n=>n+e),this._setElementAttributes(gb,mb,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,vu),this._resetElementAttributes(pb,vu),this._resetElementAttributes(gb,mb)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,r){const s=this.getWidth(),i=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+s)return;this._saveInitialAttribute(o,n);const a=window.getComputedStyle(o).getPropertyValue(n);o.style.setProperty(n,`${r(Number.parseFloat(a))}px`)};this._applyManipulationCallback(e,i)}_saveInitialAttribute(e,n){const r=e.style.getPropertyValue(n);r&&Wr.setDataAttribute(e,n,r)}_resetElementAttributes(e,n){const r=s=>{const i=Wr.getDataAttribute(s,n);if(i===null){s.style.removeProperty(n);return}Wr.removeDataAttribute(s,n),s.style.setProperty(n,i)};this._applyManipulationCallback(e,r)}_applyManipulationCallback(e,n){if(Hr(e)){n(e);return}for(const r of ge.find(e,this._element))n(r)}}const eq="modal",tq="bs.modal",$n=`.${tq}`,nq=".data-api",rq="Escape",sq=`hide${$n}`,iq=`hidePrevented${$n}`,rP=`hidden${$n}`,sP=`show${$n}`,oq=`shown${$n}`,aq=`resize${$n}`,lq=`click.dismiss${$n}`,cq=`mousedown.dismiss${$n}`,uq=`keydown.dismiss${$n}`,hq=`click${$n}${nq}`,_b="modal-open",dq="fade",yb="show",rp="modal-static",fq=".modal.show",pq=".modal-dialog",gq=".modal-body",mq='[data-bs-toggle="modal"]',_q={backdrop:!0,focus:!0,keyboard:!0},yq={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Jo extends tr{constructor(e,n){super(e,n),this._dialog=ge.findOne(pq,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Rg,this._addEventListeners()}static get Default(){return _q}static get DefaultType(){return yq}static get NAME(){return eq}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||W.trigger(this._element,sP,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(_b),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||W.trigger(this._element,sq).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(yb),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){W.off(window,$n),W.off(this._dialog,$n),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new tP({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new nP({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=ge.findOne(gq,this._dialog);n&&(n.scrollTop=0),Ic(this._element),this._element.classList.add(yb);const r=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,W.trigger(this._element,oq,{relatedTarget:e})};this._queueCallback(r,this._dialog,this._isAnimated())}_addEventListeners(){W.on(this._element,uq,e=>{if(e.key===rq){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),W.on(window,aq,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),W.on(this._element,cq,e=>{W.one(this._element,lq,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(_b),this._resetAdjustments(),this._scrollBar.reset(),W.trigger(this._element,rP)})}_isAnimated(){return this._element.classList.contains(dq)}_triggerBackdropTransition(){if(W.trigger(this._element,iq).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,r=this._element.style.overflowY;r==="hidden"||this._element.classList.contains(rp)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(rp),this._queueCallback(()=>{this._element.classList.remove(rp),this._queueCallback(()=>{this._element.style.overflowY=r},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),r=n>0;if(r&&!e){const s=Un()?"paddingLeft":"paddingRight";this._element.style[s]=`${n}px`}if(!r&&e){const s=Un()?"paddingRight":"paddingLeft";this._element.style[s]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const r=Jo.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e](n)}})}}W.on(document,hq,mq,function(t){const e=ge.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),W.one(e,sP,s=>{s.defaultPrevented||W.one(e,rP,()=>{ya(this)&&this.focus()})});const n=ge.findOne(fq);n&&Jo.getInstance(n).hide(),Jo.getOrCreateInstance(e).toggle(this)});Gd(Jo);Bn(Jo);const vq="offcanvas",Eq="bs.offcanvas",Zr=`.${Eq}`,iP=".data-api",Tq=`load${Zr}${iP}`,bq="Escape",vb="show",Eb="showing",Tb="hiding",wq="offcanvas-backdrop",oP=".offcanvas.show",Aq=`show${Zr}`,Iq=`shown${Zr}`,Cq=`hide${Zr}`,bb=`hidePrevented${Zr}`,aP=`hidden${Zr}`,Sq=`resize${Zr}`,Rq=`click${Zr}${iP}`,Pq=`keydown.dismiss${Zr}`,Nq='[data-bs-toggle="offcanvas"]',Oq={backdrop:!0,keyboard:!0,scroll:!1},kq={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Hs extends tr{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Oq}static get DefaultType(){return kq}static get NAME(){return vq}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||W.trigger(this._element,Aq,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Rg().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Eb);const r=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(vb),this._element.classList.remove(Eb),W.trigger(this._element,Iq,{relatedTarget:e})};this._queueCallback(r,this._element,!0)}hide(){if(!this._isShown||W.trigger(this._element,Cq).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Tb),this._backdrop.hide();const n=()=>{this._element.classList.remove(vb,Tb),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Rg().reset(),W.trigger(this._element,aP)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){W.trigger(this._element,bb);return}this.hide()},n=!!this._config.backdrop;return new tP({className:wq,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new nP({trapElement:this._element})}_addEventListeners(){W.on(this._element,Pq,e=>{if(e.key===bq){if(this._config.keyboard){this.hide();return}W.trigger(this._element,bb)}})}static jQueryInterface(e){return this.each(function(){const n=Hs.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}W.on(document,Rq,Nq,function(t){const e=ge.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Bs(this))return;W.one(e,aP,()=>{ya(this)&&this.focus()});const n=ge.findOne(oP);n&&n!==e&&Hs.getInstance(n).hide(),Hs.getOrCreateInstance(e).toggle(this)});W.on(window,Tq,()=>{for(const t of ge.find(oP))Hs.getOrCreateInstance(t).show()});W.on(window,Sq,()=>{for(const t of ge.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&Hs.getOrCreateInstance(t).hide()});Gd(Hs);Bn(Hs);const Dq=/^aria-[\w-]*$/i,lP={"*":["class","dir","id","lang","role",Dq],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Lq=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Mq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,xq=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?Lq.has(n)?!!Mq.test(t.nodeValue):!0:e.filter(r=>r instanceof RegExp).some(r=>r.test(n))};function Vq(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const s=new window.DOMParser().parseFromString(t,"text/html"),i=[].concat(...s.body.querySelectorAll("*"));for(const o of i){const a=o.nodeName.toLowerCase();if(!Object.keys(e).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),u=[].concat(e["*"]||[],e[a]||[]);for(const h of l)xq(h,u)||o.removeAttribute(h.nodeName)}return s.body.innerHTML}const Fq="TemplateFactory",Uq={allowList:lP,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},$q={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Bq={entry:"(string|element|function|null)",selector:"(string|element)"};class Hq extends Cc{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Uq}static get DefaultType(){return $q}static get NAME(){return Fq}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[s,i]of Object.entries(this._config.content))this._setContent(e,i,s);const n=e.children[0],r=this._resolvePossibleFunction(this._config.extraClass);return r&&n.classList.add(...r.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,r]of Object.entries(e))super._typeCheckConfig({selector:n,entry:r},Bq)}_setContent(e,n,r){const s=ge.findOne(r,e);if(s){if(n=this._resolvePossibleFunction(n),!n){s.remove();return}if(Hr(n)){this._putElementInTemplate($s(n),s);return}if(this._config.html){s.innerHTML=this._maybeSanitize(n);return}s.textContent=n}}_maybeSanitize(e){return this._config.sanitize?Vq(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return mn(e,[this])}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const Wq="tooltip",jq=new Set(["sanitize","allowList","sanitizeFn"]),sp="fade",qq="modal",Eu="show",Kq=".tooltip-inner",wb=`.${qq}`,Ab="hide.bs.modal",Wa="hover",ip="focus",Gq="click",zq="manual",Yq="hide",Qq="hidden",Xq="show",Jq="shown",Zq="inserted",eK="click",tK="focusin",nK="focusout",rK="mouseenter",sK="mouseleave",iK={AUTO:"auto",TOP:"top",RIGHT:Un()?"left":"right",BOTTOM:"bottom",LEFT:Un()?"right":"left"},oK={allowList:lP,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},aK={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Js extends tr{constructor(e,n){if(typeof M0>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return oK}static get DefaultType(){return aK}static get NAME(){return Wq}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),W.off(this._element.closest(wb),Ab,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=W.trigger(this._element,this.constructor.eventName(Xq)),r=(F0(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!r)return;this._disposePopper();const s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(s),W.trigger(this._element,this.constructor.eventName(Zq))),this._popper=this._createPopper(s),s.classList.add(Eu),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))W.on(a,"mouseover",Lh);const o=()=>{W.trigger(this._element,this.constructor.eventName(Jq)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||W.trigger(this._element,this.constructor.eventName(Yq)).defaultPrevented)return;if(this._getTipElement().classList.remove(Eu),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))W.off(s,"mouseover",Lh);this._activeTrigger[Gq]=!1,this._activeTrigger[ip]=!1,this._activeTrigger[Wa]=!1,this._isHovered=null;const r=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),W.trigger(this._element,this.constructor.eventName(Qq)))};this._queueCallback(r,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(sp,Eu),n.classList.add(`bs-${this.constructor.NAME}-auto`);const r=Gj(this.constructor.NAME).toString();return n.setAttribute("id",r),this._isAnimated()&&n.classList.add(sp),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Hq({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Kq]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(sp)}_isShown(){return this.tip&&this.tip.classList.contains(Eu)}_createPopper(e){const n=mn(this._config.placement,[this,e,this._element]),r=iK[n.toUpperCase()];return Q_(this._element,e,this._getPopperConfig(r))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return mn(e,[this._element])}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:r=>{this._getTipElement().setAttribute("data-popper-placement",r.state.placement)}}]};return{...n,...mn(this._config.popperConfig,[n])}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")W.on(this._element,this.constructor.eventName(eK),this._config.selector,r=>{this._initializeOnDelegatedTarget(r).toggle()});else if(n!==zq){const r=n===Wa?this.constructor.eventName(rK):this.constructor.eventName(tK),s=n===Wa?this.constructor.eventName(sK):this.constructor.eventName(nK);W.on(this._element,r,this._config.selector,i=>{const o=this._initializeOnDelegatedTarget(i);o._activeTrigger[i.type==="focusin"?ip:Wa]=!0,o._enter()}),W.on(this._element,s,this._config.selector,i=>{const o=this._initializeOnDelegatedTarget(i);o._activeTrigger[i.type==="focusout"?ip:Wa]=o._element.contains(i.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},W.on(this._element.closest(wb),Ab,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=Wr.getDataAttributes(this._element);for(const r of Object.keys(n))jq.has(r)&&delete n[r];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:$s(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[n,r]of Object.entries(this._config))this.constructor.Default[n]!==r&&(e[n]=r);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const n=Js.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Bn(Js);const lK="popover",cK=".popover-header",uK=".popover-body",hK={...Js.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},dK={...Js.DefaultType,content:"(null|string|element|function)"};class ey extends Js{static get Default(){return hK}static get DefaultType(){return dK}static get NAME(){return lK}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[cK]:this._getTitle(),[uK]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=ey.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Bn(ey);const fK="scrollspy",pK="bs.scrollspy",ty=`.${pK}`,gK=".data-api",mK=`activate${ty}`,Ib=`click${ty}`,_K=`load${ty}${gK}`,yK="dropdown-item",no="active",vK='[data-bs-spy="scroll"]',op="[href]",EK=".nav, .list-group",Cb=".nav-link",TK=".nav-item",bK=".list-group-item",wK=`${Cb}, ${TK} > ${Cb}, ${bK}`,AK=".dropdown",IK=".dropdown-toggle",CK={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},SK={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Qd extends tr{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return CK}static get DefaultType(){return SK}static get NAME(){return fK}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=$s(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(W.off(this._config.target,Ib),W.on(this._config.target,Ib,op,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const r=this._rootElement||window,s=n.offsetTop-this._element.offsetTop;if(r.scrollTo){r.scrollTo({top:s,behavior:"smooth"});return}r.scrollTop=s}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=o=>this._targetLinks.get(`#${o.target.id}`),r=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(n(o))},s=(this._rootElement||document.documentElement).scrollTop,i=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(i&&a){if(r(o),!s)return;continue}!i&&!a&&r(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=ge.find(op,this._config.target);for(const n of e){if(!n.hash||Bs(n))continue;const r=ge.findOne(decodeURI(n.hash),this._element);ya(r)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,r))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(no),this._activateParents(e),W.trigger(this._element,mK,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(yK)){ge.findOne(IK,e.closest(AK)).classList.add(no);return}for(const n of ge.parents(e,EK))for(const r of ge.prev(n,wK))r.classList.add(no)}_clearActiveClass(e){e.classList.remove(no);const n=ge.find(`${op}.${no}`,e);for(const r of n)r.classList.remove(no)}static jQueryInterface(e){return this.each(function(){const n=Qd.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}W.on(window,_K,()=>{for(const t of ge.find(vK))Qd.getOrCreateInstance(t)});Bn(Qd);const RK="tab",PK="bs.tab",Wi=`.${PK}`,NK=`hide${Wi}`,OK=`hidden${Wi}`,kK=`show${Wi}`,DK=`shown${Wi}`,LK=`click${Wi}`,MK=`keydown${Wi}`,xK=`load${Wi}`,VK="ArrowLeft",Sb="ArrowRight",FK="ArrowUp",Rb="ArrowDown",ap="Home",Pb="End",di="active",Nb="fade",lp="show",UK="dropdown",cP=".dropdown-toggle",$K=".dropdown-menu",cp=`:not(${cP})`,BK='.list-group, .nav, [role="tablist"]',HK=".nav-item, .list-group-item",WK=`.nav-link${cp}, .list-group-item${cp}, [role="tab"]${cp}`,uP='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',up=`${WK}, ${uP}`,jK=`.${di}[data-bs-toggle="tab"], .${di}[data-bs-toggle="pill"], .${di}[data-bs-toggle="list"]`;class Zo extends tr{constructor(e){super(e),this._parent=this._element.closest(BK),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),W.on(this._element,MK,n=>this._keydown(n)))}static get NAME(){return RK}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),r=n?W.trigger(n,NK,{relatedTarget:e}):null;W.trigger(e,kK,{relatedTarget:n}).defaultPrevented||r&&r.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(di),this._activate(ge.getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(lp);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),W.trigger(e,DK,{relatedTarget:n})};this._queueCallback(r,e,e.classList.contains(Nb))}_deactivate(e,n){if(!e)return;e.classList.remove(di),e.blur(),this._deactivate(ge.getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(lp);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),W.trigger(e,OK,{relatedTarget:n})};this._queueCallback(r,e,e.classList.contains(Nb))}_keydown(e){if(![VK,Sb,FK,Rb,ap,Pb].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=this._getChildren().filter(s=>!Bs(s));let r;if([ap,Pb].includes(e.key))r=n[e.key===ap?0:n.length-1];else{const s=[Sb,Rb].includes(e.key);r=X_(n,e.target,s,!0)}r&&(r.focus({preventScroll:!0}),Zo.getOrCreateInstance(r).show())}_getChildren(){return ge.find(up,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const r of n)this._setInitialAttributesOnChild(r)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),r=this._getOuterElement(e);e.setAttribute("aria-selected",n),r!==e&&this._setAttributeIfNotExists(r,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=ge.getElementFromSelector(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,n){const r=this._getOuterElement(e);if(!r.classList.contains(UK))return;const s=(i,o)=>{const a=ge.findOne(i,r);a&&a.classList.toggle(o,n)};s(cP,di),s($K,lp),r.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,r){e.hasAttribute(n)||e.setAttribute(n,r)}_elemIsActive(e){return e.classList.contains(di)}_getInnerElement(e){return e.matches(up)?e:ge.findOne(up,e)}_getOuterElement(e){return e.closest(HK)||e}static jQueryInterface(e){return this.each(function(){const n=Zo.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}W.on(document,LK,uP,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!Bs(this)&&Zo.getOrCreateInstance(this).show()});W.on(window,xK,()=>{for(const t of ge.find(jK))Zo.getOrCreateInstance(t)});Bn(Zo);const qK="toast",KK="bs.toast",Zs=`.${KK}`,GK=`mouseover${Zs}`,zK=`mouseout${Zs}`,YK=`focusin${Zs}`,QK=`focusout${Zs}`,XK=`hide${Zs}`,JK=`hidden${Zs}`,ZK=`show${Zs}`,e6=`shown${Zs}`,t6="fade",Ob="hide",Tu="show",bu="showing",n6={animation:"boolean",autohide:"boolean",delay:"number"},r6={animation:!0,autohide:!0,delay:5e3};class Xd extends tr{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return r6}static get DefaultType(){return n6}static get NAME(){return qK}show(){if(W.trigger(this._element,ZK).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(t6);const n=()=>{this._element.classList.remove(bu),W.trigger(this._element,e6),this._maybeScheduleHide()};this._element.classList.remove(Ob),Ic(this._element),this._element.classList.add(Tu,bu),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||W.trigger(this._element,XK).defaultPrevented)return;const n=()=>{this._element.classList.add(Ob),this._element.classList.remove(bu,Tu),W.trigger(this._element,JK)};this._element.classList.add(bu),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Tu),super.dispose()}isShown(){return this._element.classList.contains(Tu)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const r=e.relatedTarget;this._element===r||this._element.contains(r)||this._maybeScheduleHide()}_setListeners(){W.on(this._element,GK,e=>this._onInteraction(e,!0)),W.on(this._element,zK,e=>this._onInteraction(e,!1)),W.on(this._element,YK,e=>this._onInteraction(e,!0)),W.on(this._element,QK,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=Xd.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}Gd(Xd);Bn(Xd);const hP=rI({id:"appOption",state:()=>({appMode:"",appThemeClass:"",appCoverClass:"",appBoxedLayout:!1,appHeaderHide:!1,appHeaderSearchToggled:!1,appSidebarCollapsed:!1,appSidebarMobileToggled:!1,appSidebarMobileClosed:!1,appSidebarHide:!1,appContentFullHeight:!1,appContentClass:"",appTopNav:!1,appFooter:!1,appFooterFixed:!1,appThemePanelToggled:!1})});function dP(){return{font:{bodyFontFamily:getComputedStyle(document.body).getPropertyValue("--bs-body-font-family").trim(),bodyFontSize:getComputedStyle(document.body).getPropertyValue("--bs-body-font-size").trim(),bodyFontWeight:getComputedStyle(document.body).getPropertyValue("--bs-body-font-weight").trim(),bodyLineHeight:getComputedStyle(document.body).getPropertyValue("--bs-body-line-height").trim()},color:{theme:getComputedStyle(document.body).getPropertyValue("--bs-theme").trim(),themeRgb:getComputedStyle(document.body).getPropertyValue("--bs-theme-rgb").trim(),themeColor:getComputedStyle(document.body).getPropertyValue("--bs-theme-color").trim(),themeColorRgb:getComputedStyle(document.body).getPropertyValue("--bs-theme-color-rgb").trim(),default:getComputedStyle(document.body).getPropertyValue("--bs-default").trim(),defaultRgb:getComputedStyle(document.body).getPropertyValue("--bs-default-rgb").trim(),primary:getComputedStyle(document.body).getPropertyValue("--bs-primary").trim(),primaryRgb:getComputedStyle(document.body).getPropertyValue("--bs-primary-rgb").trim(),primaryBgSubtle:getComputedStyle(document.body).getPropertyValue("--bs-primary-bg-subtle").trim(),primaryText:getComputedStyle(document.body).getPropertyValue("--bs-primary-text").trim(),primaryBorderSubtle:getComputedStyle(document.body).getPropertyValue("--bs-primary-border-subtle").trim(),secondary:getComputedStyle(document.body).getPropertyValue("--bs-secondary").trim(),secondaryRgb:getComputedStyle(document.body).getPropertyValue("--bs-secondary-rgb").trim(),secondaryBgSubtle:getComputedStyle(document.body).getPropertyValue("--bs-secondary-bg-subtle").trim(),secondaryText:getComputedStyle(document.body).getPropertyValue("--bs-secondary-text").trim(),secondaryBorderSubtle:getComputedStyle(document.body).getPropertyValue("--bs-secondary-border-subtle").trim(),success:getComputedStyle(document.body).getPropertyValue("--bs-success").trim(),successRgb:getComputedStyle(document.body).getPropertyValue("--bs-success-rgb").trim(),successBgSubtle:getComputedStyle(document.body).getPropertyValue("--bs-success-bg-subtle").trim(),successText:getComputedStyle(document.body).getPropertyValue("--bs-success-text").trim(),successBorderSubtle:getComputedStyle(document.body).getPropertyValue("--bs-success-border-subtle").trim(),warning:getComputedStyle(document.body).getPropertyValue("--bs-warning").trim(),warningRgb:getComputedStyle(document.body).getPropertyValue("--bs-warning-rgb").trim(),warningBgSubtle:getComputedStyle(document.body).getPropertyValue("--bs-warning-bg-subtle").trim(),warningText:getComputedStyle(document.body).getPropertyValue("--bs-warning-text").trim(),warningBorderSubtle:getComputedStyle(document.body).getPropertyValue("--bs-warning-border-subtle").trim(),info:getComputedStyle(document.body).getPropertyValue("--bs-info").trim(),infoRgb:getComputedStyle(document.body).getPropertyValue("--bs-info-rgb").trim(),infoBgSubtle:getComputedStyle(document.body).getPropertyValue("--bs-info-bg-subtle").trim(),infoText:getComputedStyle(document.body).getPropertyValue("--bs-info-text").trim(),infoBorderSubtle:getComputedStyle(document.body).getPropertyValue("--bs-info-border-subtle").trim(),danger:getComputedStyle(document.body).getPropertyValue("--bs-danger").trim(),dangerRgb:getComputedStyle(document.body).getPropertyValue("--bs-danger-rgb").trim(),dangerBgSubtle:getComputedStyle(document.body).getPropertyValue("--bs-danger-bg-subtle").trim(),dangerText:getComputedStyle(document.body).getPropertyValue("--bs-danger-text").trim(),dangerBorderSubtle:getComputedStyle(document.body).getPropertyValue("--bs-danger-border-subtle").trim(),light:getComputedStyle(document.body).getPropertyValue("--bs-light").trim(),lightRgb:getComputedStyle(document.body).getPropertyValue("--bs-light-rgb").trim(),lightBgSubtle:getComputedStyle(document.body).getPropertyValue("--bs-light-bg-subtle").trim(),lightText:getComputedStyle(document.body).getPropertyValue("--bs-light-text").trim(),lightBorderSubtle:getComputedStyle(document.body).getPropertyValue("--bs-light-border-subtle").trim(),dark:getComputedStyle(document.body).getPropertyValue("--bs-dark").trim(),darkRgb:getComputedStyle(document.body).getPropertyValue("--bs-dark-rgb").trim(),darkBgSubtle:getComputedStyle(document.body).getPropertyValue("--bs-dark-bg-subtle").trim(),darkText:getComputedStyle(document.body).getPropertyValue("--bs-dark-text").trim(),darkBorderSubtle:getComputedStyle(document.body).getPropertyValue("--bs-dark-border-subtle").trim(),inverse:getComputedStyle(document.body).getPropertyValue("--bs-inverse").trim(),inverseRgb:getComputedStyle(document.body).getPropertyValue("--bs-inverse-rgb").trim(),white:getComputedStyle(document.body).getPropertyValue("--bs-white").trim(),whiteRgb:getComputedStyle(document.body).getPropertyValue("--bs-white-rgb").trim(),black:getComputedStyle(document.body).getPropertyValue("--bs-black").trim(),blackRgb:getComputedStyle(document.body).getPropertyValue("--bs-black-rgb").trim(),teal:getComputedStyle(document.body).getPropertyValue("--bs-teal").trim(),tealRgb:getComputedStyle(document.body).getPropertyValue("--bs-teal-rgb").trim(),indigo:getComputedStyle(document.body).getPropertyValue("--bs-indigo").trim(),indigoRgb:getComputedStyle(document.body).getPropertyValue("--bs-indigo-rgb").trim(),purple:getComputedStyle(document.body).getPropertyValue("--bs-purple").trim(),purpleRgb:getComputedStyle(document.body).getPropertyValue("--bs-purple-rgb").trim(),yellow:getComputedStyle(document.body).getPropertyValue("--bs-yellow").trim(),yellowRgb:getComputedStyle(document.body).getPropertyValue("--bs-yellow-rgb").trim(),pink:getComputedStyle(document.body).getPropertyValue("--bs-pink").trim(),pinkRgb:getComputedStyle(document.body).getPropertyValue("--bs-pink-rgb").trim(),cyan:getComputedStyle(document.body).getPropertyValue("--bs-cyan").trim(),cyanRgb:getComputedStyle(document.body).getPropertyValue("--bs-cyan-rgb").trim(),gray100:getComputedStyle(document.body).getPropertyValue("--bs-gray-100").trim(),gray200:getComputedStyle(document.body).getPropertyValue("--bs-gray-200").trim(),gray300:getComputedStyle(document.body).getPropertyValue("--bs-gray-300").trim(),gray400:getComputedStyle(document.body).getPropertyValue("--bs-gray-400").trim(),gray500:getComputedStyle(document.body).getPropertyValue("--bs-gray-500").trim(),gray600:getComputedStyle(document.body).getPropertyValue("--bs-gray-600").trim(),gray700:getComputedStyle(document.body).getPropertyValue("--bs-gray-700").trim(),gray800:getComputedStyle(document.body).getPropertyValue("--bs-gray-800").trim(),gray900:getComputedStyle(document.body).getPropertyValue("--bs-gray-900").trim(),gray100Rgb:getComputedStyle(document.body).getPropertyValue("--bs-gray-100-rgb").trim(),gray200Rgb:getComputedStyle(document.body).getPropertyValue("--bs-gray-200-rgb").trim(),gray300Rgb:getComputedStyle(document.body).getPropertyValue("--bs-gray-300-rgb").trim(),gray400Rgb:getComputedStyle(document.body).getPropertyValue("--bs-gray-400-rgb").trim(),gray500Rgb:getComputedStyle(document.body).getPropertyValue("--bs-gray-500-rgb").trim(),gray600Rgb:getComputedStyle(document.body).getPropertyValue("--bs-gray-600-rgb").trim(),gray700Rgb:getComputedStyle(document.body).getPropertyValue("--bs-gray-700-rgb").trim(),gray800Rgb:getComputedStyle(document.body).getPropertyValue("--bs-gray-800-rgb").trim(),gray900Rgb:getComputedStyle(document.body).getPropertyValue("--bs-gray-900-rgb").trim(),muted:getComputedStyle(document.body).getPropertyValue("--bs-muted").trim(),mutedRgb:getComputedStyle(document.body).getPropertyValue("--bs-muted-rgb").trim(),emphasisColor:getComputedStyle(document.body).getPropertyValue("--bs-emphasis-color").trim(),emphasisColorRgb:getComputedStyle(document.body).getPropertyValue("--bs-emphasis-color-rgb").trim(),bodyBg:getComputedStyle(document.body).getPropertyValue("--bs-body-bg").trim(),bodyBgRgb:getComputedStyle(document.body).getPropertyValue("--bs-body-bg-rgb").trim(),bodyColor:getComputedStyle(document.body).getPropertyValue("--bs-body-color").trim(),bodyColorRgb:getComputedStyle(document.body).getPropertyValue("--bs-body-color-rgb").trim(),componentBg:getComputedStyle(document.body).getPropertyValue("--bs-component-bg").trim(),componentBgRgb:getComputedStyle(document.body).getPropertyValue("--bs-component-bg-rgb").trim(),headingColor:getComputedStyle(document.body).getPropertyValue("--bs-heading-color").trim(),secondaryColor:getComputedStyle(document.body).getPropertyValue("--bs-secondary-color").trim(),secondaryColorRgb:getComputedStyle(document.body).getPropertyValue("--bs-secondary-color-rgb").trim(),secondaryBg:getComputedStyle(document.body).getPropertyValue("--bs-secondary-bg").trim(),secondaryBgRgb:getComputedStyle(document.body).getPropertyValue("--bs-secondary-bg-rgb").trim(),tertiaryColor:getComputedStyle(document.body).getPropertyValue("--bs-tertiary-color").trim(),tertiaryColorRgb:getComputedStyle(document.body).getPropertyValue("--bs-tertiary-color-rgb").trim(),tertiaryBg:getComputedStyle(document.body).getPropertyValue("--bs-tertiary-bg").trim(),tertiaryBgRgb:getComputedStyle(document.body).getPropertyValue("--bs-tertiary-bg-rgb").trim(),linkColor:getComputedStyle(document.body).getPropertyValue("--bs-link-color").trim(),linkColorRgb:getComputedStyle(document.body).getPropertyValue("--bs-link-color-rgb").trim(),linkHoverColor:getComputedStyle(document.body).getPropertyValue("--bs-link-hover-color").trim(),linkHoverColorRgb:getComputedStyle(document.body).getPropertyValue("--bs-link-hover-color-rgb").trim(),borderColor:getComputedStyle(document.body).getPropertyValue("--bs-border-color").trim(),borderColorTranslucent:getComputedStyle(document.body).getPropertyValue("--bs-border-color-translucent").trim()}}}const s6=rI({id:"appVariable",state:()=>dP()});function i6(){return un().appContext.config.globalProperties.emitter}const o6={class:"theme-panel-content"},a6={class:"theme-list clearfix"},l6=["onClick","data-bs-title"],c6={class:"row mt-10px pt-3px"},u6={class:"col-3 d-flex"},h6={class:"form-check form-switch ms-auto mb-0 mt-2px"},d6=qs({__name:"ThemePanel",setup(t){const e=hP(),n=s6(),r=i6();var s=[{name:"Pink",bgClass:"bg-pink",themeClass:"theme-pink"},{name:"Red",bgClass:"bg-red",themeClass:"theme-red"},{name:"Orange",bgClass:"bg-warning",themeClass:"theme-warning"},{name:"Yellow",bgClass:"bg-yellow",themeClass:"theme-yellow"},{name:"Lime",bgClass:"bg-lime",themeClass:"theme-lime"},{name:"Green",bgClass:"bg-green",themeClass:"theme-green"},{name:"Teal",bgClass:"bg-teal",themeClass:"theme-teal"},{name:"Cyan",bgClass:"bg-info",themeClass:"theme-info"},{name:"Default",bgClass:"bg-primary",themeClass:"theme-primary"},{name:"Purple",bgClass:"bg-purple",themeClass:"theme-purple"},{name:"Indigo",bgClass:"bg-indigo",themeClass:"theme-indigo"},{name:"Gray",bgClass:"bg-gray-200",themeClass:"theme-gray-200"}];function i(){var d=dP();n.font=d.font,n.color=d.color}function o(d){d.preventDefault(),e.appThemePanelToggled=!e.appThemePanelToggled,localStorage&&(localStorage.appThemePanelToggled=e.appThemePanelToggled)}function a(d,p){d.preventDefault(),e.appThemeClass=p,localStorage&&(localStorage.appThemeClass=e.appThemeClass),h(localStorage.appThemeClass)}function l(){localStorage&&(localStorage.appDarkMode=e.appDarkMode),u(localStorage.appDarkMode)}function u(d){d=="true"?document.documentElement.setAttribute("data-bs-theme","dark"):document.documentElement.removeAttribute("data-bs-theme"),r.emit("theme-reload",!0),i()}function h(d){for(var p=0;p<document.body.classList.length;p++){var m=document.body.classList[p];m.search("theme-")>-1&&document.body.classList.remove(m)}document.body.classList.add(d),n.color.theme=getComputedStyle(document.body).getPropertyValue("--bs-theme").trim(),n.color.themeRgb=getComputedStyle(document.body).getPropertyValue("--bs-theme-rgb").trim(),r.emit("theme-reload",!0)}return Li(()=>{for(var d=document.querySelectorAll('[data-bs-toggle="tooltip"]'),p=0;p<d.length;p++)new Js(d[p]);localStorage&&(localStorage.appThemePanelToggled&&(e.appThemePanelToggled=JSON.parse(localStorage.appThemePanelToggled)),localStorage.appThemeClass&&(e.appThemeClass=localStorage.appThemeClass,h(localStorage.appThemeClass)),localStorage.appDarkMode&&(e.appDarkMode=localStorage.appDarkMode,u(e.appDarkMode)))}),(d,p)=>(Nt(),Ln("div",{class:Fr(["theme-panel",{active:Ht(e).appThemePanelToggled}])},[lt("a",{href:"#",onClick:o,class:"theme-collapse-btn"},p[2]||(p[2]=[lt("i",{class:"fa fa-cog"},null,-1)])),lt("div",o6,[lt("ul",a6,[(Nt(!0),Ln(_t,null,Ww(Ht(s),m=>(Nt(),Ln("li",{class:Fr({active:Ht(e).appThemeClass==m.themeClass||!Ht(e).appThemeClass&&m.name=="Default"})},[lt("a",{href:"javascript:;",class:Fr(m.bgClass),onClick:_=>a(_,m.themeClass),"data-bs-toggle":"tooltip","data-bs-trigger":"hover","data-bs-container":"body","data-bs-title":m.name},"",10,l6)],2))),256))]),p[5]||(p[5]=lt("hr",{class:"mb-0"},null,-1)),lt("div",c6,[p[4]||(p[4]=lt("div",{class:"col-9 control-label text-body fw-bold"},[lt("div",null,[id("Dark Mode "),lt("span",{class:"badge bg-theme text-theme-color ms-1 position-relative py-4px px-6px",style:{top:"-1px"}},"NEW")]),lt("div",{class:"lh-14 fs-13px"},[lt("small",{class:"text-body opacity-50"}," Adjust the appearance to reduce glare and give your eyes a break. ")])],-1)),lt("div",u6,[lt("div",h6,[Iw(lt("input",{type:"checkbox",class:"form-check-input",onChange:p[0]||(p[0]=m=>l()),"onUpdate:modelValue":p[1]||(p[1]=m=>Ht(e).appDarkMode=m),"true-value":"true",id:"appThemeDarkMode",value:"true"},null,544),[[ld,Ht(e).appDarkMode]]),p[3]||(p[3]=lt("label",{class:"form-check-label",for:"appThemeDarkMode"},"",-1))])])])])],2))}}),f6="modulepreload",p6=function(t){return"/admin_vue/"+t},kb={},ae=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.all(n.map(a=>{if(a=p6(a),a in kb)return;kb[a]=!0;const l=a.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${u}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":f6,l||(h.as="script"),h.crossOrigin="",h.href=a,o&&h.setAttribute("nonce",o),document.head.appendChild(h),l)return new Promise((d,p)=>{h.addEventListener("load",d),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${a}`)))})}))}return s.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};/*!
  * vue-router v4.4.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ho=typeof document<"u";function g6(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const $e=Object.assign;function hp(t,e){const n={};for(const r in e){const s=e[r];n[r]=er(s)?s.map(t):t(s)}return n}const El=()=>{},er=Array.isArray,fP=/#/g,m6=/&/g,_6=/\//g,y6=/=/g,v6=/\?/g,pP=/\+/g,E6=/%5B/g,T6=/%5D/g,gP=/%5E/g,b6=/%60/g,mP=/%7B/g,w6=/%7C/g,_P=/%7D/g,A6=/%20/g;function ny(t){return encodeURI(""+t).replace(w6,"|").replace(E6,"[").replace(T6,"]")}function I6(t){return ny(t).replace(mP,"{").replace(_P,"}").replace(gP,"^")}function Pg(t){return ny(t).replace(pP,"%2B").replace(A6,"+").replace(fP,"%23").replace(m6,"%26").replace(b6,"`").replace(mP,"{").replace(_P,"}").replace(gP,"^")}function C6(t){return Pg(t).replace(y6,"%3D")}function S6(t){return ny(t).replace(fP,"%23").replace(v6,"%3F")}function R6(t){return t==null?"":S6(t).replace(_6,"%2F")}function Kl(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const P6=/\/$/,N6=t=>t.replace(P6,"");function dp(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=L6(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:Kl(o)}}function O6(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Db(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function k6(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&ea(e.matched[r],n.matched[s])&&yP(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ea(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function yP(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!D6(t[n],e[n]))return!1;return!0}function D6(t,e){return er(t)?Lb(t,e):er(e)?Lb(e,t):t===e}function Lb(t,e){return er(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function L6(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const ls={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Gl;(function(t){t.pop="pop",t.push="push"})(Gl||(Gl={}));var Tl;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Tl||(Tl={}));function M6(t){if(!t)if(ho){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),N6(t)}const x6=/^[^#]+#/;function V6(t,e){return t.replace(x6,"#")+e}function F6(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Jd=()=>({left:window.scrollX,top:window.scrollY});function U6(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=F6(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Mb(t,e){return(history.state?history.state.position-e:-1)+t}const Ng=new Map;function $6(t,e){Ng.set(t,e)}function B6(t){const e=Ng.get(t);return Ng.delete(t),e}let H6=()=>location.protocol+"//"+location.host;function vP(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Db(l,"")}return Db(n,t)+r+s}function W6(t,e,n,r){let s=[],i=[],o=null;const a=({state:p})=>{const m=vP(t,location),_=n.value,w=e.value;let P=0;if(p){if(n.value=m,e.value=p,o&&o===_){o=null;return}P=w?p.position-w.position:0}else r(m);s.forEach(D=>{D(n.value,_,{delta:P,type:Gl.pop,direction:P?P>0?Tl.forward:Tl.back:Tl.unknown})})};function l(){o=n.value}function u(p){s.push(p);const m=()=>{const _=s.indexOf(p);_>-1&&s.splice(_,1)};return i.push(m),m}function h(){const{history:p}=window;p.state&&p.replaceState($e({},p.state,{scroll:Jd()}),"")}function d(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function xb(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Jd():null}}function j6(t){const{history:e,location:n}=window,r={value:vP(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const d=t.indexOf("#"),p=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:H6()+t+l;try{e[h?"replaceState":"pushState"](u,"",p),s.value=u}catch(m){console.error(m),n[h?"replace":"assign"](p)}}function o(l,u){const h=$e({},e.state,xb(s.value.back,l,s.value.forward,!0),u,{position:s.value.position});i(l,h,!0),r.value=l}function a(l,u){const h=$e({},s.value,e.state,{forward:l,scroll:Jd()});i(h.current,h,!0);const d=$e({},xb(r.value,l,null),{position:h.position+1},u);i(l,d,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function q6(t){t=M6(t);const e=j6(t),n=W6(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=$e({location:"",base:t,go:r,createHref:V6.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function K6(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),q6(t)}function G6(t){return typeof t=="string"||t&&typeof t=="object"}function EP(t){return typeof t=="string"||typeof t=="symbol"}const TP=Symbol("");var Vb;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Vb||(Vb={}));function ta(t,e){return $e(new Error,{type:t,[TP]:!0},e)}function Rr(t,e){return t instanceof Error&&TP in t&&(e==null||!!(t.type&e))}const Fb="[^/]+?",z6={sensitive:!1,strict:!1,start:!0,end:!0},Y6=/[.+*?^${}()[\]/\\]/g;function Q6(t,e){const n=$e({},z6,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const p=u[d];let m=40+(n.sensitive?.25:0);if(p.type===0)d||(s+="/"),s+=p.value.replace(Y6,"\\$&"),m+=40;else if(p.type===1){const{value:_,repeatable:w,optional:P,regexp:D}=p;i.push({name:_,repeatable:w,optional:P});const k=D||Fb;if(k!==Fb){m+=10;try{new RegExp(`(${k})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${_}" (${k}): `+C.message)}}let b=w?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;d||(b=P&&u.length<2?`(?:/${b})`:"/"+b),P&&(b+="?"),s+=b,m+=20,P&&(m+=-8),w&&(m+=-20),k===".*"&&(m+=-50)}h.push(m)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",_=i[p-1];d[_.name]=m&&_.repeatable?m.split("/"):m}return d}function l(u){let h="",d=!1;for(const p of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const m of p)if(m.type===0)h+=m.value;else if(m.type===1){const{value:_,repeatable:w,optional:P}=m,D=_ in u?u[_]:"";if(er(D)&&!w)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const k=er(D)?D.join("/"):D;if(!k)if(P)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${_}"`);h+=k}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function X6(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function bP(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=X6(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Ub(r))return 1;if(Ub(s))return-1}return s.length-r.length}function Ub(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const J6={type:0,value:""},Z6=/[a-zA-Z0-9_]/;function eG(t){if(!t)return[[]];if(t==="/")return[[J6]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,u="",h="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),o()):l===":"?(d(),n=1):p();break;case 4:p(),n=r;break;case 1:l==="("?n=2:Z6.test(l)?p():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),s}function tG(t,e,n){const r=Q6(eG(t.path),n),s=$e(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function nG(t,e){const n=[],r=new Map;e=Hb({strict:!1,end:!0,sensitive:!1},e);function s(d){return r.get(d)}function i(d,p,m){const _=!m,w=rG(d);w.aliasOf=m&&m.record;const P=Hb(e,d),D=[w];if("alias"in d){const C=typeof d.alias=="string"?[d.alias]:d.alias;for(const L of C)D.push($e({},w,{components:m?m.record.components:w.components,path:L,aliasOf:m?m.record:w}))}let k,b;for(const C of D){const{path:L}=C;if(p&&L[0]!=="/"){const x=p.record.path,A=x[x.length-1]==="/"?"":"/";C.path=p.record.path+(L&&A+L)}if(k=tG(C,p,P),m?m.alias.push(k):(b=b||k,b!==k&&b.alias.push(k),_&&d.name&&!Bb(k)&&o(d.name)),wP(k)&&l(k),w.children){const x=w.children;for(let A=0;A<x.length;A++)i(x[A],k,m&&m.children[A])}m=m||k}return b?()=>{o(b)}:El}function o(d){if(EP(d)){const p=r.get(d);p&&(r.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const p=oG(d,n);n.splice(p,0,d),d.record.name&&!Bb(d)&&r.set(d.record.name,d)}function u(d,p){let m,_={},w,P;if("name"in d&&d.name){if(m=r.get(d.name),!m)throw ta(1,{location:d});P=m.record.name,_=$e($b(p.params,m.keys.filter(b=>!b.optional).concat(m.parent?m.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),d.params&&$b(d.params,m.keys.map(b=>b.name))),w=m.stringify(_)}else if(d.path!=null)w=d.path,m=n.find(b=>b.re.test(w)),m&&(_=m.parse(w),P=m.record.name);else{if(m=p.name?r.get(p.name):n.find(b=>b.re.test(p.path)),!m)throw ta(1,{location:d,currentLocation:p});P=m.record.name,_=$e({},p.params,d.params),w=m.stringify(_)}const D=[];let k=m;for(;k;)D.unshift(k.record),k=k.parent;return{name:P,path:w,params:_,matched:D,meta:iG(D)}}t.forEach(d=>i(d));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function $b(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function rG(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:sG(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function sG(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Bb(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function iG(t){return t.reduce((e,n)=>$e(e,n.meta),{})}function Hb(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function oG(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;bP(t,e[i])<0?r=i:n=i+1}const s=aG(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function aG(t){let e=t;for(;e=e.parent;)if(wP(e)&&bP(t,e)===0)return e}function wP({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function lG(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(pP," "),o=i.indexOf("="),a=Kl(o<0?i:i.slice(0,o)),l=o<0?null:Kl(i.slice(o+1));if(a in e){let u=e[a];er(u)||(u=e[a]=[u]),u.push(l)}else e[a]=l}return e}function Wb(t){let e="";for(let n in t){const r=t[n];if(n=C6(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(er(r)?r.map(i=>i&&Pg(i)):[r&&Pg(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function cG(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=er(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const uG=Symbol(""),jb=Symbol(""),Zd=Symbol(""),ry=Symbol(""),Og=Symbol("");function ja(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function gs(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(ta(4,{from:n,to:e})):p instanceof Error?l(p):G6(p)?l(ta(2,{from:e,to:p})):(o&&r.enterCallbacks[s]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(r&&r.instances[s],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(p=>l(p))})}function fp(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(hG(l)){const h=(l.__vccOpts||l)[e];h&&i.push(gs(h,n,r,o,a,s))}else{let u=l();i.push(()=>u.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const d=g6(h)?h.default:h;o.components[a]=d;const m=(d.__vccOpts||d)[e];return m&&gs(m,n,r,o,a,s)()}))}}return i}function hG(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function qb(t){const e=Qt(Zd),n=Qt(ry),r=En(()=>{const l=Ht(t.to);return e.resolve(l)}),s=En(()=>{const{matched:l}=r.value,{length:u}=l,h=l[u-1],d=n.matched;if(!h||!d.length)return-1;const p=d.findIndex(ea.bind(null,h));if(p>-1)return p;const m=Kb(l[u-2]);return u>1&&Kb(h)===m&&d[d.length-1].path!==m?d.findIndex(ea.bind(null,l[u-2])):p}),i=En(()=>s.value>-1&&gG(n.params,r.value.params)),o=En(()=>s.value>-1&&s.value===n.matched.length-1&&yP(n.params,r.value.params));function a(l={}){return pG(l)?e[Ht(t.replace)?"replace":"push"](Ht(t.to)).catch(El):Promise.resolve()}return{route:r,href:En(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const dG=qs({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:qb,setup(t,{slots:e}){const n=ra(qb(t)),{options:r}=Qt(Zd),s=En(()=>({[Gb(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Gb(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:od("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),fG=dG;function pG(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function gG(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!er(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Kb(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Gb=(t,e,n)=>t??e??n,mG=qs({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Qt(Og),s=En(()=>t.route||r.value),i=Qt(jb,0),o=En(()=>{let u=Ht(i);const{matched:h}=s.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=En(()=>s.value.matched[o.value]);il(jb,En(()=>o.value+1)),il(uG,a),il(Og,s);const l=Yt();return $r(()=>[l.value,a.value,t.name],([u,h,d],[p,m,_])=>{h&&(h.instances[d]=u,m&&m!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),u&&h&&(!m||!ea(h,m)||!p)&&(h.enterCallbacks[d]||[]).forEach(w=>w(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,d=a.value,p=d&&d.components[h];if(!p)return zb(n.default,{Component:p,route:u});const m=d.props[h],_=m?m===!0?u.params:typeof m=="function"?m(u):m:null,P=od(p,$e({},_,e,{onVnodeUnmounted:D=>{D.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return zb(n.default,{Component:P,route:u})||P}}});function zb(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const _G=mG;function yG(t){const e=nG(t.routes,t),n=t.parseQuery||lG,r=t.stringifyQuery||Wb,s=t.history,i=ja(),o=ja(),a=ja(),l=Qh(ls);let u=ls;ho&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=hp.bind(null,U=>""+U),d=hp.bind(null,R6),p=hp.bind(null,Kl);function m(U,ee){let X,se;return EP(U)?(X=e.getRecordMatcher(U),se=ee):se=U,e.addRoute(se,X)}function _(U){const ee=e.getRecordMatcher(U);ee&&e.removeRoute(ee)}function w(){return e.getRoutes().map(U=>U.record)}function P(U){return!!e.getRecordMatcher(U)}function D(U,ee){if(ee=$e({},ee||l.value),typeof U=="string"){const O=dp(n,U,ee.path),V=e.resolve({path:O.path},ee),H=s.createHref(O.fullPath);return $e(O,V,{params:p(V.params),hash:Kl(O.hash),redirectedFrom:void 0,href:H})}let X;if(U.path!=null)X=$e({},U,{path:dp(n,U.path,ee.path).path});else{const O=$e({},U.params);for(const V in O)O[V]==null&&delete O[V];X=$e({},U,{params:d(O)}),ee.params=d(ee.params)}const se=e.resolve(X,ee),be=U.hash||"";se.params=h(p(se.params));const xe=O6(r,$e({},U,{hash:I6(be),path:se.path})),S=s.createHref(xe);return $e({fullPath:xe,hash:be,query:r===Wb?cG(U.query):U.query||{}},se,{redirectedFrom:void 0,href:S})}function k(U){return typeof U=="string"?dp(n,U,l.value.path):$e({},U)}function b(U,ee){if(u!==U)return ta(8,{from:ee,to:U})}function C(U){return A(U)}function L(U){return C($e(k(U),{replace:!0}))}function x(U){const ee=U.matched[U.matched.length-1];if(ee&&ee.redirect){const{redirect:X}=ee;let se=typeof X=="function"?X(U):X;return typeof se=="string"&&(se=se.includes("?")||se.includes("#")?se=k(se):{path:se},se.params={}),$e({query:U.query,hash:U.hash,params:se.path!=null?{}:U.params},se)}}function A(U,ee){const X=u=D(U),se=l.value,be=U.state,xe=U.force,S=U.replace===!0,O=x(X);if(O)return A($e(k(O),{state:typeof O=="object"?$e({},be,O.state):be,force:xe,replace:S}),ee||X);const V=X;V.redirectedFrom=ee;let H;return!xe&&k6(r,se,X)&&(H=ta(16,{to:V,from:se}),Lt(se,se,!0,!1)),(H?Promise.resolve(H):T(V,se)).catch($=>Rr($)?Rr($,2)?$:Dt($):oe($,V,se)).then($=>{if($){if(Rr($,2))return A($e({replace:S},k($.to),{state:typeof $.to=="object"?$e({},be,$.to.state):be,force:xe}),ee||V)}else $=R(V,se,!0,S,be);return N(V,se,$),$})}function v(U,ee){const X=b(U,ee);return X?Promise.reject(X):Promise.resolve()}function y(U){const ee=Zt.values().next().value;return ee&&typeof ee.runWithContext=="function"?ee.runWithContext(U):U()}function T(U,ee){let X;const[se,be,xe]=vG(U,ee);X=fp(se.reverse(),"beforeRouteLeave",U,ee);for(const O of se)O.leaveGuards.forEach(V=>{X.push(gs(V,U,ee))});const S=v.bind(null,U,ee);return X.push(S),ut(X).then(()=>{X=[];for(const O of i.list())X.push(gs(O,U,ee));return X.push(S),ut(X)}).then(()=>{X=fp(be,"beforeRouteUpdate",U,ee);for(const O of be)O.updateGuards.forEach(V=>{X.push(gs(V,U,ee))});return X.push(S),ut(X)}).then(()=>{X=[];for(const O of xe)if(O.beforeEnter)if(er(O.beforeEnter))for(const V of O.beforeEnter)X.push(gs(V,U,ee));else X.push(gs(O.beforeEnter,U,ee));return X.push(S),ut(X)}).then(()=>(U.matched.forEach(O=>O.enterCallbacks={}),X=fp(xe,"beforeRouteEnter",U,ee,y),X.push(S),ut(X))).then(()=>{X=[];for(const O of o.list())X.push(gs(O,U,ee));return X.push(S),ut(X)}).catch(O=>Rr(O,8)?O:Promise.reject(O))}function N(U,ee,X){a.list().forEach(se=>y(()=>se(U,ee,X)))}function R(U,ee,X,se,be){const xe=b(U,ee);if(xe)return xe;const S=ee===ls,O=ho?history.state:{};X&&(se||S?s.replace(U.fullPath,$e({scroll:S&&O&&O.scroll},be)):s.push(U.fullPath,be)),l.value=U,Lt(U,ee,X,S),Dt()}let I;function fe(){I||(I=s.listen((U,ee,X)=>{if(!mt.listening)return;const se=D(U),be=x(se);if(be){A($e(be,{replace:!0}),se).catch(El);return}u=se;const xe=l.value;ho&&$6(Mb(xe.fullPath,X.delta),Jd()),T(se,xe).catch(S=>Rr(S,12)?S:Rr(S,2)?(A(S.to,se).then(O=>{Rr(O,20)&&!X.delta&&X.type===Gl.pop&&s.go(-1,!1)}).catch(El),Promise.reject()):(X.delta&&s.go(-X.delta,!1),oe(S,se,xe))).then(S=>{S=S||R(se,xe,!1),S&&(X.delta&&!Rr(S,8)?s.go(-X.delta,!1):X.type===Gl.pop&&Rr(S,20)&&s.go(-1,!1)),N(se,xe,S)}).catch(El)}))}let Ee=ja(),Y=ja(),re;function oe(U,ee,X){Dt(U);const se=Y.list();return se.length?se.forEach(be=>be(U,ee,X)):console.error(U),Promise.reject(U)}function Me(){return re&&l.value!==ls?Promise.resolve():new Promise((U,ee)=>{Ee.add([U,ee])})}function Dt(U){return re||(re=!U,fe(),Ee.list().forEach(([ee,X])=>U?X(U):ee()),Ee.reset()),U}function Lt(U,ee,X,se){const{scrollBehavior:be}=t;if(!ho||!be)return Promise.resolve();const xe=!X&&B6(Mb(U.fullPath,0))||(se||!X)&&history.state&&history.state.scroll||null;return ia().then(()=>be(U,ee,xe)).then(S=>S&&U6(S)).catch(S=>oe(S,U,ee))}const Ue=U=>s.go(U);let Be;const Zt=new Set,mt={currentRoute:l,listening:!0,addRoute:m,removeRoute:_,clearRoutes:e.clearRoutes,hasRoute:P,getRoutes:w,resolve:D,options:t,push:C,replace:L,go:Ue,back:()=>Ue(-1),forward:()=>Ue(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Y.add,isReady:Me,install(U){const ee=this;U.component("RouterLink",fG),U.component("RouterView",_G),U.config.globalProperties.$router=ee,Object.defineProperty(U.config.globalProperties,"$route",{enumerable:!0,get:()=>Ht(l)}),ho&&!Be&&l.value===ls&&(Be=!0,C(s.location).catch(be=>{}));const X={};for(const be in ls)Object.defineProperty(X,be,{get:()=>l.value[be],enumerable:!0});U.provide(Zd,ee),U.provide(ry,Hg(X)),U.provide(Og,l);const se=U.unmount;Zt.add(U),U.unmount=function(){Zt.delete(U),Zt.size<1&&(u=ls,I&&I(),I=null,l.value=ls,Be=!1,re=!1),se()}}};function ut(U){return U.reduce((ee,X)=>ee.then(()=>y(X)),Promise.resolve())}return mt}function vG(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>ea(u,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>ea(u,l))||s.push(l))}return[n,r,s]}function v3(){return Qt(Zd)}function E3(t){return Qt(ry)}const zl=yG({history:K6("/admin_vue//"),routes:[{name:"Auth",meta:{requiresNotAuth:!0},path:"/",component:()=>ae(()=>import("./Auth-D7-naArs.js"),[])},{name:"MainPage",path:"/main",meta:{requiresAuth:!0},redirect:{path:"/dashboard"},component:()=>ae(()=>import("./Main-BbSNpPt-.js"),__vite__mapDeps([0,1,2])),children:[{path:"/dashboard",component:()=>ae(()=>import("./Dashboard-BUPJbX4V.js"),__vite__mapDeps([3,2]))},{path:"/customers",component:()=>ae(()=>import("./Customers-cA1Cjf1C.js"),__vite__mapDeps([4,5,6,7,8,9,10]))},{path:"/categories",component:()=>ae(()=>import("./CategoriesList-DVepH3Am.js"),__vite__mapDeps([11,6,7,8]))},{path:"/customer-create",component:()=>ae(()=>import("./CreateCustomer-DaYuUbwk.js"),__vite__mapDeps([12,13,14,15,16,17,18,9,5,6,19]))},{path:"/category-create",component:()=>ae(()=>import("./CreateCategory-BbUR5YeG.js"),__vite__mapDeps([20,21,13,14,6,9]))},{path:"/category-update/:categoryId",component:()=>ae(()=>import("./UpdateCategory-DfYZ7YQf.js"),__vite__mapDeps([22,21,13,14,6,9]))},{path:"/analytics",component:()=>ae(()=>import("./Analytics-YjdmN4ad.js"),__vite__mapDeps([23,24,25]))},{path:"/email/inbox",component:()=>ae(()=>import("./EmailInbox-Be5GCjMI.js"),[])},{path:"/email/compose",component:()=>ae(()=>import("./EmailCompose-C2bABuMK.js"),__vite__mapDeps([26,13,14,27]))},{path:"/email/detail/:id",component:()=>ae(()=>import("./EmailDetail-CfYycKpd.js"),__vite__mapDeps([28,29,30]))},{path:"/email/detail",component:()=>ae(()=>import("./EmailDetail-CfYycKpd.js"),__vite__mapDeps([28,29,30]))},{path:"/widgets",component:()=>ae(()=>import("./Widgets-oOAfbzC5.js"),__vite__mapDeps([31,32,33,34,35,24,36,37,38,29,39,40]))},{path:"/pos/customer-order",component:()=>ae(()=>import("./PosCustomerOrder-C_oZFp-7.js"),__vite__mapDeps([41,37]))},{path:"/pos/kitchen-order",component:()=>ae(()=>import("./PosKitchenOrder-CB5hFxkD.js"),__vite__mapDeps([42,37]))},{path:"/pos/counter-checkout",component:()=>ae(()=>import("./PosCounterCheckout-D8teyALC.js"),__vite__mapDeps([43,37]))},{path:"/pos/table-booking",component:()=>ae(()=>import("./PosTableBooking-BMdgh8hv.js"),__vite__mapDeps([44,37,17,18]))},{path:"/pos/menu-stock",component:()=>ae(()=>import("./PosMenuStock-CufkM3LC.js"),__vite__mapDeps([45,37]))},{path:"/ui/bootstrap",component:()=>ae(()=>import("./UiBootstrap-BPjHDEh9.js"),__vite__mapDeps([46,35,36,37]))},{path:"/ui/buttons",component:()=>ae(()=>import("./UiButtons-C4ACYUhx.js"),__vite__mapDeps([47,35,36,37]))},{path:"/ui/card",component:()=>ae(()=>import("./UiCard-PKvriIyQ.js"),__vite__mapDeps([48,35,36,25,37]))},{path:"/ui/icons",component:()=>ae(()=>import("./UiIcons-C4PRg925.js"),[])},{path:"/ui/modal-notifications",component:()=>ae(()=>import("./UiModalNotifications--GjtxSFq.js"),__vite__mapDeps([49,35,36,37]))},{path:"/ui/typography",component:()=>ae(()=>import("./UiTypography--w9BNHXD.js"),__vite__mapDeps([50,35,36,37]))},{path:"/ui/tabs-accordions",component:()=>ae(()=>import("./UiTabsAccordions-BZ0sGWH2.js"),__vite__mapDeps([51,35,36,37]))},{path:"/form/elements",component:()=>ae(()=>import("./FormElements-ouoDMyto.js"),__vite__mapDeps([52,35,36,37]))},{path:"/form/plugins",component:()=>ae(()=>import("./FormPlugins-WPasy6Ch.js"),__vite__mapDeps([53,35,36,17,18,27,13,14,15,16,37,54]))},{path:"/form/wizards",component:()=>ae(()=>import("./FormWizards-D4fsbYIa.js"),__vite__mapDeps([55,35,36,37]))},{path:"/table/elements",component:()=>ae(()=>import("./TableElements-CPFIkvse.js"),__vite__mapDeps([56,35,36,37]))},{path:"/table/plugins",component:()=>ae(()=>import("./TablePlugins-BvD6vQ6x.js"),__vite__mapDeps([57,35,36,37,58]))},{path:"/chart/chart-js",component:()=>ae(()=>import("./ChartJs-C0uRTgpo.js"),__vite__mapDeps([59,35,24,36,37]))},{path:"/chart/chart-apex",component:()=>ae(()=>import("./ChartApex-BkeZrCtX.js"),__vite__mapDeps([60,35,36,37]))},{path:"/map",component:()=>ae(()=>import("./Map-CiDCxfuP.js"),__vite__mapDeps([61,35,36,37,62]))},{path:"/layout/starter-page",component:()=>ae(()=>import("./LayoutStarterPage-OJNxPQ0s.js"),[])},{path:"/layout/fixed-footer",component:()=>ae(()=>import("./LayoutFixedFooter-CalS_0wm.js"),__vite__mapDeps([63,35,37]))},{path:"/layout/full-height",component:()=>ae(()=>import("./LayoutFullHeight-C5nJ1p_h.js"),__vite__mapDeps([64,35,37]))},{path:"/layout/full-width",component:()=>ae(()=>import("./LayoutFullWidth-CChZQ7aK.js"),__vite__mapDeps([65,35,37]))},{path:"/layout/boxed-layout",component:()=>ae(()=>import("./LayoutBoxedLayout-ZIOB_9tG.js"),__vite__mapDeps([66,35,37]))},{path:"/layout/minified-sidebar",component:()=>ae(()=>import("./LayoutMinifiedSidebar-B075cDpT.js"),__vite__mapDeps([67,35,37]))},{path:"/layout/top-nav",component:()=>ae(()=>import("./LayoutTopNav-Djcz00iL.js"),__vite__mapDeps([68,35,37]))},{path:"/layout/mixed-nav",component:()=>ae(()=>import("./LayoutMixedNav-BXq92AQM.js"),__vite__mapDeps([69,35,37]))},{path:"/layout/mixed-nav-boxed-layout",component:()=>ae(()=>import("./LayoutMixedNavBoxedLayout-CW5UsrXO.js"),__vite__mapDeps([70,35,37]))},{path:"/page/scrum-board",component:()=>ae(()=>import("./PageScrumBoard-DZHB6BlA.js"),__vite__mapDeps([71,27,29,38]))},{path:"/page/product",component:()=>ae(()=>import("./PageProduct-DSEpyzQS.js"),[])},{path:"/page/product-details",component:()=>ae(()=>import("./PageProductDetails-D23e-svN.js"),__vite__mapDeps([72,27,13,14]))},{path:"/page/order",component:()=>ae(()=>import("./PageOrder-BGSyyxuI.js"),[])},{path:"/page/order-details",component:()=>ae(()=>import("./PageOrderDetails-CsUGiDGS.js"),__vite__mapDeps([73,29]))},{path:"/page/gallery",component:()=>ae(()=>import("./PageGallery-C54YR9rI.js"),__vite__mapDeps([74,30,75]))},{path:"/page/search-results",component:()=>ae(()=>import("./PageSearchResults-DRw-jKUW.js"),[])},{path:"/page/coming-soon",component:()=>ae(()=>import("./PageComingSoon-BndINReG.js"),[])},{path:"/page/error",component:()=>ae(()=>import("./PageError-BWWL-fNY.js"),[])},{path:"/page/login",component:()=>ae(()=>import("./PageLogin-3MPFEwfy.js"),[])},{path:"/page/register",component:()=>ae(()=>import("./PageRegister-BX1M0crd.js"),[])},{path:"/page/messenger",component:()=>ae(()=>import("./PageMessenger-DjtPv1iP.js"),__vite__mapDeps([76,38,39,40,77,78,29]))},{path:"/page/data-management",component:()=>ae(()=>import("./PageDataManagement-DwEaCQWs.js"),__vite__mapDeps([79,33,80]))},{path:"/page/file-manager",component:()=>ae(()=>import("./PageFileManager-CqYZ4eHx.js"),__vite__mapDeps([81,82]))},{path:"/page/pricing",component:()=>ae(()=>import("./PagePricing-DyVMeWPA.js"),__vite__mapDeps([83,82]))},{path:"/landing",component:()=>ae(()=>import("./Landing-G0TgUaFu.js"),__vite__mapDeps([84,32,33,34,82,1,40,77]))},{path:"/profile",component:()=>ae(()=>import("./Profile-DXf_05Ka.js"),__vite__mapDeps([85,32,33,34,29,38,39,40,77,78]))},{path:"/calendar",component:()=>ae(()=>import("./Calendar-DprfQuNY.js"),[])},{path:"/settings",component:()=>ae(()=>import("./Settings-CMql8Mem.js"),__vite__mapDeps([86,36]))},{path:"/helper",component:()=>ae(()=>import("./Helper-B7bXf-18.js"),__vite__mapDeps([87,35,36,37]))}]},{path:"/:pathMatch(.*)*",component:()=>ae(()=>import("./PageError-BWWL-fNY.js"),[])}]});zl.beforeEach(async t=>{if(t.meta.requiresAuth&&!await uC())return{name:"Auth"}});zl.beforeEach(async t=>{if(t.meta.requiresNotAuth&&await uC())return{name:"MainPage"}});const EG={class:"d-flex h-100 flex-column"},TG=qs({__name:"App",setup(t){const e=hP(),n=[];return zl.beforeEach(async(r,s)=>{n.push(BD().start()),e.appSidebarMobileToggled=!1,document.body.scrollTop=0,document.documentElement.scrollTop=0,[].slice.call(document.querySelectorAll(".app-sidebar .menu-submenu")).map(function(o){o.style.display=""})}),zl.afterEach(async(r,s)=>{var i;(i=n.pop())==null||i.finish()}),(r,s)=>{const i=$w("router-view");return Nt(),Ln("div",EG,[lt("div",{class:Fr(["flex-1 d-flex flex-column",Ht(e).appContentClass])},[Ke(i)],2),Ke(d6)])}}}),ji=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},bG={},wG={class:"card",ref:"card"};function AG(t,e){return Nt(),Ln("div",wG,[Ks(t.$slots,"default")],512)}const IG=ji(bG,[["render",AG]]),CG={},SG={class:"card-body"};function RG(t,e){return Nt(),Ln("div",SG,[Ks(t.$slots,"default")])}const PG=ji(CG,[["render",RG]]),NG={},OG={class:"card-header"};function kG(t,e){return Nt(),Ln("div",OG,[Ks(t.$slots,"default")])}const DG=ji(NG,[["render",kG]]),LG={},MG={class:"card-footer"};function xG(t,e){return Nt(),Ln("div",MG,[Ks(t.$slots,"default")])}const VG=ji(LG,[["render",xG]]),FG={},UG={class:"card-group"};function $G(t,e){return Nt(),Ln("div",UG,[Ks(t.$slots,"default")])}const BG=ji(FG,[["render",$G]]),HG={},WG={class:"card-img-overlay"};function jG(t,e){return Nt(),Ln("div",WG,[Ks(t.$slots,"default")])}const qG=ji(HG,[["render",jG]]),KG={mounted(){this.$refs.toggler.onclick=function(t){t.preventDefault();var e=this.closest(".card"),n="card-expand";document.body.classList.contains(n)&&e.classList.contains(n)?(e.removeAttribute("style"),e.classList.remove(n),document.body.classList.remove(n)):(document.body.classList.add(n),e.classList.add(n)),window.dispatchEvent(new Event("resize"))},new Js(this.$refs.toggler,{title:"Expand / Compress",placement:"bottom",trigger:"hover",container:"body"})}},GG={href:"#","data-toggle":"card-expand",ref:"toggler",class:"text-body text-opacity-50 text-decoration-none"};function zG(t,e,n,r,s,i){return Nt(),Ln("a",GG,e[0]||(e[0]=[lt("i",{class:"fas fa-lg fa-expand"},null,-1)]),512)}const YG=ji(KG,[["render",zG]]),QG=rj(),_n=nh(TG);_n.component("Card",IG);_n.component("CardBody",PG);_n.component("CardHeader",DG);_n.component("CardFooter",VG);_n.component("CardGroup",BG);_n.component("CardImgOverlay",qG);_n.component("CardExpandToggler",YG);_n.use(KW,{firebaseApp:V_,modules:[WW()]});_n.use(SD());_n.use(zl);_n.use($D);_n.use(nL);_n.config.globalProperties.emitter=QG;_n.mount("#app");export{f3 as $,zl as A,BD as B,d6 as C,_G as D,uC as E,_t as F,e3 as G,$r as H,En as I,JG as J,HA as K,TA as L,bO as M,ld as N,y3 as O,d3 as P,_3 as Q,fG as R,u3 as S,E3 as T,i3 as U,a3 as V,l3 as W,o3 as X,c3 as Y,yH as Z,ji as _,Zl as a,m3 as a0,p3 as a1,eH as a2,h3 as a3,HR as a4,XO as a5,xA as a6,Ks as a7,Xl as a8,ia as a9,LD as aA,Qg as aB,un as aC,yw as aD,Qt as aE,il as aF,Yh as aG,ae as aH,Ap as aI,Js as aJ,Hw as aa,XN as ab,JN as ac,s6 as ad,Qd as ae,Jo as af,om as ag,XG as ah,Xd as ai,TD as aj,EO as ak,iN as al,EA as am,Uk as an,ra as ao,OO as ap,UN as aq,rd as ar,TO as as,tt as at,rO as au,od as av,YA as aw,xw as ax,Hh as ay,Vg as az,Nt as b,Ln as c,qs as d,lt as e,Iw as f,gk as g,v3 as h,g3 as i,rI as j,Ww as k,Nl as l,Zh as m,Fr as n,Li as o,Ht as p,$w as q,Yt as r,ZG as s,ew as t,hP as u,th as v,vD as w,Ke as x,id as y,pk as z};
