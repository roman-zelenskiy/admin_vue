import{d as q,r as d,H as E,q as D,b as n,c as i,e,x as p,z as H,m as b,y as L,t as s,F as u,k as F,f as R,v as T}from"./index-Db-Z4ngN.js";import{u as U}from"./customers-DtUuUaqA.js";import{u as m}from"./categories-DVwBCo0-.js";import{M as z,_ as G}from"./ModalConfirmation-DR-VJmwg.js";import"./generateUniqueId-BGfF6MB9.js";import"./getDocumentsByFilters-DHcTt1gp.js";const K={class:"d-flex align-items-center mb-3"},W={class:"ms-auto"},J={class:"tab-content p-4"},O={class:"tab-pane fade show active",id:"allTab"},Q={class:"input-group mb-4"},X={class:"btn btn-default dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},Y={class:"dropdown-menu"},tt=["onClick"],et={class:"flex-fill position-relative"},at={class:"input-group"},lt={class:"table-responsive"},st={class:"table table-hover text-nowrap"},nt={class:"d-flex align-items-center"},it={class:"w-60px h-60px bg-gray-100 d-flex align-items-center justify-content-center"},dt=["src"],ot={key:1,class:"icon",viewBox:"0 0 65 65",xmlns:"http://www.w3.org/2000/svg"},pt={class:"align-middle"},rt={class:"align-middle"},ct={class:"ms-3 text-truncate",style:{"max-width":"300px"}},vt={key:0},gt=["href"],_t={class:"align-middle"},ht={class:"align-middle"},bt={class:"align-middle"},ut={class:"align-middle"},Ct={class:"align-middle"},ft={class:"align-middle"},yt=["onClick"],Ft=q({__name:"Customers",setup(wt){const C=U(),I=m(),r=d(1),c=d(""),v=d(""),f=d(0),y=d([]),w=d(""),g=d(!1),{categories:A}=I.getAllCategories(),B=l=>A.value.find(a=>a.id===l),x=[{value:"id",title:"Id"},{value:"name",title:"Name"},{value:"company",title:"Company"},{value:"createdAt",title:"Created at"}],N=l=>{w.value=l},k=(l,a)=>{l&&N(a),g.value=l},$=l=>{v.value=l},_=async()=>{const{documents:l,totalPages:a}=await C.getCustomersByFilters(r.value,{filterValue:c.value,filterKey:v.value});y.value=l||[],f.value=a},Z=async l=>{await C.deleteDocument(l),await _(),k(!1,"")};return E([r,c],()=>{_()},{deep:!0}),_(),(l,a)=>{const V=D("RouterLink"),j=D("card");return n(),i(u,null,[e("div",K,[p(z,{onActionSuccess:a[0]||(a[0]=o=>Z(w.value)),modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=o=>g.value=o),title:"Delete a customer?"},null,8,["modelValue"]),a[5]||(a[5]=H('<div><ul class="breadcrumb"><li class="breadcrumb-item"><a href="#">PAGES</a></li><li class="breadcrumb-item active text-uppercase">Customers</li></ul><h1 class="page-header mb-0">Customers</h1></div>',1)),e("div",W,[p(V,{to:"/customer-create",href:"#",class:"btn btn-theme"},{default:b(()=>a[4]||(a[4]=[e("i",{class:"fa fa-plus-circle fa-fw me-1"},null,-1),L(" Create Customer")])),_:1})])]),p(j,null,{default:b(()=>{var o;return[e("div",J,[e("div",O,[e("div",Q,[e("button",X,s(((o=x.find(t=>v.value==t.value))==null?void 0:o.title)||"Filter customers")+" Â  ",1),e("div",Y,[(n(),i(u,null,F(x,t=>e("button",{class:"dropdown-item",onClick:h=>$(t.value),key:t.value},s(t.title),9,tt)),64))]),e("div",et,[e("div",at,[a[6]||(a[6]=e("div",{class:"input-group-text position-absolute top-0 bottom-0 bg-none border-0",style:{"z-index":"1020"}},[e("i",{class:"fa fa-search opacity-5"})],-1)),R(e("input",{"onUpdate:modelValue":a[2]||(a[2]=t=>c.value=t),type:"text",class:"form-control ps-35px",placeholder:"Search products"},null,512),[[T,c.value]])])])]),e("div",lt,[e("table",st,[a[9]||(a[9]=e("thead",null,[e("tr",null,[e("th",{class:"pt-0 pb-2"}),e("th",{class:"pt-0 pb-2"},"Id"),e("th",{class:"pt-0 pb-2"},"Name"),e("th",{class:"pt-0 pb-2"},"Category"),e("th",{class:"pt-0 pb-2"},"REF"),e("th",{class:"pt-0 pb-2"},"Company"),e("th",{class:"pt-0 pb-2"},"Country"),e("th",{class:"pt-0 pb-2"},"Created At"),e("th",{class:"pt-0 pb-2"})])],-1)),e("tbody",null,[(n(!0),i(u,null,F(y.value,t=>{var h,S,M,P;return n(),i("tr",{key:t.id},[e("td",null,[e("div",nt,[e("div",it,[p(V,{class:"d-flex align-items-center justify-content-center",to:/customer-update/+(t==null?void 0:t.id)},{default:b(()=>[t!=null&&t.photo?(n(),i("img",{key:0,alt:"",class:"mw-100 mh-100",src:t==null?void 0:t.photo},null,8,dt)):(n(),i("svg",ot,a[7]||(a[7]=[e("path",{d:"M32.5 0.0644531C36.8098 0.0644531 40.943 1.76861 43.9905 4.80203C47.038 7.83546 48.75 11.9497 48.75 16.2396C48.75 20.5295 47.038 24.6437 43.9905 27.6771C40.943 30.7105 36.8098 32.4147 32.5 32.4147C28.1902 32.4147 24.057 30.7105 21.0095 27.6771C17.962 24.6437 16.25 20.5295 16.25 16.2396C16.25 11.9497 17.962 7.83546 21.0095 4.80203C24.057 1.76861 28.1902 0.0644531 32.5 0.0644531ZM32.5 8.15201C30.3451 8.15201 28.2785 9.00409 26.7548 10.5208C25.231 12.0375 24.375 14.0946 24.375 16.2396C24.375 18.3845 25.231 20.4416 26.7548 21.9583C28.2785 23.475 30.3451 24.3271 32.5 24.3271C34.6549 24.3271 36.7215 23.475 38.2452 21.9583C39.769 20.4416 40.625 18.3845 40.625 16.2396C40.625 14.0946 39.769 12.0375 38.2452 10.5208C36.7215 9.00409 34.6549 8.15201 32.5 8.15201ZM32.5 36.4585C43.3469 36.4585 65 41.8367 65 52.6336V64.7649H0V52.6336C0 41.8367 21.6531 36.4585 32.5 36.4585ZM32.5 44.1416C20.4344 44.1416 7.71875 50.0456 7.71875 52.6336V57.0817H57.2812V52.6336C57.2812 50.0456 44.5656 44.1416 32.5 44.1416Z"},null,-1)])))]),_:2},1032,["to"])])])]),e("td",pt,s(t==null?void 0:t.id),1),e("td",rt,[e("div",ct,[t!=null&&t.websiteSocial[0]?(n(),i("a",{key:1,target:"_blank",href:(h=t==null?void 0:t.websiteSocial[0])!=null&&h.value.startsWith("http")?(S=t==null?void 0:t.websiteSocial[0])==null?void 0:S.value:`https://${(M=t==null?void 0:t.websiteSocial[0])==null?void 0:M.value}`},s(t==null?void 0:t.name)+" "+s(t==null?void 0:t.surname),9,gt)):(n(),i("span",vt,s(t==null?void 0:t.name)+" "+s(t==null?void 0:t.surname),1))])]),e("td",_t,s(t.categoryId&&((P=B(t.categoryId))==null?void 0:P.title)||"null"),1),e("td",ht,s((t==null?void 0:t.ref)||"null"),1),e("td",bt,s((t==null?void 0:t.company)||"null"),1),e("td",ut,s((t==null?void 0:t.country)||"null"),1),e("td",Ct,s(t==null?void 0:t.createdAt),1),e("td",ft,[e("button",{onClick:xt=>k(!0,t.id),class:"btn btn-light"},a[8]||(a[8]=[e("i",{class:"fas fa-trash-alt"},null,-1)]),8,yt)])])}),128))])])]),p(G,{class:"justify-content-center mt-2",currentPage:r.value,"onUpdate:currentPage":a[3]||(a[3]=t=>r.value=t),quantityPages:f.value},null,8,["currentPage","quantityPages"])])])]}),_:1})],64)}}});export{Ft as default};
