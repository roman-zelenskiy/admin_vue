import{Y as e,Z as K,a5 as q,a6 as s,a7 as w,a8 as P,a9 as i}from"./index-CjvAX0Hz.js";const D=async(n,c,m=1,a,o=20)=>{var y;const u=m>1?(y=c.value)==null?void 0:y.docs[o-1]:null;try{let t=e(n,K(a!=null&&a.filterValue?a.filterKey:"createdAt"),q(o)),r=e(n);a!=null&&a.filterValue&&(t=e(t,s(a.filterKey,">=",a.filterValue),s(a.filterKey,"<=",a.filterValue+"")),r=e(r,s(a.filterKey,">=",a.filterValue),s(a.filterKey,"<=",a.filterValue+""))),u&&(t=e(t,w(u)));const l=await P(t);c.value=l;const d=l.docs.map(h=>({...h.data()})),g=await i(r),V=Math.ceil(g.data().count/o);return{documents:d,totalPages:V}}catch(t){return console.error("Error fetching documents: ",t),{documents:[],totalPages:0}}};export{D as g};
