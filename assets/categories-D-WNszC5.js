import{U as c,V as h,W as P,X as g,Y as f,Z as B,$ as q,j as A,r as E,P as I,a0 as s,S as C,a1 as K,I as v,a2 as y,a3 as F,a4 as S}from"./index-Btd1EPW-.js";const R=async(n,l,d=1,e,u=20)=>{var a;const i=d>1?(a=l.value)==null?void 0:a.docs[u-1]:null;try{let t=c(n,h(e!=null&&e.filterValue?e.filterKey:"createdAt"),P(u)),r=c(n);e!=null&&e.filterValue&&(t=c(t,g(e.filterKey,">=",e.filterValue),g(e.filterKey,"<=",e.filterValue+"")),r=c(r,g(e.filterKey,">=",e.filterValue),g(e.filterKey,"<=",e.filterValue+""))),i&&(t=c(t,f(i)));const o=await B(t);l.value=o;const p=o.docs.map(D=>({...D.data()})),w=await q(r),V=Math.ceil(w.data().count/u);return{documents:p,totalPages:V}}catch(t){return console.error("Error fetching documents: ",t),{documents:[],totalPages:0}}},x=A("categories",()=>{const n=E(null);return{createCategory:async a=>{try{const t=await I(s,a);return await C(t,{id:t.id}),{status:1}}catch(t){return console.log(t),{status:0}}},getAllCategories:()=>{const a=c(s,h("createdAt")),t=K(a);return{categories:v(()=>t.value.map(o=>({id:o.id,...o})))}},getCategoriesByFilters:async(a=1,t)=>{try{const{documents:r,totalPages:o}=await R(s,n,a,t);return{categories:r,totalPages:o}}catch(r){return console.error("Error fetching documents: ",r),{categories:[],totalPages:0}}},deleteCategory:async a=>{try{const t=y(s,a);return await F(t),{status:1}}catch(t){return console.error("Error deleting category: ",t),{status:0}}},updateCategory:async(a,t)=>{try{const r=y(s,t);return await C(r,{...a}),{status:1}}catch(r){return console.log("Error updating category:",r),{status:0}}},getCategoryById:async a=>{try{const t=y(s,a),r=await S(t);return r.exists()?{status:1,category:{...r.data()}}:{status:0,category:null}}catch(t){return console.error("Error fetching category: ",t),{status:0,category:null}}}}});export{R as g,x as u};
