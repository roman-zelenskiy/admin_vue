import{j as g,r as p,N as c,O as l,P as s,Q as u,S as n,T as i,U as d,V as y}from"./index-DDNcE4wR.js";import{g as m}from"./generateUniqueId-BGfF6MB9.js";import{g as w}from"./getDocumentsByFilters-kyLMTKT8.js";const R=g("realEstate",()=>{const f=p(null);return{createDocument:async r=>{const e=r;e.documentation=await Promise.all(e.documentation.map(async t=>(t&&(t!=null&&t.file)&&(t=await c(t==null?void 0:t.file,`real_estate_documentation/${m()}`)),t))),e.pictures=await Promise.all(e.pictures.map(async t=>(t&&(t!=null&&t.file)&&(t=await c(t==null?void 0:t.file,`real_estate_pictures/${m()}`)),t)));try{const t=await l(s,e);return await u(t,{id:t.id}),{status:1}}catch(t){return console.log(t),{status:0}}},getItemsByFilters:async(r=1,e)=>{try{const{documents:t,totalPages:o}=await w(s,f,r,e);return{documents:t,totalPages:o}}catch(t){return console.error("Error fetching documents: ",t),{documents:[],totalPages:0}}},deleteDocument:async r=>{try{const e=n(s,r),t=await i(e);if(t.exists()){const o=t.data();for(const a of o.pictures)a&&await d(a);for(const a of o.documentation)a&&await d(a)}return await y(e),{status:1}}catch(e){return console.error("Error deleting document: ",e),{status:0}}},getCustomerById:async r=>{try{const e=n(s,r),t=await i(e);return t.exists()?{status:1,document:{...t.data()}}:{status:0,document:null}}catch(e){return console.error("Error fetching document: ",e),{status:0,document:null}}},updateCustomer:async(r,e)=>{const t=r;try{const o=n(s,e);return await u(o,{...t}),{status:1}}catch(o){return console.log("Error updating document:",o),{status:0}}}}});export{R as u};
